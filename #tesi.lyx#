#LyX 2.1 created this file. For more info see http://www.lyx.org/
\lyxformat 474
\begin_document
\begin_header
\textclass article
\use_default_options true
\maintain_unincluded_children false
\language italian
\language_package default
\inputencoding auto
\fontencoding global
\font_roman lmodern
\font_sans default
\font_typewriter default
\font_math auto
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\float_placement H
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry false
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 0
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 0
\use_package mhchem 1
\use_package stackrel 0
\use_package stmaryrd 0
\use_package undertilde 0
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 0
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language french
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vfill
\end_layout

\begin_layout Plain Layout


\backslash
begin{center}
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\size largest
UNIVERSITÀ DEGLI STUDI DI TRENTO
\end_layout

\begin_layout Standard

\size larger
Dipartimento di Ingegneria e Scienza dell’Informazione
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace{70pt}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename img/logo_unitn.png

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace{70pt}
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\size large
CORSO DI LAUREA TRIENNALE IN INFORMATICA
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace{30pt}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Elaborato Finale
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace{30pt}
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\size largest
DATABASE TEMPORALI
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace{50pt}
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\size large
Relatore: Prof.
 Gabriel Kuper 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
hspace{30pt}
\end_layout

\end_inset

 Laureando: Andrea Gottardi
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace{20pt}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Anno accademico 2013/2014
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{center}
\end_layout

\begin_layout Plain Layout


\backslash
date{}
\end_layout

\end_inset


\end_layout

\begin_layout Title
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\align right

\shape italic
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace*{
\backslash
fill}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\align right

\shape italic
Any sufficiently advanced technology is equivalent to magic.
\end_layout

\begin_layout Standard
\align right

\shape italic
–Sir Arthur C.
 Clarke
\end_layout

\begin_layout Standard
\align right
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace*{
\backslash
fill}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
mbox{} 
\backslash
thispagestyle{empty} 
\backslash
newpage
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tableofcontents
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Part*
Ringraziamenti
\end_layout

\begin_layout Standard
Prima di cominciare, voglio ringraziare alcune persone che hanno avuto un
 ruolo importante in tutti questi anni di studio.
 La lista non è sicuramente esaustiva, ma anche a chi non è elencato va
 il mio più sincero ringraziamento.
 
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
Prima di tutto, voglio ringraziare la mia famiglia, che mi ha sostenuto,
 incoraggiato e aiutato in tutti questi anni di studio;
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
Grazie ai miei "colleghi" e compagni di corso Alessandro, Antonio, Mattia
 e Stefano, per aver trascorso insieme la preparazione di questi ultimi
 esami, dove casa mia é diventata il quartier generale dello studio (senza
 disdegnare calcio balilla e console per videogiochi) ;
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
Infine, grazie anche alla mia fidanzata Giulia, per aver ascoltato le mie
 paranoie alla fine di ogni esame, dicendomi che sarebbe andato bene (e
 puntualmente ci ha azzeccato ogni volta, ma non ho mai voluto ammettere
 avesse ragione)
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Abstract
La vita dell'uomo, fin dalla sua prima comparsa sulla Terra, è sempre stata
 scandita dal tempo: all'inizio le unità di misura del tempo erano molto
 approssimate e variabili, basti pensare al concetto di giorno e notte,
 oppure di alba e tramonto, ma ciò era più che sufficiente per organizzare
 e gestire al meglio il lavoro, nei campi oppure a caccia.
 Con il passare del tempo, e con l'invenzione degli orologi, il tempo ha
 assunto una connotazione sempre più importante: se prima un'approssimazione
 anche di diverse ore non era particolarmente influente, questa approssimazione
 è diventata sempre meno estesa, e di conseguenza il calcolo del tempo è
 diventto più accurato, passando dai minuti, ai secondi, ai millesimi di
 secondo, fino ad arrivare ai moderni orologi atomici al cesio, che è stato
 calcolato possano sbagliare di un secondo ogni 100 milioni di anni.
 Esiste anche una nuova concezione di orologi atomici, che utilizza atomi
 di alluminio, e che è stato calcolato possa sbagliare di un secondo dopo
 addirittura 3.7 miliardi di anni 
\begin_inset CommandInset citation
LatexCommand cite
key "1"

\end_inset

.
 Nella tecnologia informatica, e soprattutto nei database, la questione
 del tempo è sempre stata messa "in secondo piano", poichè si è sempre privilegi
ata la conservazione dei dati, piuttosto che la loro accuratezza temporale.
 In questo documento verrà trattata la questione dei database temporali,
 una tecnologia non nuova in campo informatico, che rimane tuttora poco
 conosciuta ai più, ma largamente usata nelle applicazioni reali.
 Verrà prima di tutto presentata la tecnologia come è stata teorizzata alle
 origini e alcuni concetti basilari, in seguito verranno presentati alcuni
 esempi di applicazione in SQL-92 e verranno trattate le nuove funzionalità
 temporali presenti nella versione 2011 dello standard SQL.
 I database temporali verranno inoltre trattati sotto un diverso punto di
 vista, cioè quello dei database cosiddetti NoSQL, che con la loro diversa
 filosofia hanno bisogno di un approccio differente.
 Infine, ma non meno importante, verrà presentato un caso concreto di utilizzo
 dei database temporali, ovvero la Fondazione Bruno Kessler, che li utilizza
 in maniera proficua ed efficiente.
\end_layout

\begin_layout Abstract
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Part
Introduzione
\end_layout

\begin_layout Section
Il concetto del tempo
\end_layout

\begin_layout Standard
Riflettendo un attimo su una giornata qualsiasi della nostra vita, è facile
 accorgersi come l'esistenza di ognuno sia scandita, in maniera continua
 e regolare, da un'entità quasi astratta, ma che con il passare degli anni
 e delle epoche, e con l'innovazione tecnologica, ha acquistato sempre più
 valore e significato: il tempo.
 Ormai non ci si fa quasi più caso, ma non facciamo altro che rincorrere,
 in maniera sempre più frenetica, il tempo passato: abbiamo degli orari
 per entrare al lavoro, altri ancora per uscire, altri orari "tradizionali"
 dedicati ai pasti o al tempo libero, e così via.
 
\end_layout

\begin_layout Standard
Anche nell'informatica, forse più che in altri ambiti, il tempo è fondamentale:
 basti pensare alla grande quantità di applicativi che vengono utilizzati
 nei più disparati contesti, dalle banche ai negozi, dalle centrali elettriche
 alle automobili, che hanno nelle variazioni temporali un fattore vitale
 del loro funzionamento.
 Per fare un esempio, nel caso di una banca, è necessario registrare le
 operazioni compiute fino ai decimi di secondo, o anche oltre, poichè una
 variazione minima, soprattutto nell'ambito del trading o della compravendita
 di titoli e azioni, potrebbe comportare una perdita di denaro anche piuttosto
 considerevole.
 
\end_layout

\begin_layout Standard
Tutti questi movimenti e transazioni devono naturalmente essere memorizzati
 da qualche parte, ed è qui che entra in gioco quella che è universalmente
 riconosciuta come la parte più iportante di ogni sistema software: il database.
 Sembra incredibile, ma al giorno d'oggi non tutti coloro che lavorano nel
 campo dell'informatica e dei software si rendono conto dell'importanza
 che ha una adeguata pianificazione dei database sotto l'aspetto temporale,
 anzi: molto spesso tale aspetto viene dimenticato, volutamente o meno,
 proprio perchè è considerato poco importante, e di conseguenza ha una priorità
 piuttosto bassa.
 
\end_layout

\begin_layout Standard
Generalmente, tutte queste vicissitudini riguardo l'organizzazione della
 struttura dati seguono un andamento abbastanza simile: all'inizio lo sviluppo
 del sistema procede senza particolari problemi, fino al punto in cui, a
 causa del rapido incremento del numero dei record (e molto spesso delle
 dimensioni del sistema software) è necessario modificare la struttura del
 database, per distinguere ad esempio tra record validi allo stato attuale,
 record non più validi e record con validità futura.
 Solitamente, quando si arriva a questo punto, è necessario mettere mano
 anche al codice del software, causando disagi considerevoli in materia
 di costi e di tempo impiegato per la risoluzione.
 Se poi l'azienda produttrice del software ha dimensioni molto grandi, magari
 con gruppi indipendenti che lavorano su parti diverse del prodotto, è facile
 immaginare come un intoppo apparentemente di rapida soluzione si possa
 trasformare in un problema di dimensioni enormi, così come i relativi oneri.
 È necessario quindi adottare fin da subito un approccio "temporale" nella
 creazione dei database, in modo da dedicare magari qualche ora in più nella
 redazione dello schema della base di dati, ma evitando disagi ben più consisten
ti nel futuro, sia a medio che lungo termine.
\end_layout

\begin_layout Part
Database temporali: Panoramica
\end_layout

\begin_layout Section
Storia e stato dell'arte
\end_layout

\begin_layout Standard
La storia dei database temporali inizia con un paradosso: i database convenziona
li, che memorizzano solo stringhe e numeri senza considerare il tempo, non
 sono completamente realistici.
 Infatti, i database di questo tipo rappresentano uno stato del sistema,
 ma non si sa precisamente quale.
 Le modifiche vengono attuate in un modo che si può dire distruttivo: i
 dati che hanno bisogno di un aggiornamento vengono semplicemente modificati,
 mentre quelli non più validi vengono cancellati, rendendo impossibile determina
re lo storico del database stesso.
 Da qui, sono nate molteplici necessità, come quella di tracciare un determinato
 evento dall'inizio alla fine, oppure similarmente tracciare oggetti e le
 relazioni che li accomunano.
 Proprio questi problemi hanno spinto Jacob Ben-Zvi (1982) e James Clifford
 (1983), indipendentemente l'uno dall'altro, a teorizzare una soluzione
 che potesse risolverli.
 Ben-Zvi, soprattutto, ideò per primo i concetti di tempo effettivo e di
 tempo di registrazione (che verranno successivamente rinominati in tempo
 di validità e tempo di transazione).
 Qualche anno più tardi Richard T.
 Snodgrass, professore universitario considerato oggi tra i più importanti
 esponenti dei database temporali, introdusse la sua versiona temporale
 del linguaggio QUEL (un precursore dell'attuale SQL), chiamata TQUEL.
 All'inizio degli anni '90, quando SQL ha preso piede in tutti i maggiori
 DBMS, soppiantando QUEL, Snodgrass ha continuato la sua opera pionieristica
 nel settore temporale dei database, creando prima una estensione di SQL-92
 stesso, nota come TSQL (da non confondere con T-SQL, o Transact-SQL, una
 estensione proprietaria di SQL di Microsoft), e successivamente ha posto
 le basi per la nuova versione dello standard, nota come SQL3, che ha incluso
 direttamente nello standard i primi concetti temporali.
 Nell'ultima versione di SQL, SQL-2011, si è chiuso il cerchio, completando
 il processo di implementazione delle ultime caratteristiche temporali mancanti.
\end_layout

\begin_layout Section
Gli elementi basilari
\end_layout

\begin_layout Standard
È prassi comune credere che un database temporale sia semplicemente "un
 database normale, con l'aggiunta di campi di data".
 In realtà, un database temporale è qualcosa di più di un semplice campo
 aggiuntivo, e lo dimostra il fatto che si basa su tre aspetti fondamentali,
 che nei database "classici" non sono presenti:
\end_layout

\begin_layout Itemize

\shape italic
Dati temporali
\end_layout

\begin_layout Itemize

\shape italic
Tempi
\end_layout

\begin_layout Itemize

\shape italic
Tipi di interrogazioni
\end_layout

\begin_layout Standard
Ognuna di queste categorie si divide in ulteriori tre elementi, per un totale
 di nove entità che sono fondamentali per lo studio dei database temporali.
\end_layout

\begin_layout Subsection
I dati temporali
\end_layout

\begin_layout Standard
I dati temporali rappresentano delle "quantità" di tempo, più o meno precise
 a seconda del tipo, che hanno un significato molto vicino a quello utilizzato
 in ambito comune.
 Nello specifico, si dividono in:
\end_layout

\begin_layout Itemize

\shape italic
Istanti
\shape default
, che come nel linguaggio comune rappresentano un momento preciso del tempo
 (come ad esempio il 19 luglio 2014, 22.36.20, oppure il largamente utilizzato
 
\family typewriter
NOW()
\family default
);
\end_layout

\begin_layout Itemize

\shape italic
Intervalli
\shape default
, anche questi vicini all'interpretazione comune, che non sono altro che
 una durata fissa (ad esempio, 3 mesi oppure 5 giorni);
\end_layout

\begin_layout Itemize

\shape italic
Periodi, 
\shape default
simili agli intervalli, con la caratteristica di avere un inizio e una fine
 ben precisi (ad esempio, dal 15 luglio 2014 al 30 settembre 2014);
\end_layout

\begin_layout Subsubsection
Istanti
\end_layout

\begin_layout Standard
Gli istanti sono la parte fondamentale e imprescindibile di tutta la teoria
 sui database temporali.
 Facendo un paragone con la geometria, possono essere paragonati ai punti,
 anch'essi considerati l'entità minima e basilare di questa branca della
 matematica: partendo da essi si possono creare oggetti più complessi, come
 linee e poligoni.
 Gli istanti, similarmente, sono solamente un punto specifico del tempo,
 che accade una volta e poi rimane per sempre nel futuro, e sulla base di
 essi si può costruire qualsiasi tipo di relazione temporale: un intervallo
 di un mese avrà sicuramente un istante di inizio e uno di fine, anche se
 possono non essere noti a priori; periodi di tempo (ad esempio dal 22 luglio
 2014 alle 19:00:00 fino al 23 luglio 2014 alle 08:00:00) sono già intrinsecamen
te delimitati da istanti.
 Hanno un ruolo talmente importante in ambito temporale, al punto che fino
 a pochi anni fa erano l'unico modo per definire intervalli e periodi di
 tempo.
 Al giorno d'oggi la scelta si è ampliata (nelle recenti versioni di SQL
 sono presenti costrutti avanzati che permettono la definizione precisa
 di periodi e intervalli così come sono teorizzati), ma gli istanti rimangono
 comunque la scelta di espressione temporale più gettonata e di più semplice
 applicazione.
\end_layout

\begin_layout Standard
Uno dei motivi del loro successo è la versatilità: in SQL, fin dalle prime
 versioni, sono stati introdotti ben tre tipi di rappresentazione, con accuratez
za differente tra loro, e di conseguenza con diverse applicazioni: 
\family typewriter
TIME
\family default
, 
\family typewriter
DATE
\family default
 e 
\family typewriter
TIMESTAMP
\family default
.
 
\end_layout

\begin_layout Itemize

\family typewriter
TIME
\family default
 serve per salvare ore, minuti, secondi e frazioni di secondo (con formato
 
\family typewriter
hh:mm:ss.000
\family default
, nel caso di precisione a 3 cifre decimali), e supporta le variazioni di
 fuso orario.
\end_layout

\begin_layout Itemize

\family typewriter
DATE
\family default
 serve per salvare giorno, mese e anno di una particolare data (con formato
 
\family typewriter
YYYY-MM-DD
\family default
).
\end_layout

\begin_layout Itemize

\family typewriter
TIMESTAMP
\family default
 è immaginabile come una fusione tra 
\family typewriter
TIME
\family default
 e 
\family typewriter
DATE
\family default
, ed è la rappresentazione più accurata in assoluto: 
\family typewriter
TIME
\family default
 ha una precisione elevata, ma può considerarsi affidabile solo con dati
 contestualizzati in un singolo giorno, mentre 
\family typewriter
DATE
\family default
 può essere usato per dati molto estesi nel tempo, ma ha una precisione
 molto limitata, perchè si sa il giorno a cui il dato si riferisce, ma nulla
 più.
 
\family typewriter
TIMESTAMP
\family default
, invece, ha il supporto per le date, per le ore e per i fusi orari (con
 formato 
\family typewriter
YYYY-MM-DD hh:mm:ss.000+01:00
\family default
, con precisione a 3 posizioni decimali e fuso orario a +01:00 GMT, quello
 italiano), e la sua precisione arriva oltre il decimo posto decimale (quella
 effettiva, però, dipende dalle implementazioni), rendendolo l'alternativa
 migliore per il salvataggio di istanti.
\end_layout

\begin_layout Standard
L'utilizzo di questi metodi di rappresentazione, nella stragrande maggioranza
 delle applicazioni, è più che sufficiente per rappresentare gli istanti.
 Formalmente parlando, però, i metodi appena descritti non salvano istanti,
 nonostante la loro precisione arrivi ad essere elevatissima: come precedentemen
te specificato, gli istanti non sono altro che un momento preciso del tempo,
 definizione che cozza con quella di precisione, che il vocabolario Treccani
 
\begin_inset CommandInset citation
LatexCommand cite
key "7"

\end_inset

 spiega come
\end_layout

\begin_layout Quotation

\shape italic
"il grado più o meno alto con cui, nell’eseguire l’esperienza o la lavorazione,
 ci si avvicina alle condizioni prefissate; p.
 di una misura, genericamente, la maggiore o minore approssimazione della
 misura al valore effettivo della grandezza in esame, e specificamente l’errore
 relativo della misura"
\end_layout

\begin_layout Standard
Supponendo come grandezza in esame l'istante nel senso formale (e filosofico)
 del termine, ne deriva che non sarà mai possibile, almeno con gli strumenti
 odierni, determinare con esattezza l'entità di un istante, e sarà perciò
 necessario accontentarsi di una, perquanto precisa, approssimazione.
\end_layout

\begin_layout Subsubsection
Intervalli
\end_layout

\begin_layout Standard
A differenza degli istanti, che rappresentano un momento preciso nel tempo,
 gli intervalli sono dei valori che rappresentano una quantità di tempo
 definita.
 Hanno la particolarità di essere relativi, ciò significa che identificano
 una certa quantità di tempo, che però a meno di ulteriori specificazioni
 rimane variabile in inizio o fine.
 È un efficace esempio la semplice frase "Ho vissuto a Trento per tre anni",
 in cui si sa con certezza per quanto la persona che parla ha vissuto a
 Trento, e che la stessa persona, in questo momento, vive altrove, ma non
 si sa di preciso quando è iniziato il periodo di soggiorno a Trento e quando
 è finito.
 Per questo gli intervalli sono utilizzati più spesso nella lingua parlata,
 mentre nell'ambito dei database sono poco utilizzati, se non in combinazione
 con un istante.
\end_layout

\begin_layout Standard
In SQL, gli intervalli sono dei tipi di dato a tutti gli effetti, e si dividono
 in due tipi: intervalli da anno a mese (
\family typewriter
YEAR TO MONTH
\family default
) e da giorno a ora (
\family typewriter
DAY TO TIME
\family default
).
 Questa terminologia significa che, rispettivamente, gli intervalli possono
 essere intesi come una quantità di anni e mesi, oppure come una quantità
 di giorni e di tempo.
 La precisione di queste due varianti è sensibilmente diversa: in YEAR TO
 MONTH è possibile esprimere intervalli solo in termini di anni e mesi,
 mentre in DAY TO TIME è possibile esprimere intervalli molto più piccoli,
 ma anche molto più precisi, in quanto è possibile specificare valori di
 giorni, ore, minuti, secondi e frazioni di secondo.
 Non è obbligatorio specificare gli ordini di grandezza più grandi per poter
 utilizzare quelli più piccoli: considerando YEAR TO MONTH è possibile utilizzar
e indifferentemente, per esprimere un intervallo di un anno:
\end_layout

\begin_layout Itemize
INTERVAL '1' YEAR
\end_layout

\begin_layout Itemize
INTERVAL '1-0' YEAR TO MONTH
\end_layout

\begin_layout Itemize
INTERVAL '0-12' YEAR TO MONTH
\end_layout

\begin_layout Itemize
INTERVAL '12' MONTH
\end_layout

\begin_deeper
\begin_layout Standard
Per DAY TO TIME, il concetto è molto simile, è solo necessario sostituire
 a TIME la quantità di tempo fino a cui si vuole arrivare, quindi HOUR,
 MINUTE o SECOND.
 L'unico limite riguarda la quantità di giorni rappresentabili, fissata
 a 9999
\end_layout

\end_deeper
\begin_layout Subsubsection
Periodi
\end_layout

\begin_layout Subsection
I tempi
\end_layout

\begin_layout Standard
La categoria dei tempi, invece, comprende tre tipi di tempo che possono
 essere presenti in una tabella, e che hanno funzioni diverse a seconda
 del loro gruppo di appartenenza.
 Nello specifico si parla di:
\end_layout

\begin_layout Itemize

\shape italic
User-defined time
\shape default
, dove il tempo è inserito dall'utente e non ha alcun significato ai fini
 della validità dei dati;
\end_layout

\begin_layout Itemize

\shape italic
Tempo di validità
\shape default
, oppure definibile come periodo (avendo esso sia una data precisa di inizio
 che una data precisa di fine) all'interno di cui il dato è considerabile
 come valido.
\end_layout

\begin_layout Itemize

\shape italic
Tempo di transazione
\shape default
, cioè, in genere, l'istante nel quale il record relativo è stato inserito
 all'interno del database.
\end_layout

\begin_layout Standard
Questi concetti hanno senso e utilità pratica solo se sono considerati nel
 contesto di una tabella, che ne può contenere solo uno, due, oppure tutti
 e tre, con varie combinazioni adatte a diverse implementazioni, che saranno
 esaminate nella prossima sezione.
\end_layout

\begin_layout Subsection
Le interrogazioni
\end_layout

\begin_layout Standard
Per quanto riguarda i tipi di interrogazioni, infine, anche qui sono presenti
 tre diversi rami, riassumibili nel seguente modo:
\end_layout

\begin_layout Itemize

\shape italic
Corrente
\shape default
, cioè relativo all'istante attuale;
\end_layout

\begin_layout Itemize

\shape italic
Sequenziale
\shape default
, cioè relativo ad ogni istante di tempo
\end_layout

\begin_layout Itemize

\shape italic
Non-Sequenziale
\shape default
, cioè che esula dal tempo, ignorandolo completamente.
\end_layout

\begin_layout Subsubsection
Interrogazioni non temporali
\end_layout

\begin_layout Subsubsection
Interrogazioni correnti
\end_layout

\begin_layout Subsubsection
Interrogazioni sequenziali
\end_layout

\begin_layout Subsubsection
Interrogazioni non sequenziali
\end_layout

\begin_layout Subsection
Implementazione in SQL standard
\end_layout

\begin_layout Standard
Degli aspetti evidenziati, definire cosa è implementato in SQL, e soprattutto
 in che modo, non è cosa banale, soprattutto perchè gli applicativi che
 si basano interamente su SQL standard sono diventati ormai molto pochi.
 I maggiori DBMS (PostgreSQL, SQL Server, e Oracle su tutti) hanno da tempo
 optato per lo sviluppo di una versione estesa e personalizzata di SQL,
 in modo da non essere legati alle release, dilazionate negli anni, dello
 standard ufficiale, e per avere più libertà nell'inserire feature specifiche
 dei propri prodotti.
 Se per SQL intendiamo la versione standard, allora una copertura delle
 funzionalità temporali, seppur blanda e per certi aspetti lacunosa, si
 ha fin dalla versione del 1992, che poi si è evoluta nel corso degli anni
 fino ad arrivare all'ultima versione, nel 2011.
 Nello specifico, nel 1992 sono stati introdotti i tipi basilari per lo
 sviluppo delle carateristiche sopra elencate, come 
\family typewriter
DATE
\family default
, 
\family typewriter
TIME
\family default
, 
\family typewriter
TIMESTAMP
\family default
 e 
\family typewriter
INTERVAL
\family default
 
\begin_inset CommandInset citation
LatexCommand cite
key "2"

\end_inset

.
 Nelle ultime release, soprattutto nella più recente, è stato aggiunto il
 costrutto 
\family typewriter
PERIOD
\family default
 (anche se in una accezione particolare, come si vedrà in seguito), e sono
 stati apportati notevoli miglioramenti all'intera gestione delle funzionalità
 temporali.
 Dal punto di vista dello standard, si può dire che i database temporali
 sono giunti a compimento solo nel 2011 
\begin_inset CommandInset citation
LatexCommand cite
key "3"

\end_inset

, dopo una fase di teorizzazione che ha visto i suoi inizi nel 1982, all'interno
 di programmi proprietari, e quindi durata quasi 30 anni.
\end_layout

\begin_layout Section
I costrutti fondamentali
\end_layout

\begin_layout Subsection
Tabelle
\end_layout

\begin_layout Standard
Le tabelle temporali non hanno necessariamente una struttura ben definita,
 infatti possono essere costruite in vari modi, utilizzando varie combinazioni
 dei tempi e dei tipi di dato temporale precedentemente trattati.
 Escludendo le tabelle contenenti solo categorie e valori di tempo definiti
 dall'utente, che non avendo significato ai fini della validità dei dati
 possono essere considerate come un qualsiasi altro campo, esistono anche
 qui tre tipi di strutture dati:
\end_layout

\begin_layout Itemize

\shape italic
Tabelle con tempo di validità
\shape default
, che salvano i dati sulla base del periodo o dell'intervallo di tempo in
 cui gli stessi sono validi;
\end_layout

\begin_layout Itemize

\shape italic
Tabelle con tempo di transazione
\shape default
, che salvano i dati sulla base dell'istante dell'inserimento, e rendono
 quindi possibile l'interrogazione dei dati per capire quando gli stessi
 si consideravano validi
\end_layout

\begin_layout Itemize

\shape italic
Tabelle bitemporali
\shape default
, che sono una variante di struttura dati che prevede la presenza sia del
 tempo di validità, che del tempo di transazione, fornendo quindi la maggiore
 completezza possibile per lo studio della validità dei dati contenuta in
 essi.
\end_layout

\begin_layout Standard
Di seguito sono presenti alcuni semplici esempi che sono utili per capire
 meglio come le varie tabelle possono essere utili ai fini della loro interrogaz
ione.
 Quando sarà necessario parlare di codice SQL, saranno presentate interrogazioni
 svolte con il codice della versione del 1992, a cui sarà affiancato, quando
 opportuno, quello della versione 2011, in modo da poter apprezzare le differenz
e e i miglioramenti nel corso degli anni.
\end_layout

\begin_layout Subsubsection
Tabelle con tempo di validità
\end_layout

\begin_layout Standard
Le tabelle con tempo di validità, come accennato sopra, sono delle particolari
 tabelle che presentano, oltre ai classici dati da memorizzare, anche una
 coppia di campi che hanno il compito di memorizzare l'intervallo in cui
 tali dati sono, o erano, validi.
 Il modo per utilizzare questi due campi è molteplice: si può salvare l'istante
 iniziale di validità e l'istante finale, oppure l'istante iniziale e l'interval
lo di validità, o ancora l'intervallo di validità e l'istante finale.
 Non esiste un modo migliore, poichè tutti e tre i criteri di rappresentazione
 conducono allo stesso risultato.
 
\end_layout

\begin_layout Standard
Un esempio chiaro di come possono essere utilizzate le tabelle con tempo
 di validità può essere trovato nel salvataggio della residenza di un soggetto.
 Per semplicità, supponiamo che tutte le variazioni del luogo di residenza,
 invece che ai Comuni, siano in capo a un ente superiore, che si occupa
 anche di mantenere il database che le contiene.
 Inoltre, limitiamo la tabella a due sole persone.
\end_layout

\begin_layout Standard
Senza tempo di validità, la tabella 
\family typewriter
RESIDENZA 
\family default
si presenta come segue: 
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 senza tempo di validità
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
La tabella, a prima vista, potrebbe dirsi corretta, e in effetti lo è, ma
 solo se le persone listate non hanno mai effettuato un cambio di residenza.
 Nel caso in cui Giorgio Bianchi si spostasse a Trento, avremmo:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 senza tempo di validità: aggiornamento
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Tutto ciò fa venir meno la correttezza della tabella, perchè se interrogassimo
 il database, risulterebbe che Giorgio Bianchi è sempre stato residente
 a Trento, e si perderebbero le tracce della sua precedente residenza a
 Lavis.
\end_layout

\begin_layout Standard
Per risolvere questo problema, è sufficiente apporre alla tabella due nuovi
 campi, chiamati 
\family typewriter
Val_Start 
\family default
e
\family typewriter
 Val_End
\family default
, che come è facilmente intuibile si occupano di mantenere il tempo di validità
 del record al quale si riferiscono.
 In termini pratici, si avrebbe una tabella siffatta:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.05.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
06.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 completa di tempo di validità
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
dove la data 
\family typewriter
31.12.9999
\family default
 è una data fittizia, che viene spesso tradotta con la parola chiave 
\family typewriter
FOREVER
\family default
, che sta semplicemente a significare che il record in oggetto è valido,
 ovviamente non si sa fino a quando, e si assume come valido all'infinito
 (o più realisticamente, fino a quando non intervengono nuove variazioni).
\end_layout

\begin_layout Standard
Infine, la variazione di residenza viene tradotta come segue:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.05.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
06.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 completa di tempo di validità: aggiornamento
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Come è facile notare, è stata modificata la data di fine periodo per quanto
 riguarda la residenza a Lavis di Giorgio Bianchi, e nello stesso istante
 in cui finisce il primo periodo inizia il secondo, identificato con un
 nuovo record.
 In questo modo è possibile risalire a tutte le variazioni di residenza
 di un soggetto anche a distanza di anni, garantendo così l'integrità dei
 dati.
 A fronte di queso vantaggio, emerge però un problema: la chiave primaria,
 che prima era impostata solo sul campo 
\family typewriter
ID_Persona
\family default
, perde il suo significato perchè sono presenti due record con la stessa
 chiave.
 Chiaramente non si tratta di un errore, poichè è necessario specificare
 che si tratta dello stesso soggetto, e non di un omonimo che è nato il
 20 luglio 2014.
 È necessario un approccio diverso, più complesso, che sarà spiegato in
 seguito.
\end_layout

\begin_layout Subsubsection
Tabelle con tempo di transazione
\end_layout

\begin_layout Standard
Le tabelle con tempo di transazione, di primo acchito, sembrano molto simili
 alle tabelle con tempo di validità: entrambe hanno due campi aggiuntivi
 a quelli dei dati della rispettiva tabella, in entrambi i casi i campi
 si riferiscono a un periodo di tempo (rappresentato con le stesse opzioni:
 istante di inizio e di fine, o istante di inizio e intervallo, o ancora
 intervallo e istante di fine), e in entrambi i casi servono per garantire
 una migliore gestione dei dati stessi.
\end_layout

\begin_layout Standard
La principale differenza, però, va oltre tutto questo.
 Infatti è il significato che hanno i due campi aggiuntivi ad essere profondamen
te diverso: nelle tabelle con tempo di validità è possibile ripercorrere
 la storia della realtà, guardando le date di validità dei vari record (si
 dice che il record è valido in base al periodo di validità); con le tabelle
 con tempo di transazione, invece, si riesce a ripercorrere una storia diversa,
 riguardante lo stato della tabella contenente i record (si dice che il
 record è 
\shape italic
ritenuto
\shape default
 valido in base al periodo di transazione).
 Infatti, se si vuole trovare come era composta una tabella con tempo di
 validità, ponendo una certa data, si trovano i record che, al tempo richiesto,
 risultavano validi oppure passati.
 Cercando la composizione di una tabella con tempo di transazione, invece,
 si trova una "fotografia" dello stato della tabella, comprensiva di tutti
 i record che a quella data erano 
\shape italic
ritenuti
\shape default
 validi.
 La distinzione tra "valido" e "ritenuto valido" sembra molto labile, ma
 racchiude invece tutta la differenza delle due tabelle.
 Supponiamo che un record, presente sia in una tabella con tempo di validità
 che in una tabella con tempo di transazione, sia in qualche modo errato:
 nella tabella con tempo di validità è ammessa la modifica del dato, e quindi
 dopo la modifica, se si interroga la tabella è come se il dato corretto
 sia sempre stato inserito, perdendo quindi ogni traccia a riguardo del
 dato errato.
 Nella tabella con tempo di transazione, invece, questo non è possibile:
 siccome la tabella non ammette la cancellazione o la modifica di record,
 che comprometterebbe l'integrità e la recuperabilità dei dati, è necessario
 inserire una nuova riga nella tabella, che quindi mantiene l'errore nell'interv
allo di tempo che va dall'inserimento alla sua scoperta.
 Per questo si parla di valori ritenuti validi: se si cerca di ristabilire
 una situazione del database con data antecedente alla scoperta dell'errore,
 la tabella con tempi di validità presenterà il valore corretto, poichè
 quello errato è stato a suo tempo sovrascritto; quella con tempo di transazione
, invece, presenterà un valore diverso, perchè era quello 
\shape italic
ritenuto
\shape default
 giusto prima della scoperta dell'errore.
\end_layout

\begin_layout Standard
In questo caso, può essere d'aiuto un esempio: riprendendo il caso della
 tabella delle residenze, supponiamo che lo stesso sistema abbia una tabella
 diversa, chiamata 
\family typewriter
RICH_RESIDENZA
\family default
 in cui sono salvate le date in cui i vari soggetti presentano la richiesta
 di concessione di residenza al Comune in cui si sono trasferiti.
 La tabella senza tempo di transazione è in tutto e per tutto simile alla
 tabella 1, per cui si sa che in un certo momento entrambe le persone listate
 hanno presentato richiesta nel loro rispettivo Comune, ma non si sa null'altro:
 potrebbero aver presentato richiesta nello stesso momento, oppure addirittura
 a distanza di anni.
 Per ovviare a questo problema, si creano due campi aggiuntivi, denominati
 
\family typewriter
Tran_Start 
\family default
e
\family typewriter
 Tran_End
\family default
, che hanno il compito di registrare il giorno in cui la richiesta di residenza
 è stata presentata al Comune.
 Supponiamo per semplicità che la richiesta sia stata presentata qualche
 giorno prima dell'effettivo trasferimento, ma nulla vieta che la data di
 inserimento posa essere successiva a quella del trasloco: un esempio è
 dato dalla nascita del figlio di un residente, che acquista la residenza
 dal giorno della nascita ma viene registrato, generalmente, solo qualche
 giorno più tardi.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RICH_RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
28.04.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RICH_RESIDENZA
\family default
 completa di tempo di transazione
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Come si può vedere, nulla è diverso rispetto alla tabella 
\family typewriter
RESIDENZA
\family default
, tuttavia il significato di quelle date è radicalmente diverso: queste
 date non rappresentano la realtà, ma rappresentano il momento in cui il
 database è stato modificato.
 La distinzione è importante: mentre interrogando la tabella 
\family typewriter
RESIDENZA
\family default
 con una precisa data posso ottenere una tabella contenente il numero delle
 persone effettivamente residenti, interrogando la tabella 
\family typewriter
RICH_RESIDENZA
\family default
 posso risalire alle ultime variazioni della tabella stessa.
 Questo si rivela molto utile nel caso, in qualche passaggio, vengano inserite
 delle inconsistenze o degli errori nei dati della tabella: in questo modo
 è possibile ripristinare senza troppa fatica lo stato del database in una
 data precedente, e procedere con le dovute correzioni.
 
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RICH_RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
28.04.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
17.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
17.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RICH_RESIDENZA
\family default
 completa di tempo di transazione: aggiornamento
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Ora, supponiamo che in data 25 luglio 2014, all'ufficio preposto venga notato
 un grossolano errore: nel database Giorgio Bianchi è listato come attuale
 residente a Trento, ma in realtà ha presentato richiesta per diventare
 residente di Bolzano! Subito l'addetto modifica il database, che quindi,
 per quanto riguarda la tabella 
\family typewriter
RESIDENZA
\family default
, avrà il seguente aspetto:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.05.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
06.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Bolzano
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 completa di tempo di validità: correzione errore
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
La modifica fatta consiste semplicemente nel cambiare la città di residenza
 da quella errata a quella corretta.
 Nella tabella 
\family typewriter
RICH_RESIDENZA
\family default
, però, il discorso è diverso: non essendo possibile cancellare o modificare
 righe, è necessario inserirne un altra e agire opportunamente sul tempo
 di transazione, come segue:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RICH_RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
28.04.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
17.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
17.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
25.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Bolzano
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
25.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RICH_RESIDENZA
\family default
 completa di tempo di transazione: aggiornamento
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Qui, invece, la differenza è molto più evidente: è stato inserito un nuovo
 record, con la città corretta, ponendo come 
\family typewriter
Tran_Start
\family default
 la data in cui è stato corretto l'errore, e come 
\family typewriter
Tran_End
\family default
 la data che rappresenta 
\family typewriter
FOREVER
\family default
.
 
\end_layout

\begin_layout Standard
Cosa succederebbe se, in un futuro, venisse richiesto di trovare le persone
 residenti alla data del 20 luglio 2014?
\end_layout

\begin_layout Standard
Nella tabella RESIDENZA, eseguendo l'opportuna query, si ricaverebbe che
 Giorgio Bianchi è residente a Bolzano dal 17 luglio 2014, come in effetti
 è in realtà.
 
\end_layout

\begin_layout Standard
Nella tabella RICH_RESIDENZA, invece, Giorgio Bianchi risulta residente
 a Trento.
 Questo "finto" errore è dato proprio dalla necessità di poter ricostruire
 il database ogni volta che sia opportuno, ripristinando con esso anche
 gli errori che a quella data erano stati involontariamente commessi ma
 non ancora scoperti.
 Per questo si dice che la tabella con tempi di validità rappresenta la
 realtà: perchè anche se gli errori vengono scoperti dopo l'inserimento,
 è sempre possibile ripristinare la situazione corretta, e proseguire come
 se l'errore non fosse mai avvenuto.
\end_layout

\begin_layout Standard
È molto importante sottolineare come le tabelle con tempo di transazione
 possano essere utilizzate solo come strumento di backup: infatti, non è
 possibile apportare modifiche ad essa senza inserire un nuovo record con
 tempo di inizio e fine rispettivamente di 
\family typewriter
NOW()
\family default
 e 
\family typewriter
FOREVER
\family default
, anche perchè se fosse possibile modificare una riga senza inserirne una
 che attesta la modifica farebbe venir meno la possibilità di ricostruire
 il database di ogni momento del passato.
 Allo stesso modo, anche la cancellazione delle righe è logica e non fisica:
 mentre in una tabella con tempi di validità è sempre possibile correggere
 un valore errato, che si traduce nella formale eliminazione di una riga
 e nell'inserimento dell'altra (rendendo la prima irrecuperabile), nella
 tabella con tempi di transazione questo non è possibile.
\end_layout

\begin_layout Subsubsection
Tabelle bitemporali
\end_layout

\begin_layout Standard
Le tabelle bitemporali, come si può facilmente intuire dal nome, presentano
 entrambe le caratteristiche sopra elencate: hanno perciò sia una coppia
 di valori per identificare un periodo di validità, sia una coppia di valori
 per identificare il tempo di transazione del record stesso.
 Una applicazione per questo tipo di tabelle sembra difficile e di rara
 applicazione, ma per fare un semplice esempio basta pensare all'ufficio
 personale di un'azienda, che riceve comunicazione di una promozione di
 un dipendente della ditta stessa.
 Supponiamo che la comunicazione della promozione avvenga il 15 luglio,
 ma l'effettivo cambio di ruolo avvenga, per motivi fiscali, solo all'inizio
 del mese successivo, e quindi agosto.
 Nel caso di una tabella senza nessun tipo di tempo, si avrebbe la seguente
 situazione:
\end_layout

\begin_layout Standard
Anche qui, la tabella è corretta solo se i due dipendenti hanno avuto lo
 stesso grado fin dalla loro assunzione in azienda: diversamente, si avrebbe
 una interpretazione sbagliata perchè sembra che i dipendenti siano sempre
 stati nel grado che hanno in questo momento.
 In ogni caso, comunque, non è possibile ripercorrere la storia aziendale
 dei dipendenti, e questo, soprattutto in caso di controlli e accertamenti
 fiscali, potrebbe costituire un problema.
\end_layout

\begin_layout Standard
Per creare una tabella bitemporale, procediamo per gradi: prima si aggiungono
 due campi per il tempo di validità, chiamati 
\family typewriter
Val_Start 
\family default
e
\family typewriter
 Val_End
\family default
:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
PERSONALE
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Dip
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Dipendente
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Grado
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luca Verdi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.07.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.02.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
PERSONALE
\family default
 completa di tempo di validità
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
In questo modo, si ha la validità del record e si riesce a risalire, in
 caso di necessità, alle evoluzioni del grado del singolo dipendente.
 Ma le variazioni non sono finite qui: per ottenere una tabella bitemporale,
 si deve aggiungere la seconda coppia di campi, denominati 
\family typewriter
Tran_Start 
\family default
e
\family typewriter
 Tran_End
\family default
, che rappresentano il tempo di transazione, cioè il tempo in cui il record
 è stato aggiunto al database.
 Essendo una tabella dell'ufficio personale, si può facilmente supporre
 che il dipendente sia stato aggiunto non appena si è avuta la conferma
 del buon esito del colloquio, supponiamo 20 giorni prima della data del
 primo giorno di lavoro:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="7">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
PERSONALE
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Dip
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Dipendente
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Grado
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luca Verdi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.07.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
10.06.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.02.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
11.01.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
PERSONALE
\family default
 con tempo di validità e tempo di transazione 
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Ora si ha correttezza formale anche nel tempo di transazione.
 In questo modo, se per caso si avesse bisogno di ottenere la situazione
 dell'azienda al 20 gennaio 2009, apparirebbe come effettivamente assunto
 solo Luca Verdi, poichè la data ricade nel tempo di validità.
 Paolo Rossi, invece, apparirebbe come inserito, ma non assunto, poichè
 il suo tempo di validità è successivo a quella data, ma il tempo di transazione
 è antecedente ad essa.
 Se questa tabella fosse stata semplicemente una tabella con tempo di validità,
 la stessa query avrebbe permesso di risalie alla posizione di Luca Verdi,
 ma non avrebbe permesso di trovare la posizione di Paolo Rossi, poichè
 l'unico periodo disponibile, quello di validità, ricade oltre la data cercata.
\end_layout

\begin_layout Standard
Per finire, manca solo un passaggio, cioè la promozione di Paolo Rossi:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="7">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
PERSONALE
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Dip
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Dipendente
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Grado
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luca Verdi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.07.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
10.06.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.02.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.08.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
11.01.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
15.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.08.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
15.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
PERSONALE
\family default
 con tempo di validità e tempo di transazione: aggiornamento
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Ora la transizione da tabella non temporale a tabella bitemporale è completa:
 creare e mantenere una tabella del genere è molto più impegnativo rispetto
 a una tabella convenzionale, ma a fronte di una maggiore complessità ci
 sono innegabili vantaggi: è possibile non solo risalire allo stato della
 realtà in qualsiasi data si abbia bisogno, ma è anche possibile, in caso
 di necessità, anche riportare il database alla situazione che aveva in
 una determinata data, poichè esaminando i periodi di transazione è possibile
 capire se un determinato record era già stato inserito o meno, senza dubbio
 alcuno.
\end_layout

\begin_layout Standard
Oltre al caso dell'ufficio del personale, ci sono molti altri contesti in
 cui il tempo di transazione può rivelarsi determinante: basti pensare alle
 pratiche da sbrigare per ottenere un certificato, oppure un rinnovo della
 patente: senza tempo di transazione non si saprebbe con precisione quando
 la documentazione necessaria è stata consegnata, e ciò comporterebbe il
 rischio di non ottenere ciò che si è richiesto.
\end_layout

\begin_layout Standard
Anche qui, è bene notare che il sistema di aggiornamento o di cancellazione
 segue la stessa logica delle tabelle di 
\end_layout

\begin_layout Part
Database temporali: Applicazioni
\end_layout

\begin_layout Section
Creazione di tabelle
\end_layout

\begin_layout Section
Modifica di tabelle
\end_layout

\begin_layout Subsection
Insert
\end_layout

\begin_layout Subsection
Update
\end_layout

\begin_layout Subsection
Delete
\end_layout

\begin_layout Part
Confronti
\end_layout

\begin_layout Section
SQL-2011
\end_layout

\begin_layout Section
NoSQL
\end_layout

\begin_layout Section
Il caso concreto: Fondazione Bruno Kessler
\end_layout

\begin_layout Part
Conclusioni
\end_layout

\begin_layout Part
Appendici
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "1"
key "1"

\end_inset

NIST's Second 'Quantum Logic Clock' Based on Aluminum Ion is Now World's
 Most Precise Clock: http://www.nist.gov/pml/div688/logicclock_020410.cfm
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "2"
key "2"

\end_inset

SQL Key Words: http://www.postgresql.org/docs/9.2/static/sql-keywords-appendix.html
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "3"
key "3"

\end_inset

Temporal features in SQL-2011: http://www.sigmod.org/publications/sigmod-record/12
09/pdfs/07.industry.kulkarni.pdf
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "4"
key "4"

\end_inset

http://mate.dm.uba.ar/~tera2005/ConfVaisman.pdf
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "5"
key "5"

\end_inset

http://www.cs.arizona.edu/~rts/pubs/TODS87.pdf
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "6"
key "6"

\end_inset

http://www.cs.arizona.edu/~rts/initiatives/tsql2/tsqldesignapproach.pdf
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "7"
key "7"

\end_inset

http://www.treccani.it/vocabolario/precisione/
\end_layout

\end_body
\end_document

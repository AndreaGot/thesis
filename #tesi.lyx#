#LyX 2.1 created this file. For more info see http://www.lyx.org/
\lyxformat 474
\begin_document
\begin_header
\textclass article
\begin_preamble
\usepackage{array}
\end_preamble
\use_default_options true
\maintain_unincluded_children false
\language italian
\language_package default
\inputencoding auto
\fontencoding global
\font_roman lmodern
\font_sans default
\font_typewriter default
\font_math auto
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\float_placement H
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry false
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 0
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 0
\use_package mhchem 1
\use_package stackrel 0
\use_package stmaryrd 0
\use_package undertilde 0
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 0
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language french
\papercolumns 1
\papersides 1
\paperpagestyle default
\listings_params "basicstyle={\ttfamily}"
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vfill
\end_layout

\begin_layout Plain Layout


\backslash
begin{center}
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\size largest
UNIVERSITÀ DEGLI STUDI DI TRENTO
\end_layout

\begin_layout Standard

\size larger
Dipartimento di Ingegneria e Scienza dell’Informazione
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace{70pt}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename img/logo_unitn.png

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace{70pt}
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\size large
CORSO DI LAUREA TRIENNALE IN INFORMATICA
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace{30pt}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Elaborato Finale
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace{30pt}
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\size largest
LA QUESTIONE DEL TEMPO NEI DATI:
\begin_inset Newline newline
\end_inset

DATABASE TEMPORALI
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace{50pt}
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\size large
Relatore: Prof.
 Gabriel Kuper 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
hspace{30pt}
\end_layout

\end_inset

 Laureando: Andrea Gottardi
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace{20pt}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Anno accademico 2013/2014
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{center}
\end_layout

\begin_layout Plain Layout


\backslash
date{}
\end_layout

\end_inset


\end_layout

\begin_layout Title
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\align right

\shape italic
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace*{
\backslash
fill}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\align right

\shape italic
Any sufficiently advanced technology is equivalent to magic.
\end_layout

\begin_layout Standard
\align right

\shape italic
–Sir Arthur C.
 Clarke
\end_layout

\begin_layout Standard
\align right
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
vspace*{
\backslash
fill}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
mbox{} 
\backslash
thispagestyle{empty} 
\backslash
newpage
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Part*
Ringraziamenti
\end_layout

\begin_layout Standard
Prima di tutto, voglio ringraziare i miei genitori e i miei fratelli, per
 avermi incoraggiato e sostenuto in questi anni di studio, e senza i quali
 non sarei nemmeno riuscito a iniziare questo percorso di formazione.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
Grazie ai miei "colleghi" e compagni di corso Alessandro, Antonio, Mattia
 e Stefano, per aver trascorso insieme la preparazione di questi ultimi
 esami, dove casa mia é diventata il quartier generale dello studio (senza
 disdegnare calcio balilla e videogiochi) ;
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
Grazie a tutti i colleghi della Fondazione Bruno Kessler, area Sistemi Informati
vi, per avermi fatto passare i sei mesi di stage trattandomi come uno di
 loro e facendomi sentire ogni giorno come a casa;
\end_layout

\begin_layout Standard

\end_layout

\begin_layout Standard
Grazie anche alla mia fidanzata Giulia, per il sostegno mai mancato in questi
 anni, ma soprattutto per aver ascoltato le mie paranoie alla fine di ogni
 esame, dicendomi che sarebbe andato bene (e puntualmente azzeccandoci ogni
 volta, anche se non ho mai voluto ammettere avesse ragione ☺)
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
Infine, grazie a tutti coloro, parenti, amici o anche semplici conoscenti,
 che durante questi anni hanno sempre avuto una parola, un incoraggiamento
 o anche solo un pensiero nei miei confronti, sono certo che questo risultato
 è arrivato anche grazie a loro.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Abstract
La vita dell'uomo, fin dalla sua prima comparsa sulla Terra, è sempre stata
 scandita dal tempo: all'inizio le unità di misura del tempo erano molto
 approssimate e variabili, basti pensare al concetto di giorno e notte,
 oppure di alba e tramonto, ma ciò era più che sufficiente per organizzare
 e gestire al meglio il lavoro, nei campi oppure a caccia.
 Con il passare del tempo, e con l'invenzione degli orologi, il tempo ha
 assunto una connotazione sempre più importante: se prima un'approssimazione
 anche di diverse ore non era particolarmente influente, questa approssimazione
 è diventata sempre meno estesa, e di conseguenza il calcolo del tempo è
 diventto più accurato, passando dai minuti, ai secondi, ai millesimi di
 secondo, fino ad arrivare ai moderni orologi atomici al cesio, che è stato
 calcolato possano sbagliare di un secondo ogni 100 milioni di anni.
 Esiste anche una nuova concezione di orologi atomici, che utilizza atomi
 di alluminio, e che è stato calcolato possa sbagliare di un secondo dopo
 addirittura 3.7 miliardi di anni 
\begin_inset CommandInset citation
LatexCommand cite
key "1"

\end_inset

.
 Nella tecnologia informatica, e soprattutto nei database, la questione
 del tempo è sempre stata messa "in secondo piano", poichè si è sempre privilegi
ata la conservazione dei dati, piuttosto che la loro precisione temporale.
 In questo documento verrà trattata la questione dei database temporali,
 una tecnologia non nuova in campo informatico, che rimane tuttora poco
 conosciuta ai più, ma largamente usata nelle applicazioni reali.
 Verrà prima di tutto presentata la tecnologia come è stata teorizzata alle
 origini e alcuni concetti basilari, in seguito verranno presentati alcuni
 esempi di applicazione in SQL-92 e verranno trattate le nuove funzionalità
 temporali presenti nella versione 2011 dello standard SQL.
 I database temporali verranno inoltre trattati sotto un diverso punto di
 vista, cioè quello dei database cosiddetti NoSQL, che con la loro diversa
 filosofia hanno bisogno di un approccio differente.
 Infine, ma non meno importante, verrà presentato un caso concreto di utilizzo
 dei database temporali, ovvero la Fondazione Bruno Kessler, che li utilizza
 in maniera proficua ed efficiente.
\end_layout

\begin_layout Abstract
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Part
Introduzione
\end_layout

\begin_layout Section
Il concetto del tempo
\end_layout

\begin_layout Standard
Riflettendo un attimo su una giornata qualsiasi della nostra vita, è facile
 accorgersi come l'esistenza di ognuno sia scandita, in maniera continua
 e regolare, da un'entità quasi astratta, ma che con il passare degli anni
 e delle epoche, e con l'innovazione tecnologica, ha acquistato sempre più
 valore e significato: il tempo.
 Ormai non ci si fa quasi più caso, ma non facciamo altro che rincorrere,
 in maniera sempre più frenetica, il tempo passato: abbiamo degli orari
 per entrare al lavoro, altri ancora per uscire, altri orari "tradizionali"
 dedicati ai pasti o al tempo libero, e così via.
 
\end_layout

\begin_layout Standard
Anche nell'informatica, forse più che in altri ambiti, il tempo è fondamentale:
 basti pensare alla grande quantità di applicativi che vengono utilizzati
 nei più disparati contesti, dalle banche ai negozi, dalle centrali elettriche
 alle automobili, che hanno nelle variazioni temporali un fattore vitale
 del loro funzionamento.
 Per fare un esempio, nel caso di una banca, è necessario registrare le
 operazioni compiute fino ai decimi di secondo, o anche oltre, poichè una
 variazione minima, soprattutto nell'ambito del trading o della compravendita
 di titoli e azioni, potrebbe comportare una perdita di denaro anche piuttosto
 considerevole.
 
\end_layout

\begin_layout Standard
Tutti questi movimenti e transazioni devono naturalmente essere memorizzati
 da qualche parte, ed è qui che entra in gioco quella che è universalmente
 riconosciuta come la parte più iportante di ogni sistema software: il database.
 Sembra incredibile, ma al giorno d'oggi non tutti coloro che lavorano nel
 campo dell'informatica e dei software si rendono conto dell'importanza
 che ha una adeguata pianificazione dei database sotto l'aspetto temporale,
 anzi: molto spesso tale aspetto viene dimenticato, volutamente o meno,
 proprio perchè è considerato poco importante, e di conseguenza ha una priorità
 piuttosto bassa.
 
\end_layout

\begin_layout Standard
Generalmente, tutte queste vicissitudini riguardo l'organizzazione della
 struttura dati seguono un andamento abbastanza simile: all'inizio lo sviluppo
 del sistema procede senza particolari problemi, fino al punto in cui, a
 causa del rapido incremento del numero dei record (e molto spesso delle
 dimensioni del sistema software) è necessario modificare la struttura del
 database, per distinguere ad esempio tra record validi allo stato attuale,
 record non più validi e record con validità futura.
 Solitamente, quando si arriva a questo punto, è necessario mettere mano
 anche al codice del software, causando disagi considerevoli in materia
 di costi e di tempo impiegato per la risoluzione.
 Se poi l'azienda produttrice del software ha dimensioni molto grandi, magari
 con gruppi indipendenti che lavorano su parti diverse del prodotto, è facile
 immaginare come un intoppo apparentemente di rapida soluzione si possa
 trasformare in un problema di dimensioni enormi, così come i relativi oneri.
 È necessario quindi adottare fin da subito un approccio "temporale" nella
 creazione dei database, in modo da dedicare magari qualche ora in più nella
 redazione dello schema della base di dati, ma evitando disagi ben più consisten
ti nel futuro, sia a medio che lungo termine.
\end_layout

\begin_layout Part
Database temporali: Panoramica
\end_layout

\begin_layout Section
Storia e stato dell'arte
\end_layout

\begin_layout Standard
La storia dei database temporali inizia con un paradosso: i database convenziona
li, che memorizzano solo stringhe e numeri senza considerare il tempo, non
 sono completamente realistici.
 Infatti, i database di questo tipo rappresentano uno stato del sistema,
 ma non si sa precisamente quale.
 Le modifiche vengono attuate in un modo che si può dire distruttivo: i
 dati che hanno bisogno di un aggiornamento vengono semplicemente modificati,
 mentre quelli non più validi vengono cancellati, rendendo impossibile determina
re lo storico del database stesso.
 Da qui, sono nate molteplici necessità, come quella di tracciare un determinato
 evento dall'inizio alla fine, oppure similarmente tracciare oggetti e le
 relazioni che li accomunano.
 Proprio questi problemi hanno spinto Jacob Ben-Zvi (1982) e James Clifford
 (1983), indipendentemente l'uno dall'altro, a teorizzare una soluzione
 che potesse risolverli.
 Ben-Zvi, soprattutto, ideò per primo i concetti di tempo effettivo e di
 tempo di registrazione (che verranno successivamente rinominati in tempo
 di validità e tempo di transazione).
 Qualche anno più tardi Richard T.
 Snodgrass, professore universitario considerato oggi tra i più importanti
 esponenti dei database temporali, introdusse la sua versiona temporale
 del linguaggio QUEL (un precursore dell'attuale SQL), chiamata TQUEL.
 All'inizio degli anni '90, quando SQL ha preso piede in tutti i maggiori
 DBMS, soppiantando QUEL, Snodgrass ha continuato la sua opera pionieristica
 nel settore temporale dei database, creando prima una estensione di SQL-92
 stesso, nota come TSQL (da non confondere con T-SQL, o Transact-SQL, una
 estensione proprietaria di SQL di Microsoft), e successivamente ha posto
 le basi per la nuova versione dello standard, nota come SQL3, che ha incluso
 direttamente nello standard i primi concetti temporali.
 Nell'ultima versione di SQL, SQL-2011, si è chiuso il cerchio, completando
 il processo di implementazione delle ultime caratteristiche temporali mancanti.
\end_layout

\begin_layout Section
Gli elementi basilari
\end_layout

\begin_layout Standard
È prassi comune credere che un database temporale sia semplicemente "un
 database normale, con l'aggiunta di campi di data".
 In realtà, un database temporale è qualcosa di più di un semplice campo
 aggiuntivo, e lo dimostra il fatto che si basa su tre aspetti fondamentali,
 che nei database "classici" non sono presenti:
\end_layout

\begin_layout Itemize

\shape italic
Dati temporali
\end_layout

\begin_layout Itemize

\shape italic
Tempi
\end_layout

\begin_layout Itemize

\shape italic
Tipi di interrogazioni
\end_layout

\begin_layout Standard
Ognuna di queste categorie si divide in ulteriori tre elementi, per un totale
 di nove entità che sono fondamentali per lo studio dei database temporali.
\end_layout

\begin_layout Subsection
I dati temporali
\end_layout

\begin_layout Standard
I dati temporali rappresentano delle "quantità" di tempo, più o meno precise
 a seconda del tipo, che hanno un significato molto vicino a quello utilizzato
 in ambito comune.
 Nello specifico, si dividono in:
\end_layout

\begin_layout Itemize

\shape italic
Istanti
\shape default
, che come nel linguaggio comune rappresentano un momento preciso del tempo
 (come ad esempio il 19 luglio 2014, 22.36.20, oppure il largamente utilizzato
 
\family typewriter
NOW()
\family default
);
\end_layout

\begin_layout Itemize

\shape italic
Intervalli
\shape default
, anche questi vicini all'interpretazione comune, che non sono altro che
 una durata fissa (ad esempio, 3 mesi oppure 5 giorni);
\end_layout

\begin_layout Itemize

\shape italic
Periodi, 
\shape default
simili agli intervalli, con la caratteristica di avere un inizio e una fine
 ben precisi (ad esempio, dal 15 luglio 2014 al 30 settembre 2014);
\end_layout

\begin_layout Subsubsection
Istanti
\end_layout

\begin_layout Standard
Gli istanti sono la parte fondamentale e imprescindibile di tutta la teoria
 sui database temporali.
 Facendo un paragone con la geometria, possono essere paragonati ai punti,
 anch'essi considerati l'entità minima e basilare di questa branca della
 matematica: partendo da essi si possono creare oggetti più complessi, come
 linee e poligoni.
 Gli istanti, similarmente, sono solamente un punto specifico del tempo,
 che accade una volta e poi rimane per sempre nel futuro, e sulla base di
 essi si può costruire qualsiasi tipo di relazione temporale: un intervallo
 di un mese avrà sicuramente un istante di inizio e uno di fine, anche se
 possono non essere noti a priori; periodi di tempo (ad esempio dal 22 luglio
 2014 alle 19:00:00 fino al 23 luglio 2014 alle 08:00:00) sono già intrinsecamen
te delimitati da istanti.
 Hanno un ruolo talmente importante in ambito temporale, al punto che fino
 a pochi anni fa erano l'unico modo per definire intervalli e periodi di
 tempo.
 Al giorno d'oggi la scelta si è ampliata (nelle recenti versioni di SQL
 sono presenti costrutti avanzati che permettono la definizione precisa
 di periodi e intervalli così come sono teorizzati), ma gli istanti rimangono
 comunque la scelta di espressione temporale più gettonata e di più semplice
 applicazione.
\end_layout

\begin_layout Standard
Uno dei motivi del loro successo è la versatilità: in SQL, fin dalle prime
 versioni, sono stati introdotti ben tre tipi di rappresentazione, con precision
e differente tra loro, e di conseguenza con diverse applicazioni: 
\family typewriter
TIME
\family default
, 
\family typewriter
DATE
\family default
 e 
\family typewriter
TIMESTAMP
\family default
.
 
\end_layout

\begin_layout Itemize

\family typewriter
TIME
\family default
 serve per salvare ore, minuti, secondi e frazioni di secondo (con formato
 
\family typewriter
hh:mm:ss.000
\family default
, nel caso di precisione a 3 cifre decimali), e supporta le variazioni di
 fuso orario.
\end_layout

\begin_layout Itemize

\family typewriter
DATE
\family default
 serve per salvare giorno, mese e anno di una particolare data (con formato
 
\family typewriter
YYYY-MM-DD
\family default
).
\end_layout

\begin_layout Itemize

\family typewriter
TIMESTAMP
\family default
 è immaginabile come una fusione tra 
\family typewriter
TIME
\family default
 e 
\family typewriter
DATE
\family default
, ed è la rappresentazione più accurata in assoluto: 
\family typewriter
TIME
\family default
 ha una precisione elevata, ma può considerarsi affidabile solo con dati
 contestualizzati in un singolo giorno, mentre 
\family typewriter
DATE
\family default
 può essere usato per dati molto estesi nel tempo, ma ha una precisione
 molto limitata, perchè si sa il giorno a cui il dato si riferisce, ma nulla
 più.
 
\family typewriter
TIMESTAMP
\family default
, invece, ha il supporto per le date, per le ore e per i fusi orari (con
 formato 
\family typewriter
YYYY-MM-DD hh:mm:ss.000+01:00
\family default
, con precisione a 3 posizioni decimali e fuso orario a +01:00 GMT, quello
 italiano), e la sua precisione arriva oltre il decimo posto decimale (quella
 effettiva, però, dipende dalle implementazioni), rendendolo l'alternativa
 migliore per il salvataggio di istanti.
\end_layout

\begin_layout Standard
L'utilizzo di questi metodi di rappresentazione, nella stragrande maggioranza
 delle applicazioni, è più che sufficiente per rappresentare gli istanti.
 Formalmente parlando, però, i metodi appena descritti non salvano istanti,
 nonostante la loro precisione arrivi ad essere elevatissima: come precedentemen
te specificato, gli istanti non sono altro che un momento preciso del tempo,
 definizione che cozza con quella di precisione, che il vocabolario Treccani
 
\begin_inset CommandInset citation
LatexCommand cite
key "7"

\end_inset

 spiega come
\end_layout

\begin_layout Quotation

\shape italic
"il grado più o meno alto con cui, nell’eseguire l’esperienza o la lavorazione,
 ci si avvicina alle condizioni prefissate; p.
 di una misura, genericamente, la maggiore o minore approssimazione della
 misura al valore effettivo della grandezza in esame, e specificamente l’errore
 relativo della misura"
\end_layout

\begin_layout Standard
Supponendo come grandezza in esame l'istante nel senso formale (e filosofico)
 del termine, ne deriva che non sarà mai possibile, almeno con gli strumenti
 odierni, determinare con esattezza l'entità di un istante, e sarà perciò
 necessario accontentarsi di una, perquanto precisa, approssimazione.
\end_layout

\begin_layout Subsubsection
Intervalli 
\end_layout

\begin_layout Standard
A differenza degli istanti, che rappresentano un momento preciso nel tempo,
 gli intervalli sono dei valori che rappresentano una quantità di tempo
 definita.
 Hanno la particolarità di essere relativi, ciò significa che identificano
 una certa quantità di tempo, che però a meno di ulteriori specificazioni
 rimane variabile in inizio o fine.
 È un efficace esempio la semplice frase "Ho vissuto a Trento per tre anni",
 in cui si sa con certezza per quanto la persona che parla ha vissuto a
 Trento, e che la stessa persona, in questo momento, vive altrove, ma non
 si sa di preciso quando è iniziato il periodo di soggiorno a Trento e quando
 è finito.
 Per questo gli intervalli sono utilizzati più spesso nella lingua parlata,
 mentre nell'ambito dei database sono poco utilizzati, se non in combinazione
 con un istante.
\end_layout

\begin_layout Standard
In SQL, gli intervalli sono dei tipi di dato a tutti gli effetti, e si dividono
 in due tipi: intervalli da anno a mese (
\family typewriter
YEAR TO MONTH
\family default
) e da giorno a ora (
\family typewriter
DAY TO TIME
\family default
).
 Questa terminologia significa che, rispettivamente, gli intervalli possono
 essere intesi come una quantità di anni e mesi, oppure come una quantità
 di giorni e di tempo.
 La precisione di queste due varianti è sensibilmente diversa: in 
\family typewriter
YEAR TO MONTH
\family default
 è possibile esprimere intervalli solo in termini di anni e mesi, mentre
 in 
\family typewriter
DAY TO TIME
\family default
 è possibile esprimere intervalli molto più piccoli, ma anche molto più
 precisi, in quanto è possibile specificare valori di giorni, ore, minuti,
 secondi e frazioni di secondo.
 Non è obbligatorio specificare gli ordini di grandezza più grandi per poter
 utilizzare quelli più piccoli: considerando 
\family typewriter
YEAR TO MONTH
\family default
 è possibile utilizzare indifferentemente, per esprimere un intervallo di
 un anno:
\end_layout

\begin_layout Itemize

\family typewriter
INTERVAL '1' YEAR
\end_layout

\begin_layout Itemize

\family typewriter
INTERVAL '1-0' YEAR TO MONTH
\end_layout

\begin_layout Itemize

\family typewriter
INTERVAL '0-12' YEAR TO MONTH
\end_layout

\begin_layout Itemize

\family typewriter
INTERVAL '12' MONTH
\end_layout

\begin_layout Standard
Per 
\family typewriter
DAY TO TIME
\family default
, il concetto è molto simile, è solo necessario sostituire a 
\family typewriter
TIME
\family default
 la quantità di tempo fino a cui si vuole arrivare, quindi 
\family typewriter
HOUR
\family default
, 
\family typewriter
MINUTE
\family default
 o 
\family typewriter
SECOND.
\end_layout

\begin_layout Subsubsection
Periodi
\end_layout

\begin_layout Standard
Come detto nel paragrafo dedicato agli intervalli, nell'utilizzo pratico
 dei database si ricorre molto raramente all'utilizzo di questi oggetti,
 perchè rappresentano una quantità di tempo reale, ma impossibile da collocare
 con certezza nel tempo.
 È molto più frequente, invece, trovare tabelle che combinano vari campi,
 contenenti un intervallo o un istante, che in questo modo mettono in relazione
 l'intervallo stesso con un determinato punto nel tempo.
 Quando si esegue questa operazione, l'intervallo cambia natura e nome,
 e diviene periodo.
 Un periodo è esattamente equiparabile all'intervallo, infatti entrambi
 hanno una durata, ma la caratteristica del periodo è appunto quella di
 avere un preciso istante di inizio e un preciso istante di fine.
\end_layout

\begin_layout Standard
È utile e importante evidenziare che esistono due rappresentazioni di una
 coppia di istanti come periodo:
\end_layout

\begin_layout Itemize
Rappresentazione "chiuso/chiuso", dove il periodo è formato dal tempo che
 intercorre tra due istanti, compresi gli estremi;
\end_layout

\begin_layout Itemize
Rappresentazione "chiuso/aperto" come l'intervallo precedente, ma viene
 escluso l'estremo di destra (o comunque quello più avanti nel tempo)
\end_layout

\begin_layout Itemize
Rappresentazione "aperto/chiuso", dove viene escluso l'estremo di sinistra
 (o comunque quello più indietro nel tempo)
\end_layout

\begin_layout Itemize
Rappresentazione "aperto/aperto", dove il periodo è formato dal tempo che
 intercorre tra due istanti, esclusi entrambi gli estremi;
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Rappresentazione
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Istante di inizio
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Istante di fine
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
chiuso/chiuso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2014-08-01
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2014-08-31
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
chiuso/aperto
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2014-08-01
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2014-09-01
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
aperto/chiuso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2014-07-31
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2014-08-31
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
aperto/aperto
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2014-07-31
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2014-09-01
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Vari tipi di rappresentazione, che definiscono un intervallo corrispondente
 al mese di agosto
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Le rappresentazioni più usate sono quella chiuso/chiuso e quella chiuso/aperto
 (quest'ultima utilizzata all'interno di questo documento), poichè sono
 la rappresentazione più naturale degli intervalli: infatti, anche nel parlare
 comune, ci si riferisce a un periodo di tempo includendo gli estremi, o
 al massimo escludendo l'estremo finale.
 Nulla vieta, però, di rappresentare un periodo scegliendo le rimanenti
 due varianti della tabella 1.
\end_layout

\begin_layout Standard
Indipendentemente dal metodo utilizzato, per garantire la stabilità e la
 robustezza dei dati (e conseguentemente dell'intero sistema) ci sono alcuni
 requisiti da rispettare: prima di tutto, la rappresentazione dovrebbe rimanere
 la stessa per tutta la struttura dati che la ospita, o ancora meglio, in
 tutto il database; inoltre, è necessario utilizzare delimitatori (in questo
 caso date) con la stessa granularità, ciò significa che il loro livello
 di precisione deve essere lo stesso.
 In entrambi i casi ciò serve per evitare dei "vuoti" o degli equivoci nella
 comparazione e nell'utilizzo di periodi anche contigui, con rischi potenzialmen
te molto elevati nel caso fosse necessario ottenere dati riferiti proprio
 all'istante "non coperto".
\end_layout

\begin_layout Standard
I periodi hanno la particolarità di non essere stati mai inclusi nello standard
 SQL, almeno fino alla versione più recente del 2011.
 In questa sede è stato aggiunto un nuovo tipo di dato, il periodo (definito
 come 
\family typewriter
PERIOD
\family default
), che è formato dagli istanti di inizio e di fine memorizzati nella tabella.
 Inoltre, è stata inserita una variante per quanto riguarda la modifica
 e la cancellazione di record: grazie a una nuova sintassi, è possibile
 specificare il periodo (o la frazione di periodo) di cui si vogliono modificare
 i dati, e SQL farà il resto: se un record ha un periodo che eccede (in
 qualsiasi modo) il periodo specificato, allora il linguaggio si occuperà
 di rimuovere o modificare solo la parte del record che soddisfa la richiesta,
 aggiungendo quindi nuovi record e/o modificando quelli esistenti.
 
\end_layout

\begin_layout Standard
Il costrutto PERIOD sarà esaminato in dettaglio nella sezione espressamente
 dedicata alle innovazioni di SQL-2011.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Subsubsection
Predicati temporali e relazioni
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{
\backslash
renewcommand{
\backslash
arraystretch}{3}%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="8" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top" width="0pt">
<column alignment="center" valignment="top">
<column alignment="center" valignment="middle" width="0pt">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Relazione
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Inverso
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Illustrazione
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Interpretazione
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Spiegazione
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

$ X > Y $
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

$ Y < X $
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/Allen_calculus_before.png
	width 110dd

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
X before Y
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
X finisce prima di Y
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

$ X m Y $
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

$ Y mi X $
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/Allen_calculus_meet.png
	width 110dd

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
X meets Y
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
X finisce quando inizia Y
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

$ X o Y $
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

$ Y oi X $
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/Allen_calculus_overlap.png
	width 110dd

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
X overlaps Y
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
X finisce dopo l'inizio di Y
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

$ X s Y $
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

$ Y si X $
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/Allen_calculus_start.png
	width 110dd

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
X starts Y
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
X e Y iniziano insieme
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

$ X d Y $
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

$ Y di X $
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/Allen_calculus_during.png
	width 110dd

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
X during Y
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
X inizia e finisce all'interno di Y
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

$ X f Y $
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

$ Y fi X $
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/Allen_calculus_finish.png
	width 110dd

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
X finishes Y
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
X e Y finiscono insieme
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

$ X = Y $
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Graphics
	filename img/Allen_calculus_equal.png
	width 110dd

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
X equals Y
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
X e Y hanno durata uguale
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
I concetti fondamentali delle relazioni tra periodi: Algebra di Allen
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Istanti, intervalli e periodi hanno in comune i tipi di predicati in SQL,
 che sono quattro:
\end_layout

\begin_layout Itemize
Uguaglianza, corrispondente al simbolo 
\begin_inset ERT
status open

\begin_layout Plain Layout

$ = $
\end_layout

\end_inset

;
\end_layout

\begin_layout Itemize
L'espressione 
\family typewriter
IS NULL
\family default
;
\end_layout

\begin_layout Itemize
L'espressione 
\family typewriter
OVERLAPS
\family default
, che ha significato diverso rispetto a quella della Tabella 4;
\end_layout

\begin_layout Itemize
Una relazione di confronto (ad esempio 
\begin_inset ERT
status open

\begin_layout Plain Layout

$ X < Y $
\end_layout

\end_inset

) sulla quale si può eseguire un ordinamento;
\end_layout

\begin_layout Standard
Definire il loro significato preciso è abbastanza semplice se si considerano
 istanti e intervalli, un po' meno se invece si considerano i periodi.
\end_layout

\begin_layout Paragraph
Uguaglianza
\end_layout

\begin_layout Standard
Per quanto riguarda l'uguaglianza, tutti e tre gli oggetti sono simili:
 infatti un istante è uguale a un altro solo se è esattamente lo stesso,
 così come un intervallo è uguale a un altro se hanno la stessa durata,
 e un periodo è uguale a un altro solo se hanno sia istanti che intervallo
 uguale.
 
\end_layout

\begin_layout Paragraph

\family typewriter
IS NULL
\end_layout

\begin_layout Standard
Anche l'espressione 
\family typewriter
IS NULL
\family default
 è abbastanza facile e la spiegazione ha un senso solo nel caso del periodo,
 poichè ha due valori invece di uno: se uno dei valori, o entrambi, sono
 
\family typewriter
NULL
\family default
, allora l'intero periodo è uguale a 
\family typewriter
NULL
\family default
, perchè si tratta di partire da un istante e arrivare in un istante inesistente
, il che è impossibile.
\end_layout

\begin_layout Paragraph
Confronto
\end_layout

\begin_layout Standard
Il confronto è la prima grande differenza tra periodi e la coppia istanti/interv
alli, poichè cambiano i termini di paragone: infatti, mentre istanti e intervall
i sono ordinabili, i periodi non lo sono.
 "Ordinabile" significa che, data una coppia di due oggetti di egual tipo,
 è possibile determinare quale viene prima di un altro: nel caso degli istanti
 e degli intervalli, che hanno tre relazioni applicabili ("prima", "uguale",
 "dopo"), ciò è molto facile: essendo un istante un momento preciso nel
 tempo, che accade una volta e poi è perso per sempre, un altro istante
 può, al massimo, accadere nello stesso tempo, e quindi le relazioni sono
 verificate senza dubbio alcuno.
 Per gli intervalli è lo stesso discorso: al massimo un intervallo potrà
 avere la stessa durata di un altro, oppure essere più ristretto o più esteso,
 e anche qui le relazioni sono verificate.
 I periodi, essendo rappresentati non da un valore unico, ma da una coppia
 di essi, hanno una gestione molto più complicata, perchè compare ilproblema
 di dover gestire relazioni più complesse, dovute al fatto che su due periodi
 distinti, gli istanti di inizio o fine potrebbero essere uguali.
\end_layout

\begin_layout Standard
James Frederick Allen, nel 1983, ha formalizzato questo problema introducendo
 ben 13 relazioni tra periodi, che vengono attualmente chiamati Algebra
 di Allen.
 Queste relazioni, esposte nella tabella 4, sono considerabili come 6 coppie
 (la relazione e il suo inverso) più la relazione di uguaglianza, che ovviamente
 ha come inverso se stessa.
\end_layout

\begin_layout Standard
Nonostante queste 13 relazioni, si dice che i periodi sono parzialmente
 ordinati, poichè non sempre è possibile ordinarli in ragione del tempo:
 basti pensare a due periodi che non sono collegati in nessun modo, iniziando
 e finendo in due momenti distinti.
 In questo caso, l'ordinamento è possibile, proprio perchè i periodi hanno
 tempi diversi.
 nel caso di un periodo che ne include un altro, in un modo tale che 
\begin_inset ERT
status open

\begin_layout Plain Layout

$ A d B $
\end_layout

\end_inset

, allora l'ordinamento non è più possibile, perchè i due periodi hanno una
 parte di essi "in comune" e perciò diventa impossibile determinare quale
 dei due viene "prima" dell'altro.
 Si potrebbe obiettare che, scegliendo il termine di paragone appropriato,
 è possibile effettuare un ordine preciso: ad esempio, se si considera solo
 l'istante di inizio, allora si può dire che 
\begin_inset ERT
status open

\begin_layout Plain Layout

$B$
\end_layout

\end_inset

 viene prima di 
\begin_inset ERT
status open

\begin_layout Plain Layout

$A$
\end_layout

\end_inset

, ma ciò non è formalmente corretto, perchè si tratta di un confronto tra
 singoli istanti, e quindi non si sta parlando di periodi.
\end_layout

\begin_layout Paragraph

\family typewriter
OVERLAPS
\end_layout

\begin_layout Standard
L'ultimo predicato può essere confuso con il concetto di 
\family typewriter
OVERLAPS
\family default
, o impropriamente "inclusione", utilizzato dall'Algebra di Allen.
 Tuttavia, il significato in ambito SQL è molto differente, e allo stesso
 tempo molto meno forte di quello teorizzato da Allen.
 Infatti, per 
\family typewriter
OVERLAPS
\family default
 si intende una situazione in cui un periodo ha in comune con un altro anche
 solo un istante, per una traduzione in linguaggio comune che potrebbe essere
 "sovrapposizione".
 Quindi, questa definizione include le relazioni di Allen 
\begin_inset ERT
status open

\begin_layout Plain Layout

$m$
\end_layout

\end_inset

,
\begin_inset ERT
status open

\begin_layout Plain Layout

$s$
\end_layout

\end_inset

,
\begin_inset ERT
status open

\begin_layout Plain Layout

$d$
\end_layout

\end_inset

,
\begin_inset ERT
status open

\begin_layout Plain Layout

$f$
\end_layout

\end_inset

 e
\begin_inset ERT
status open

\begin_layout Plain Layout

$=$
\end_layout

\end_inset

, rendendola notevolmente meno restrittiva.
\end_layout

\begin_layout Standard
Una particolarità interessante di questa relazione è il fatto di non poter
 essere applicata a istanti e intervalli, ma sono a combinazioni di questi
 due (come ad esempio i periodi).
 In realtà, seppur in maniera un po' forzata, dire che una data include
 se stessa non è formalmente errato, ma in SQL questa assunzione non è permessa.
\end_layout

\begin_layout Subsection
I tempi
\end_layout

\begin_layout Standard
La categoria dei tempi comprende tre tipi di tempo che possono essere presenti
 in una tabella, e che hanno funzioni diverse a seconda del loro gruppo
 di appartenenza.
 Nello specifico si parla di:
\end_layout

\begin_layout Itemize

\shape italic
User-defined time
\shape default
, dove il tempo è inserito dall'utente e non ha alcun significato ai fini
 della validità dei dati;
\end_layout

\begin_layout Itemize

\shape italic
Tempo di validità
\shape default
, oppure definibile come periodo (avendo esso sia una data precisa di inizio
 che una data precisa di fine) all'interno di cui il dato è considerabile
 come valido.
\end_layout

\begin_layout Itemize

\shape italic
Tempo di transazione
\shape default
, cioè, in genere, l'istante nel quale il record relativo è stato inserito
 all'interno del database.
\end_layout

\begin_layout Standard
Questi concetti hanno senso e utilità pratica solo se sono considerati nel
 contesto di una tabella, che ne può contenere solo uno, due, oppure tutti
 e tre, con varie combinazioni adatte a diverse implementazioni, che saranno
 esaminate nella prossima sezione.
\end_layout

\begin_layout Subsection
Le interrogazioni
\end_layout

\begin_layout Standard
Per quanto riguarda i tipi di interrogazioni in ambito temporale, infine,
 anche qui sono presenti tre diversi rami, riassumibili nel seguente modo:
\end_layout

\begin_layout Itemize

\shape italic
Corrente
\shape default
, cioè relativo all'istante attuale;
\end_layout

\begin_layout Itemize

\shape italic
Sequenziale
\shape default
, cioè relativo ad ogni istante di tempo
\end_layout

\begin_layout Itemize

\shape italic
Non-Sequenziale
\shape default
, cioè che esula dal tempo, ignorandolo completamente.
\end_layout

\begin_layout Standard
Ad esse va aggiunto il tipo di interrogazione non temporale, che è quello
 che coinvolge i database convenzionali.
\end_layout

\begin_layout Subsubsection
Interrogazioni non temporali
\end_layout

\begin_layout Standard
Sono l'unico tipo di interrogazione permessa in un sistema di database non
 temporali.
 Il motivo è molto semplice: siccome queste rispondono alla domanda "Cosa
 soddisfa la richiesta?", significa che si possono ottenere dati con un
 senso logico solo se si vuole sapere la situazione attuale della tabella,
 che è l'unica disponibile poichè senza distinzioni temporali è come se
 tutti i record inseriti siano validi in questo momento, anche se magari
 non è vero.
\end_layout

\begin_layout Subsubsection
Interrogazioni correnti
\end_layout

\begin_layout Standard
Le interrogazioni correnti sono la categoria di interrogazioni più vicina
 a quelle non temporali: infatti, la domanda a cui rispondono è "Cosa soddisfa
 la richiesta, adesso?".
 La differenza può sembrare labile, ma non lo è: siccome nei database non
 temporali non esiste, per ovvi motivi, la distribuzione dei record nel
 tempo, non è necessario specificare il momento in cui si vuole ottenere
 la situazione richiesta.
 Con i database temporali, il discorso è diverso: infatti possono essere
 presenti record non più validi, oppure validi nel futuro, e specificare
 che si ha bisogno della situazione attuale è l'unico modo per ottenere
 i dati aggiornati al momento della richiesta.
\end_layout

\begin_layout Subsubsection
Interrogazioni sequenziali
\end_layout

\begin_layout Standard
Le interrogazioni sequenziali sono una variante delle interrogazioni correnti:
 mentre le interrogazioni correnti restituiscono la situazione al momento
 della richiesta, la interrogazioni sequenziali rispondono alla domanda
 "Cosa ha soddisfato/soddisfa/soddisferà la richiesta, nel corso del tempo?".
 La differenza sta nel fatto che le interrogazioni sequenziali percorrono
 l'andamento del tempo in ogni variazione dei dati nell'intervallo, effettuando
 lo "storico" delle informazioni.
 Hanno la particolarità, visto che sono strettamente legate al tempo, di
 presentare nel risultato anche il periodo in cui la riga è stata, è o eventualm
ente sarà valida.
\end_layout

\begin_layout Subsubsection
Interrogazioni non sequenziali
\end_layout

\begin_layout Standard
Le interrogazioni non sequenziali, invece, sono delle interrogazioni che
 rispondono alla domanda "Qual'era la situazione che soddisfa le richieste,
 ?".
 La domanda non è particolarmente chiara, e fa delle interrogazioni non
 sequenziali la categoria meno comprensibile se spiegata in termini semplici:
 mentre le interrogazioni non temporali non considerano il tempo, le interrogazi
oni correnti considerano soltanto i record validi nel momento della richiesta
 e quelle sequenziali considerano l'intero scorrere del tempo, quelle non
 sequenziali considerano anch'esse il tempo, ma in maniera differente: infatti,
 a parità di condizioni e di database, la tabella risultante sarà uguale
 a quella delle interrogazioni sequenziali, ma senza le colonne relative
 alla validità.
 Sono scarsamente utilizzate, perchè è molto più frequente (e si può dire
 anche di maggiore utilità) volere un elenco di variazioni comprensive di
 periodo in cui queste sono avvenute, piuttosto che avere lo stesso elenco
 ma senza sapere quando i dati che si hanno in mano sono stati validi.
\end_layout

\begin_layout Subsection
Implementazione in SQL standard
\end_layout

\begin_layout Standard
Degli aspetti evidenziati, definire cosa è implementato in SQL, e soprattutto
 in che modo, non è cosa banale, soprattutto perchè gli applicativi che
 si basano interamente su SQL standard sono diventati ormai molto pochi.
 I maggiori DBMS (PostgreSQL, SQL Server, e Oracle su tutti) hanno da tempo
 optato per lo sviluppo di una versione estesa e personalizzata di SQL,
 in modo da non essere legati alle release, dilazionate negli anni, dello
 standard ufficiale, e per avere più libertà nell'inserire feature specifiche
 dei propri prodotti.
 Se per SQL intendiamo la versione standard, allora una copertura delle
 funzionalità temporali, seppur blanda e per certi aspetti lacunosa, si
 ha fin dalla versione del 1992, che poi si è evoluta nel corso degli anni
 fino ad arrivare all'ultima versione, nel 2011.
 Nello specifico, nel 1992 sono stati introdotti i tipi basilari per lo
 sviluppo delle carateristiche sopra elencate, come 
\family typewriter
DATE
\family default
, 
\family typewriter
TIME
\family default
, 
\family typewriter
TIMESTAMP
\family default
 e 
\family typewriter
INTERVAL
\family default
 
\begin_inset CommandInset citation
LatexCommand cite
key "2"

\end_inset

.
 Nelle ultime release, soprattutto nella più recente, è stato aggiunto il
 costrutto 
\family typewriter
PERIOD
\family default
, e sono stati apportati notevoli miglioramenti all'intera gestione delle
 funzionalità temporali.
 Dal punto di vista dello standard, si può dire che i database temporali
 sono giunti a compimento solo nel 2011 
\begin_inset CommandInset citation
LatexCommand cite
key "3"

\end_inset

, dopo una fase di teorizzazione che ha visto i suoi inizi nel 1982, all'interno
 di programmi proprietari, e quindi durata quasi 30 anni.
\end_layout

\begin_layout Section
I costrutti fondamentali
\end_layout

\begin_layout Subsection
Tabelle
\end_layout

\begin_layout Standard
Le tabelle temporali non hanno necessariamente una struttura ben definita,
 infatti possono essere costruite in vari modi, utilizzando varie combinazioni
 dei tempi e dei tipi di dato temporale precedentemente trattati.
 Escludendo le tabelle contenenti solo categorie e valori di tempo definiti
 dall'utente, che non avendo significato ai fini della validità dei dati
 possono essere considerate come un qualsiasi altro campo, esistono anche
 qui tre tipi di strutture dati:
\end_layout

\begin_layout Itemize

\shape italic
Tabelle con tempo di validità
\shape default
, che salvano i dati sulla base del periodo o dell'intervallo di tempo in
 cui gli stessi sono validi;
\end_layout

\begin_layout Itemize

\shape italic
Tabelle con tempo di transazione
\shape default
, che salvano i dati sulla base dell'istante dell'inserimento, e rendono
 quindi possibile l'interrogazione dei dati per capire quando gli stessi
 si consideravano validi
\end_layout

\begin_layout Itemize

\shape italic
Tabelle bitemporali
\shape default
, che sono una variante di struttura dati che prevede la presenza sia del
 tempo di validità, che del tempo di transazione, fornendo quindi la maggiore
 completezza possibile per lo studio della validità dei dati contenuta in
 essi.
\end_layout

\begin_layout Standard
Di seguito sono presenti alcuni semplici esempi che sono utili per capire
 meglio come le varie tabelle possono essere utili ai fini della loro interrogaz
ione.
 Quando sarà necessario parlare di codice SQL, saranno presentate interrogazioni
 svolte con il codice della versione del 1992, a cui sarà affiancato, quando
 opportuno, quello della versione 2011, in modo da poter apprezzare le differenz
e e i miglioramenti nel corso degli anni.
\end_layout

\begin_layout Subsubsection
Tabelle con tempo di validità
\end_layout

\begin_layout Standard
Le tabelle con tempo di validità, come accennato sopra, sono delle particolari
 tabelle che presentano, oltre ai classici dati da memorizzare, anche una
 coppia di campi che hanno il compito di memorizzare l'intervallo in cui
 tali dati sono, o erano, validi.
 Il modo per utilizzare questi due campi è molteplice: si può salvare l'istante
 iniziale di validità e l'istante finale, oppure l'istante iniziale e l'interval
lo di validità, o ancora l'intervallo di validità e l'istante finale.
 Non esiste un modo migliore, poichè tutti e tre i criteri di rappresentazione
 conducono allo stesso risultato.
 
\end_layout

\begin_layout Standard
Un esempio chiaro di come possono essere utilizzate le tabelle con tempo
 di validità può essere trovato nel salvataggio della residenza di un soggetto.
 Per semplicità, supponiamo che tutte le variazioni del luogo di residenza,
 invece che ai Comuni, siano in capo a un ente superiore, che si occupa
 anche di mantenere il database che le contiene.
 Inoltre, limitiamo la tabella a due sole persone.
\end_layout

\begin_layout Standard
Senza tempo di validità, la tabella 
\family typewriter
RESIDENZA 
\family default
si presenta come segue: 
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 senza tempo di validità
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
La tabella, a prima vista, potrebbe dirsi corretta, e in effetti lo è, ma
 solo se le persone listate non hanno mai effettuato un cambio di residenza.
 Nel caso in cui Giorgio Bianchi si spostasse a Trento, avremmo:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 senza tempo di validità: aggiornamento
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Tutto ciò fa venir meno la correttezza della tabella, perchè se interrogassimo
 il database, risulterebbe che Giorgio Bianchi è sempre stato residente
 a Trento, e si perderebbero le tracce della sua precedente residenza a
 Lavis.
\end_layout

\begin_layout Standard
Per risolvere questo problema, è sufficiente apporre alla tabella due nuovi
 campi, chiamati 
\family typewriter
Val_Start 
\family default
e
\family typewriter
 Val_End
\family default
, che come è facilmente intuibile si occupano di mantenere il tempo di validità
 del record al quale si riferiscono.
 In termini pratici, si avrebbe una tabella siffatta:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.05.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
06.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 completa di tempo di validità
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
dove la data 
\family typewriter
31.12.9999
\family default
 è una data fittizia, che viene spesso tradotta con la parola chiave 
\family typewriter
FOREVER
\family default
, che sta semplicemente a significare che il record in oggetto è valido,
 ovviamente non si sa fino a quando, e si assume come valido all'infinito
 (o più realisticamente, fino a quando non intervengono nuove variazioni).
\end_layout

\begin_layout Standard
Infine, la variazione di residenza viene tradotta come segue:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.05.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
06.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 completa di tempo di validità: aggiornamento
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Come è facile notare, è stata modificata la data di fine periodo per quanto
 riguarda la residenza a Lavis di Giorgio Bianchi, e nello stesso istante
 in cui finisce il primo periodo inizia il secondo, identificato con un
 nuovo record.
 In questo modo è possibile risalire a tutte le variazioni di residenza
 di un soggetto anche a distanza di anni, garantendo così l'integrità dei
 dati.
 A fronte di queso vantaggio, emerge però un problema: la chiave primaria,
 che prima era impostata solo sul campo 
\family typewriter
ID_Persona
\family default
, perde il suo significato perchè sono presenti due record con la stessa
 chiave.
 Chiaramente non si tratta di un errore, poichè è necessario specificare
 che si tratta dello stesso soggetto, e non di un omonimo che è nato il
 20 luglio 2014.
 È necessario un approccio diverso, più complesso, che sarà spiegato in
 seguito.
\end_layout

\begin_layout Subsubsection
Tabelle con tempo di transazione
\end_layout

\begin_layout Standard
Le tabelle con tempo di transazione, di primo acchito, sembrano molto simili
 alle tabelle con tempo di validità: entrambe hanno due campi aggiuntivi
 a quelli dei dati della rispettiva tabella, in entrambi i casi i campi
 si riferiscono a un periodo di tempo (rappresentato con le stesse opzioni:
 istante di inizio e di fine, o istante di inizio e intervallo, o ancora
 intervallo e istante di fine), e in entrambi i casi servono per garantire
 una migliore gestione dei dati stessi.
\end_layout

\begin_layout Standard
La principale differenza, però, va oltre tutto questo.
 Infatti è il significato che hanno i due campi aggiuntivi ad essere profondamen
te diverso: nelle tabelle con tempo di validità è possibile ripercorrere
 la storia della realtà, guardando le date di validità dei vari record (si
 dice che il record è valido in base al periodo di validità); con le tabelle
 con tempo di transazione, invece, si riesce a ripercorrere una storia diversa,
 riguardante lo stato della tabella contenente i record (si dice che il
 record è 
\shape italic
ritenuto
\shape default
 valido in base al periodo di transazione).
 Infatti, se si vuole trovare come era composta una tabella con tempo di
 validità, ponendo una certa data, si trovano i record che, al tempo richiesto,
 risultavano validi oppure passati.
 Cercando la composizione di una tabella con tempo di transazione, invece,
 si trova una "fotografia" dello stato della tabella, comprensiva di tutti
 i record che a quella data erano 
\shape italic
ritenuti
\shape default
 validi.
 La distinzione tra "valido" e "ritenuto valido" sembra molto labile, ma
 racchiude invece tutta la differenza delle due tabelle.
 Supponiamo che un record, presente sia in una tabella con tempo di validità
 che in una tabella con tempo di transazione, sia in qualche modo errato:
 nella tabella con tempo di validità è ammessa la modifica del dato, e quindi
 dopo la modifica, se si interroga la tabella è come se il dato corretto
 sia sempre stato inserito, perdendo quindi ogni traccia a riguardo del
 dato errato.
 Nella tabella con tempo di transazione, invece, questo non è possibile:
 siccome la tabella non ammette la cancellazione o la modifica di record,
 che comprometterebbe l'integrità e la recuperabilità dei dati, è necessario
 inserire una nuova riga nella tabella, che quindi mantiene l'errore nell'interv
allo di tempo che va dall'inserimento alla sua scoperta.
 Per questo si parla di valori ritenuti validi: se si cerca di ristabilire
 una situazione del database con data antecedente alla scoperta dell'errore,
 la tabella con tempi di validità presenterà il valore corretto, poichè
 quello errato è stato a suo tempo sovrascritto; quella con tempo di transazione
, invece, presenterà un valore diverso, perchè era quello 
\shape italic
ritenuto
\shape default
 giusto prima della scoperta dell'errore.
\end_layout

\begin_layout Standard
In questo caso, può essere d'aiuto un esempio: riprendendo il caso della
 tabella delle residenze, supponiamo che lo stesso sistema abbia una tabella
 diversa, chiamata 
\family typewriter
RICH_RESIDENZA
\family default
 in cui sono salvate le date in cui i vari soggetti presentano la richiesta
 di concessione di residenza al Comune in cui si sono trasferiti.
 La tabella senza tempo di transazione è in tutto e per tutto simile alla
 tabella 1, per cui si sa che in un certo momento entrambe le persone listate
 hanno presentato richiesta nel loro rispettivo Comune, ma non si sa null'altro:
 potrebbero aver presentato richiesta nello stesso momento, oppure addirittura
 a distanza di anni.
 Per ovviare a questo problema, si creano due campi aggiuntivi, denominati
 
\family typewriter
Tran_Start 
\family default
e
\family typewriter
 Tran_End
\family default
, che hanno il compito di registrare il giorno in cui la richiesta di residenza
 è stata presentata al Comune.
 Supponiamo per semplicità che la richiesta sia stata presentata qualche
 giorno prima dell'effettivo trasferimento, ma nulla vieta che la data di
 inserimento posa essere successiva a quella del trasloco: un esempio è
 dato dalla nascita del figlio di un residente, che acquista la residenza
 dal giorno della nascita ma viene registrato, generalmente, solo qualche
 giorno più tardi.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RICH_RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
28.04.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RICH_RESIDENZA
\family default
 completa di tempo di transazione
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Come si può vedere, nulla è diverso rispetto alla tabella 
\family typewriter
RESIDENZA
\family default
, tuttavia il significato di quelle date è radicalmente diverso: queste
 date non rappresentano la realtà, ma rappresentano il momento in cui il
 database è stato modificato.
 La distinzione è importante: mentre interrogando la tabella 
\family typewriter
RESIDENZA
\family default
 con una precisa data posso ottenere una tabella contenente il numero delle
 persone effettivamente residenti, interrogando la tabella 
\family typewriter
RICH_RESIDENZA
\family default
 posso risalire alle ultime variazioni della tabella stessa, ottenendo quindi
 la lista delle persone che, alla data cercata, hanno presentato la richiesta
 per ottenere la residenza, indipendentemente dal fatto che esse la abbiano
 poi ottenuta.
 Questo si rivela molto utile nel caso, in qualche passaggio, vengano inserite
 delle inconsistenze o degli errori nei dati della tabella: in questo modo
 è possibile ripristinare senza troppa fatica lo stato del database in una
 data precedente, e procedere con le dovute correzioni.
 
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RICH_RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
28.04.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
17.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
17.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RICH_RESIDENZA
\family default
 completa di tempo di transazione: aggiornamento
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Ora, supponiamo che in data 25 luglio 2014, all'ufficio preposto venga notato
 un grossolano errore: nel database Giorgio Bianchi è listato come attuale
 residente a Trento, ma in realtà ha presentato richiesta per diventare
 residente di Bolzano! Subito l'addetto modifica il database, che quindi,
 per quanto riguarda la tabella 
\family typewriter
RESIDENZA
\family default
, avrà il seguente aspetto:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.05.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
06.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Bolzano
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 completa di tempo di validità: correzione errore
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
La modifica fatta consiste semplicemente nel cambiare la città di residenza
 da quella errata a quella corretta.
 Nella tabella 
\family typewriter
RICH_RESIDENZA
\family default
, però, il discorso è diverso: non essendo possibile cancellare o modificare
 righe, è necessario inserirne un altra e agire opportunamente sul tempo
 di transazione, come segue:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RICH_RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
28.04.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
17.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
17.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
25.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Bolzano
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
25.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RICH_RESIDENZA
\family default
 completa di tempo di transazione: aggiornamento
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Qui, invece, la differenza è molto più evidente: è stato inserito un nuovo
 record, con la città corretta, ponendo come 
\family typewriter
Tran_Start
\family default
 la data in cui è stato corretto l'errore, e come 
\family typewriter
Tran_End
\family default
 la data che rappresenta 
\family typewriter
FOREVER
\family default
.
 
\end_layout

\begin_layout Standard
Cosa succederebbe se, in un futuro, venisse richiesto di trovare le persone
 residenti alla data del 20 luglio 2014?
\end_layout

\begin_layout Itemize
Nella tabella 
\family typewriter
RESIDENZA
\family default
, eseguendo l'opportuna query, si ricaverebbe che Giorgio Bianchi è residente
 a Bolzano dal 17 luglio 2014, come in effetti è in realtà.
 
\end_layout

\begin_layout Itemize
Nella tabella 
\family typewriter
RICH_RESIDENZA
\family default
, invece, Giorgio Bianchi risulta residente a Trento.
 
\end_layout

\begin_layout Standard
Questo "finto" errore è dato proprio dalla necessità di poter ricostruire
 il database ogni volta che sia opportuno, ripristinando con esso anche
 gli errori che a quella data erano stati involontariamente commessi ma
 non ancora scoperti.
 Per questo si dice che la tabella con tempi di validità rappresenta la
 realtà: perchè anche se gli errori vengono scoperti dopo l'inserimento,
 è sempre possibile ripristinare la situazione corretta, e proseguire come
 se l'errore non fosse mai avvenuto.
\end_layout

\begin_layout Standard
È molto importante sottolineare come le tabelle con tempo di transazione
 possano essere utilizzate solo come strumento di backup: infatti, non è
 possibile apportare modifiche ad essa senza inserire un nuovo record con
 tempo di inizio e fine rispettivamente di 
\family typewriter
NOW()
\family default
 e 
\family typewriter
FOREVER
\family default
, anche perchè se fosse possibile modificare una riga senza inserirne una
 che attesta la modifica farebbe venir meno la possibilità di ricostruire
 il database di ogni momento del passato.
 Allo stesso modo, anche la cancellazione delle righe è logica e non fisica:
 mentre in una tabella con tempi di validità è sempre possibile correggere
 un valore errato, che si traduce nella formale eliminazione di una riga
 e nell'inserimento dell'altra (rendendo la prima irrecuperabile), nella
 tabella con tempi di transazione questo non è possibile.
 Questa limitazione si applica solo ai campi diversi da quelli relativi
 al tempo di transazione: questi ultimi, infatti, sono sempre modificabili,
 altrimenti non si avrebbe la capacità di tracciamento delle modifiche,
 perchè si avrebbero tutti i record che terminano all'istante 
\family typewriter
FOREVER
\family default
.
\end_layout

\begin_layout Subsubsection
Tabelle bitemporali
\end_layout

\begin_layout Standard
Le tabelle bitemporali, come si può facilmente intuire dal nome, presentano
 entrambe le caratteristiche sopra elencate: hanno perciò sia una coppia
 di valori per identificare un periodo di validità, sia una coppia di valori
 per identificare il tempo di transazione del record stesso.
 Una applicazione per questo tipo di tabelle sembra difficile e di rara
 applicazione, ma per fare un semplice esempio basta pensare all'ufficio
 personale di un'azienda, che riceve comunicazione di una promozione di
 un dipendente della ditta stessa.
 Supponiamo che la comunicazione della promozione avvenga il 15 luglio,
 ma l'effettivo cambio di ruolo avvenga, per motivi fiscali, solo all'inizio
 del mese successivo, e quindi agosto.
 Nel caso di una tabella senza nessun tipo di tempo, si avrebbe la seguente
 situazione:
\end_layout

\begin_layout Standard
Anche qui, la tabella è corretta solo se i due dipendenti hanno avuto lo
 stesso grado fin dalla loro assunzione in azienda: diversamente, si avrebbe
 una interpretazione sbagliata perchè sembra che i dipendenti siano sempre
 stati nel grado che hanno in questo momento.
 In ogni caso, comunque, non è possibile ripercorrere la storia aziendale
 dei dipendenti, e questo, soprattutto in caso di controlli e accertamenti
 fiscali, potrebbe costituire un problema.
\end_layout

\begin_layout Standard
Per creare una tabella bitemporale, procediamo per gradi: prima si aggiungono
 due campi per il tempo di validità, chiamati 
\family typewriter
Val_Start 
\family default
e
\family typewriter
 Val_End
\family default
:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
PERSONALE
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Dip
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Dipendente
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Grado
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luca Verdi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.07.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.02.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
PERSONALE
\family default
 completa di tempo di validità
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
In questo modo, si ha la validità del record e si riesce a risalire, in
 caso di necessità, alle evoluzioni del grado del singolo dipendente.
 Ma le variazioni non sono finite qui: per ottenere una tabella bitemporale,
 si deve aggiungere la seconda coppia di campi, denominati 
\family typewriter
Tran_Start 
\family default
e
\family typewriter
 Tran_End
\family default
, che rappresentano il tempo di transazione, cioè il tempo in cui il record
 è stato aggiunto al database.
 Essendo una tabella dell'ufficio personale, si può facilmente supporre
 che il dipendente sia stato aggiunto non appena si è avuta la conferma
 del buon esito del colloquio, supponiamo 20 giorni prima della data del
 primo giorno di lavoro:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="7">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
PERSONALE
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Dip
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Dipendente
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Grado
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luca Verdi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.07.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
10.06.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.02.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
11.01.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
PERSONALE
\family default
 con tempo di validità e tempo di transazione 
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Ora si ha correttezza formale anche nel tempo di transazione.
 In questo modo, se per caso si avesse bisogno di ottenere la situazione
 dell'azienda al 20 gennaio 2009, apparirebbe come effettivamente assunto
 solo Luca Verdi, poichè la data ricade nel tempo di validità.
 Paolo Rossi, invece, apparirebbe come inserito, ma non assunto, poichè
 il suo tempo di validità è successivo a quella data, ma il tempo di transazione
 è antecedente ad essa.
 Se questa tabella fosse stata semplicemente una tabella con tempo di validità,
 la stessa query avrebbe permesso di risalie alla posizione di Luca Verdi,
 ma non avrebbe permesso di trovare la posizione di Paolo Rossi, poichè
 l'unico periodo disponibile, quello di validità, ricade oltre la data cercata.
\end_layout

\begin_layout Standard
Per finire, manca solo un passaggio, cioè la promozione di Paolo Rossi:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="7">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
PERSONALE
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Dip
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Dipendente
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Grado
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luca Verdi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.07.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
10.06.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.02.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
11.01.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
15.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.02.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.08.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
15.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.08.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
15.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
PERSONALE
\family default
 con tempo di validità e tempo di transazione: aggiornamento (Promozione
 Paolo Rossi)
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Ora la transizione da tabella non temporale a tabella bitemporale è completa:
 creare e mantenere una tabella del genere è molto più impegnativo rispetto
 a una tabella convenzionale, ma a fronte di una maggiore complessità ci
 sono innegabili vantaggi: è possibile non solo risalire allo stato della
 realtà in qualsiasi data si abbia bisogno, ma è anche possibile, in caso
 di necessità, anche riportare il database alla situazione che aveva in
 una determinata data, poichè esaminando i periodi di transazione è possibile
 capire se un determinato record era già stato inserito o meno, senza dubbio
 alcuno.
\end_layout

\begin_layout Standard
Oltre al caso dell'ufficio del personale, ci sono molti altri contesti in
 cui il tempo di transazione può rivelarsi determinante: basti pensare alle
 pratiche da sbrigare per ottenere un certificato, oppure un rinnovo della
 patente: senza tempo di transazione non si saprebbe con precisione quando
 la documentazione necessaria è stata consegnata, e ciò comporterebbe il
 rischio di non ottenere ciò che si è richiesto.
\end_layout

\begin_layout Standard
Anche qui, è bene notare che il sistema di aggiornamento o di cancellazione
 segue la stessa logica delle tabelle con tempo di transazione: avendo unito
 le due tabelle descritte prima (tabelle con tempo di validità e tabelle
 con tempo di transazione) è necessario poter mantenere la completa possibilità
 di ripristino del database a uno stato precedente: per far ciò, come nel
 caso della promozione di Paolo Rossi, è necessario agire sul tempo di transazio
ne.
 In questo caso, si sono eseguiti tre passi:
\end_layout

\begin_layout Itemize
Il tempo finale di transazione del secondo record, recante la vecchia situazione
 di Paolo Rossi, viene modificato ponendolo al giorno della promozione (per
 segnalare che da quel giorno il record non è più considerato valido).
 È corrispondente al periodo dall'assunzione fino alla comunicazione della
 promozione.
 (per comodità, 
\family typewriter
CHIUSURA
\family default
)
\end_layout

\begin_layout Itemize
Viene inserito un record di aggiornamento della situazione attuale, in cui
 il periodo a grado 2 viene modificato logicamente (cioè senza effettiva
 perdita di dati) dal 01 febbraio 2009 al 01 agosto 2014.
 Il tempo di transazione va dal giorno della promozione a 
\family typewriter
FOREVER
\family default
.
 È il periodo di transizione che va dalla comunicazione della promozione
 fino all'assegnazione effettiva dei benefit (per comodità, 
\family typewriter
TRANSIZIONE
\family default
).
\end_layout

\begin_layout Itemize
Viene infine inserito il record che traccia la nuova situazione contrattuale,
 avente periodo di validità dal 01 agosto 2014, e periodo di transazione
 dal 15 luglio 2014.
 Il record è valido e considerato tale, per cui entrambi i tempi di fine
 sono impostati a 
\family typewriter
FOREVER
\family default
.
 Questo, infine, è il periodo che va dall'effettiva promozione di Paolo
 Rossi fino a 
\family typewriter
FOREVER
\family default
.
 anche qui, per comodità, lo definiamo 
\family typewriter
NUOVO PERIODO
\end_layout

\begin_layout Standard
In pratica, il tempo di permanenza di Paolo Rossi in azienda viene scisso
 in 3 periodi: 
\end_layout

\begin_layout Standard
È da notare, infine, come le eventuali query eseguite su questa tabella
 ritorneranno un risultato pari ai record che, sia nel periodo di validità
 che nel periodo di transazione, comprendono l'istante specificato.
 
\end_layout

\begin_layout Standard
Ad esempio, se si vuole sapere la situazione aziendale in data 10 luglio
 2014, si ottiene il seguente risultato:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="7">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
PERSONALE
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Dip
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Dipendente
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Grado
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luca Verdi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.07.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
10.06.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.02.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
11.01.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
15.07.2014
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
PERSONALE
\family default
 risultato della query di ricerca della situazione aziendale al 10 luglio
 2014
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Come è possibile vedere, la tabella presenta solo i primi due record, poichè
 non era ancora nota la decisione relativa alla promozione di Paolo Rossi.
 Notare come l'istante corrispondente al 10 luglio 2014 sia incluso, per
 ogni record, sia nel tempo di validità, sia nel tempo di transazione.
 Ciò significa che i record listati, alla data selezionata, erano validi
 e considerati tali.
\end_layout

\begin_layout Standard
Invece, se si volesse trovare la situazione aziendale al 20 agosto 2014,
 avremmo:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="7">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
PERSONALE
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Dip
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Dipendente
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Grado
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luca Verdi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.07.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
10.06.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.08.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
15.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
PERSONALE
\family default
 risultato della query di ricerca della situazione aziendale al 20 agosto
 2014
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Per concludere l'esempio, supponiamo che Luca Verdi voglia licenziarsi dalla
 ditta a fine anno 2014, perchè ha mal digerito la promozione di Paolo Rossi.
 Il suo contratto prevede che ne dia comunicazione due mesi prima, per cui
 il primo novembre consegna la lettera di dimissioni e viene inserito questo
 cambio di situazione.
 Il database verrà aggiornato nel seguente modo:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="7">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
PERSONALE
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Dip
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Dipendente
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Grado
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luca Verdi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.07.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
10.06.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.11.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.02.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
11.01.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
15.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.02.2009
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.08.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
15.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.08.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
15.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luca Verdi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.07.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2015
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.11.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
PERSONALE
\family default
 con tempo di validità e tempo di transazione: aggiornamento (Licenziamento
 Luca Verdi)
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Come è possibile vedere, sono state eseguite due sole operazioni, contro
 le tre di prima:
\end_layout

\begin_layout Itemize
È stato modificato il tempo di fine transazione per il record attivo di
 Luca Verdi, ponendo fine al periodo anteriore alla comunicazione delle
 dimissioni;
\end_layout

\begin_layout Itemize
È stato aggiunto un record che definisce il periodo transitorio, dalla comunicaz
ione alle dimissioni;
\end_layout

\begin_layout Standard
Non è stato ovviamente aggiunto nessun altro record indicante il nuovo periodo
 dopo la transizione, poichè Luca Verdi ha lasciato l'azienda.
\end_layout

\begin_layout Standard
Se al 7 gennaio 2015 si volesse controllare la situazione dell'azienda,
 si avrebbe la seguente tabella:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="7">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
PERSONALE
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Dip
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Dipendente
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Grado
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Tran_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Paolo Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.08.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
15.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
PERSONALE
\family default
 risultato della query di ricerca della situazione aziendale al 07 gennaio
 2015
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Come è possibile notare, la tabella ormai mostra solo il record di Paolo
 Rossi, poichè Luca Verdi ha ormai terminato il periodo di preavviso e ha
 lasciato l'azienda, diretto verso nuove occasioni.
\end_layout

\begin_layout Part
Database temporali: Applicazioni
\end_layout

\begin_layout Section
Questioni da risolvere
\end_layout

\begin_layout Subsection
La definizione di 
\family typewriter
NOW
\end_layout

\begin_layout Standard
I database temporali e le tabelle con tempo di validità, molto spesso, sono
 facili da comprendere perchè adottano uno stile di rappresentazione dei
 dati che è molto simile all'interpretazione naturale: basti pensare ai
 metodi di rappresentazione dei periodi, che sono ben quattro ma di cui
 solo due (chiuso/chiuso e chiuso/aperto) hanno largo utilizzo, proprio
 perchè sono più naturali agli occhi degli utenti, e ciò aiuta a diminuire
 gli errori dovuti a complesse interpretazioni nell'inserimento dei dati.
 Tuttavia, se si vuole avere un approccio teorico e formale a questa materia,
 molte cose che sembrano a prima vista naturali diventano improvvisamente
 prive di senso: un esempio è dato dalla rappresentazione dei periodi che
 comprendono l'istante attuale, in altre parole i periodi correntemente
 validi.
 La rappresentazione classica, e presente in gran parte delle implementazioni,
 consiste nel rappresentare l'istante di fine dei record ancora validi con
 un istante molto protratto nel tempo.
 Ciò se analizzato secondo logica, appare di facile comprensione: se un
 record è valido ora, non si sa quando cesserà di esserlo, e quindi la sua
 validità potrebbe potenzialmente estendersi all'infinito.
 Tuttavia, da un punto di vista formale, tutto ciò non rispecchia la realtà:
 si può tranquillamente supporre, soprattutto nel caso i record rappresentino
 delle persone, che tra poche decine di anni tutti i record non saranno
 più validi (ovviamente perchè la vita degli esseri umani non ha una durata
 molto più estesa), ma la tabella rispecchia l'esatto contrario.
 Purtroppo, non esistono metodi precisi per rappresentare il concetto di
 "adesso" (in SQL, 
\family typewriter
NOW
\family default
), senza causare difficoltà formali di interpretazione, ma esistono tre
 metodi diversi, ognuno con i propri pro e contro:
\end_layout

\begin_layout Itemize
Rappresentazione dei record validi con 
\family typewriter
NULL
\family default
:
\end_layout

\begin_layout Itemize
Rappresentazione dei record validi con un istante molto indietro nel tempo;
\end_layout

\begin_layout Itemize
Rappresentazione dei record validi con un istante molto avanti nel tempo.
\end_layout

\begin_layout Subsubsection

\family typewriter
NULL
\end_layout

\begin_layout Standard
La definizione dei record validi con 
\family typewriter
NULL
\family default
 si ottiene non inserendo data di fine validità del record.
 Questo potrebbe sembrare il metodo più efficace, poichè per trovare i record
 validi basterebbe scrivere la seguente condizione WHERE:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

[...]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

WHERE Data_Fine IS NULL
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

[...]
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Condizione WHERE per ricerca record attualmente validi: NULL
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Nella realtà questo causa diversi problemi, sia con gli utenti che con il
 sistema in sè: la data 
\family typewriter
NULL
\family default
, infatti, può essere motivo di confusione di un utente, in quanto non è
 ciò che egli si aspetta parlando di tempo.
 Inoltre, SQL e molti DBMS gestiscono 
\family typewriter
NULL
\family default
 in maniera molto differente dalle date normali (ad esempio, ogni confronto
 con un valore 
\family typewriter
NULL
\family default
 per SQL restituisce il risultato 
\family typewriter
false
\family default
) per cui c'è il rischio che vengano persi dati anche importanti per via
 di problemi intrinsechi nella gestione dei dati stessi.
 
\end_layout

\begin_layout Subsubsection
Istanti indietro nel tempo
\end_layout

\begin_layout Standard
Per registrare dati secondo questo metodo, è necessario scegliere un istante
 opportunamente lontano nel tempo, da inserire sempre nel campo di fine
 dei record ancora validi.
 Supponendo che la data prescelta sia il 01 gennaio 1900 (
\family typewriter
1900-01-01
\family default
) si ha una condizione WHERE come segue:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

[...]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

WHERE Data_Fine = DATE '1900-01-01'
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

[...]
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Condizione WHERE per ricerca record attualmente validi: istanti indietro
 nel tempo
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Tra i vantaggi di questo metodo vi è il fatto che, se nelle istruzioni SELECT
 effettuate i dati vengono ordinati per istante di fine, i record attualmente
 validi sono in cima alla lista, e ciò può essere un enorme pregio soprattutto
 se il database è molto popolato.
 Tra i difetti vi è il fatto che l'istante scelto non può essere desunto
 a priori, in quanti molti DBMS hanno una data di inizio del tempo che varia
 anche di molti anni, per cui è necessario scegliere un valore facile da
 ricordare, ma comunque arbitrario, che a parità di sistemi (e di dati memorizza
ti) potrebbe essere molto diverso.
\end_layout

\begin_layout Subsubsection
Istanti avanti nel tempo
\end_layout

\begin_layout Standard
Come anticipato, sono la soluzione più utilizzata, poichè sono più aderenti
 al pensare comune (se non si sa la "scadenza" di un record, lo si suppone
 valido fino all'infinito).
 In questo modo, supponendo una data massima pari al 31 dicembre 9999 (
\family typewriter
9999-12-31
\family default
) sono possibili due tipi di condizioni WHERE, una che seleziona direttamente
 la data finale:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

[...]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

WHERE Data_Fine = DATE '19999-12-31'
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

[...]
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Condizione WHERE per ricerca record attualmente validi: istanti avanti nel
 tempo
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
e un'altra che, in maniera più naturale, utilizza l'istante attuale per
 discriminare i record validi:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

[...]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

WHERE Data_Inizio <= NOW
\end_layout

\begin_layout Plain Layout

  AND NOW < Data_Fine
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

[...]
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Condizione WHERE per ricerca record attualmente validi: istante attuale
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
I vantaggi sono evidenti: anche se non si conosce l'istante preciso in cui
 il proprio DBMS o sistema fissa la fine del tempo, è possibile effettuare
 comunque delle query che si basano effettivamente, al contrario delle altre
 metodologie, sull'istante attuale: infatti, mentre gli altri metodi ricercano
 dati ancora non "formalmente conclusi", questo ricerca dati che valgono
 esattamente ora.
 Come detto nell'introduzione, questo metodo nonostante sia il più usato
 è ben lontano da essere formalmente corretto, ma è quello che permette
 una rappresentazione dei dati, e una loro successiva interrogazione, più
 simile per linguaggio e metodologia a quella utilizzata nel parlare comune,
 e ciò, anche se può sembrare banale, ha una importanza determinante.
\end_layout

\begin_layout Subsection
La chiave primaria
\end_layout

\begin_layout Standard
La chiave primaria, per definizione, è un campo (o gruppo di campi) il cui
 valore identifica univocamente il record a cui sono associati: basti pensare
 ai codici dei dipendenti, o alla combinazione codice dipendente e settore
 aziendale.
 In una tabella non temporale, questi campi sono perfetti candidati per
 diventare chiavi primarie: infatti il codice dipendente è univoco, e molto
 spesso viene incrementato automaticamente, per cui non esiste il rischio
 che due dipendenti, in tempi diversi, abbiano la stessa chiave identificativa.
 Anche sulle operazioni di inserimento o modifica, il problema non si pone,
 poichè si va a modificare l'unica riga interessata, senza alcun rischio.
\end_layout

\begin_layout Standard
Per quanti riguarda i database temporali, invece, definire una chiave primaria
 non è così semplice: il problema è da imputare alla particolare conformazione
 di queste tabelle: accettando il tempo come discriminante principale dei
 record (definendo, come spiegato prima, tempo di validità e di transazione),
 e necessitando di particolari politiche di inserimento e cancellazione
 per garantire il ripristino di uno stato precedente del sistema, capita
 spesso che sia necessario "duplicare" alcuni record per variazioni dei
 dati in essi contenuti.
 Questa duplicazione genera spesso righe simili alle originali, causando
 una duplicazione della chiave primaria stessa, e l'impossibilità dell'inserimen
to.
 In questo caso, non esiste una soluzione universale, perchè dipende da
 ciò che nella tabella vuole essere rappresentato.
 Supponiamo di avere una tabella 
\family typewriter
RISORSE
\family default
 che gestisca il personale, che abbia come chiave primaria il codice del
 dipendente (
\family typewriter
Cod_Dip
\family default
) e il suo settore di appartenenza (
\family typewriter
Settore
\family default
), completa dei dati che si vogliono salvare (che in questo caso non hanno
 particolare rilevanza) e da una coppia di istanti che vogliono rappresentare
 il tempo di validità del record (che verranno chiamati 
\family typewriter
Data_In
\family default
 e 
\family typewriter
Data_Fi
\family default
).
 In ogni caso, la coppia di chiavi primarie già esistente non è sufficiente,
 perchè nell'eventualità di rinnovo del contratto andrebbe inserita una
 nuova riga, con un nuovo tempo di validità, che avrebbe uguale 
\family typewriter
Cod_Dip
\family default
 e uguale 
\family typewriter
Settore
\family default
, rendendo impossibile l'inserimento.
 Allo stesso tempo, inserire un identificativo indipendente (ad esempio,
 un semplice identificatore progressivo del numero di riga, che quindi non
 avrà mai duplicati) può fornire una soluzione del problema solo apparente,
 poichè sarebbe comunque possibile aggiungere righe esattamente uguali tra
 loro a meno del codice appena menzionato, e ciò, per avere una tabella
 che garantisca la robustezza dei dati, non è tollerabile.
 La soluzione generale da percorrere, nel caso di tabelle temporali, è sempre
 quella di aggiungere uno o entrambi i campi data, in modo da rendere possibile
 l'inserimento di righe con lo stesso 
\family typewriter
Cod_Dip
\family default
 e 
\family typewriter
Settore
\family default
, e allo stesso tempo di rendere impossibile la duplicazione di record con
 gli stessi intervalli, perchè essendo già presenti nel sistema non avrebbero
 alcuna utilità.
 Nonostante queste premesse, in certi casi, il semplice tempo può non essere
 sufficiente: nel caso in cui un dipendente non possa essere presente in
 più di un settore, ad esempio per motivi contrattuali, questo tipo di chiavi
 primarie non è sufficiente perchè, al contrario dei primi casi, è addirittura
 troppo poco restrittivo.
 Infatti, se prima veniva limitato l'inserimento di righe lecite sia dal
 punto di vista tecnico che interpretativo, ora verrebbe permesso l'inserimento
 di righe che sono lecite solo in termini tecnici, lasciando spazio, ad
 esempio, a una serie di possibili problemi burocratici.
 
\end_layout

\begin_layout Standard
Per risolvere in maniera efficace il problema, è necessario ricorrere a
 quelle che sono definite chiavi primarie sequenziali.
 Il loro significato è molto simile a quello che hanno le interrogazioni
 sequenziali, che sono valide in ogni momento del tempo: infatti, le chiavi
 primarie sequenziali forniscono un identificativo di record che garantisce
 la sua unicità in ogni momento del tempo.
 In questo modo viene scongiurato il rischio che righe uguali, a meno dei
 tempi di inizio e fine, possano essere sempre (o mai) inserite.
 SQL viene in aiuto per risolvere questo problema, con il costrutto 
\family typewriter
ASSERTION
\family default
, che permette di impostare dei criteri a livello di schema, in modo quindi
 da porli validi nel confronti dell'intera tabella.
 La sintassi base è la seguente:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

CREATE ASSERTION <nome assertion>
\end_layout

\begin_layout Plain Layout

CHECK <condizione da provare>
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Struttura base del costrutto 
\family typewriter
ASSERTIONS
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Che, applicata alla tabella ipotizzata all'inizio, potrebbe essere:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

CREATE ASSERTION chiave_primaria
\end_layout

\begin_layout Plain Layout

CHECK (
\end_layout

\begin_layout Plain Layout

  NOT EXISTS (
\end_layout

\begin_layout Plain Layout

    SELECT * FROM RISORSE R1
\end_layout

\begin_layout Plain Layout

    WHERE 1 < ( 
\end_layout

\begin_layout Plain Layout

       SELECT COUNT (Cod_Dip) FROM RISORSE R2
\end_layout

\begin_layout Plain Layout

       WHERE R1.Cod_Dip = R2.Cod_Dip 
\end_layout

\begin_layout Plain Layout

       AND R1.Settore = R2.Settore
\end_layout

\begin_layout Plain Layout

       AND R1.Data_In < R2.Data_Fi 
\end_layout

\begin_layout Plain Layout

       AND R1.Data_Fi < R2.Data_In 
\end_layout

\begin_layout Plain Layout

       )
\end_layout

\begin_layout Plain Layout

  )
\end_layout

\begin_layout Plain Layout

  AND NOT EXISTS (
\end_layout

\begin_layout Plain Layout

    SELECT * FROM RISORSE
\end_layout

\begin_layout Plain Layout

    WHERE Cod_Dip IS NULL 
\end_layout

\begin_layout Plain Layout

    AND Settore IS NULL)
\end_layout

\begin_layout Plain Layout

  )
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Struttura base del costrutto 
\family typewriter
ASSERTION
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
In questo modo, si garantisce che per ogni record inserito non ne esista
 un altro con dati uguali e periodo in sovrapposizione, e che allo stesso
 tempo non sia possibile inserire alcun 
\family typewriter
NULL
\family default
 nei campi che hanno un ruolo nel determinare l'unicità del record (in questo
 caso 
\family typewriter
Cod_Dip
\family default
 e 
\family typewriter
Settore
\family default
).
 Questo costrutto sembra molto simile alla semplice dichiarazione di chiave
 primaria con quattro campi (
\family typewriter
Cod_Dip
\family default
, 
\family typewriter
Settore
\family default
, 
\family typewriter
Data_In
\family default
 e 
\family typewriter
Data_Fi
\family default
), ma c'è molto di più di tutto ciò: infatti, mentre con la chiave primaria
 poc'anzi ipotizzata è possibile, tramite una anche minima modifica dei
 tempi, ottenere record quasi totalmente sovrapposti (e quindi non leciti),
 questa 
\family typewriter
ASSERTION
\family default
 non permette ciò, eseguendo un controllo approfondito su ogni record della
 tabella.
 
\end_layout

\begin_layout Standard
Questo metodo, in SQL-2011, può essere evitato usando due costrutti di nuova
 introduzione che svolgono lo stesso lavoro in molte meno righe di codice,
 e quindi demendando la gestione al sistema piuttosto che all'utente, rendendo
 il tutto molto più sicuro ed efficiente.
 Questi costrutti sono PERIOD e un nuovo metodo di definizione delle chiavi
 primarie, che verrà trattato nella sezione 7.
 
\end_layout

\begin_layout Subsection
La questione dell'unicità
\end_layout

\begin_layout Standard
È stata appena trattata la questione della chiave primaria, che come è noto
 garantisce che i campi da essa coperti siano contemporaneamente non nulli
 e unici.
 Questa interpretazione fa capire che esiste un altro modo per ottenere
 lo stesso ruolo della chiave primaria, utilizzando due costrutti molto
 diffusi: 
\family typewriter
NOT NULL
\family default
 e 
\family typewriter
UNIQUE
\family default
.
\end_layout

\begin_layout Standard
Anche in questo caso, definire cosa sia "unico", o, al contrario, quali
 siano i criteri per definire un record un duplicato di un altro, non è
 cosa facile.
 Mentre nelle tabelle non temporali è sufficiente valutare se tutti i campi
 di due record sono equivalenti tra loro, nelle tabelle temporali ciò non
 sempre è sufficiente, poichè esistono diverse varianti di duplicazione,
 alcune ammesse e alcune, invece, da evitare:
\end_layout

\begin_layout Itemize
Duplicazione da equivalenza di valori, un caso particolare di duplicazione
 che consiste nell'equivalenza, in due record, di tutti i valori a meno
 dei campi di tempo di validità.
 È l'unico tipo di duplicazione ammessa in un sistema di database temporali.
 Le duplicazioni successive presumono sempre l'esistenza di questo tipo
 di duplicazione, e hanno differenze solo nell'entità dei campi tempo;
\end_layout

\begin_layout Itemize
Duplicazione sequenziale, come sopra con la differenza che i periodi dei
 due record, definiti dai campi di tempo, sono sovrapposti (quindi sono,
 a qualche istante, esatti duplicati);
\end_layout

\begin_layout Itemize
Duplicazione corrente, variante della duplicazione sequenziale dove i record
 sono duplicati all'istante attuale.
\end_layout

\begin_layout Itemize
Duplicazione non sequenziale, con lo stesso valore della duplicazione non
 temporale, dove quindi i record sono equivalenti sia in dati, che in periodo
 di tempo.
 
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="4">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
PROGETTI
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Dip
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Grado
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.07.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2006
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2007
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2012
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2007
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2012
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2012
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2007
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella generica 
\family typewriter
PROGETTI
\family default
 con esempi di duplicazione di record
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Per fare un esempio, supponiamo che la tabella appena descritta rappresenti
 la situazione di alcuni progetti interni a una azienda, in cui un dipendente
 può partecipare per un periodo di tempo variabile.
 In questo caso, tutte le righe sono duplicati da equivalenza di valori,
 poichè al netto dei campi di tempo i valori sono esattamente gli stessi.
 Entrando più nello specifico, la prima riga non presenta nessun problema
 di duplicazione, poichè si tratta di un periodo di tempo che non ha sovrapposiz
ioni.
 Il secondo e il terzo record, invece, sono un esempio di duplicazione non
 sequenziale: in questo caso, infatti, tutti i campi sono uguali tra loro,
 e quindi si ha un duplicato che nella maggior parte dei casi non è accettato,
 a differenza degli altri che, a seconda di ciò che la tabella vuole rappresenta
re, potrebbero essere invece tollerati.
 Gli ultimi due record, infine, sono un esempio di due tipi di duplicazione.
 Prima di tutto, sono un esempio di duplicazione sequenziale: i record sono
 già duplicati da equivalenza di valori, ma hanno anche periodi che si sovrappon
gono tra loro.
 La loro relazione, però, non è finita qui: infatti, dato che i record stessi
 sono validi anche all'istante attuale, sono considerati anche duplicati
 correnti.
 Come detto prima, non essendoci particolari limitazioni al numero di progetti
 in cui un dipendente può far parte, possono essere tollerati anche duplicati
 sequenziali e correnti, oltre ovviamente a quelli con equivalenza di valori,
 che sono una costante ricorrente in tutti i sistemi temporali.
 Nulla vieta, però, di introdurre criteri più stringenti per accettare i
 record: in questo caso cambia solo la gestione degli stessi, ma la definizione
 formale rimane la medesima.
 Più nello specifico, i duplicati seguono questa tabella di implicazioni
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Sequenziali
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Non sequenziali
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Correnti
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Equivalenti
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Sequenziali
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
X
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
X
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Non sequenziali
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
X
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
X
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
X
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Correnti
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
X
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
X
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
X
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Equivalenti
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
X
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella di implicazione dei vari tipi di duplicazione
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
La tabella va letta nel modo "riga implica colonna".
 In questo caso:
\end_layout

\begin_layout Itemize
se una duplicazione è sequenziale, implicherà sicuramente se stessa, e l'equival
enza di valori (che, ricordiamo, è condizione comune a tutti i tipi di duplicazi
one).
 
\end_layout

\begin_layout Itemize
Una duplicazione non sequenziale, che rappresenta record assolutamente identici
 tra loro, implicherà oltre a se stessa e l'equivalenza di valori, anche
 la duplicazione sequenziale, poichè una coppia di record con tempi identici
 ha, ovviamente, il periodo sovrapposto (in questo caso esattamente uguale).
 
\end_layout

\begin_layout Itemize
Le duplicazioni correnti implicano, oltre a loro stesse e l'equivalenza
 di valori, anche le duplicazioni sequenziali poichè rappresentano un caso
 particolare di queste ultime.
\end_layout

\begin_layout Itemize
Infine, le duplicazioni con valore equivalente implicano solamente loro
 stesse, poichè non considerano in alcun modo il tempo, che invece è considerato
 da tutte le altre duplicazioni.
\end_layout

\begin_layout Standard
Il metodo per risolvere queste duplicazioni, qualora ci sia il bisogno di
 gestirle, non è molto diverso da quello utilizzato con le chiavi primarie.
 Infatti, è sufficiente utilizzare i costrutti 
\family typewriter
ASSERTION 
\family default
e CHECK, e nello specifico proprio quello listato nell'Algoritmo 9, per
 ottenere con minime modifiche i criteri che si vogliono applicare.
\end_layout

\begin_layout Subsection
Integrità referenziale
\end_layout

\begin_layout Standard
Come è facile ipotizzare, visti i due paragrafi precedenti, anche le regole
 di integrità referenziale hanno diverse gestioni a seconda che le due tabelle
 oggetto di relazione siano entrambe non temporali, una temporale e una
 non temporale, oppure entrambe temporali.
 
\end_layout

\begin_layout Subsubsection
Due tabelle non temporali
\end_layout

\begin_layout Standard
Se le due tabelle sono entrambe non temporali, allora è sufficiente utilizzare
 la sintassi consueta, che è la seguente:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

[...]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

FOREIGN KEY (P_Id) REFERENCES Persons(P_Id)
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

[...]
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Struttura base del costrutto 
\family typewriter
FOREIGN KEY
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Una tabella temporale e una non temporale
\end_layout

\begin_layout Standard
Se la tabella a cui collegarsi è non temporale, allora non ci sono particolari
 accorgimenti da utilizzare, ed è sufficiente procedere come nel punto precedent
e.
 Infatti, la tabella non temporale viene generalmente considerata come una
 tabella in cui i dati non sono legati al tempo, e quindi non cambiano in
 funzione di esso.
 Quindi, si può trattare la relazione in oggetto come se entrambe le tabelle
 fossero non temporali.
\end_layout

\begin_layout Standard
Se invece la situazione è opposta (e quindi la tabella di destinazione è
 temporale, mentre la tabella di origine non lo è) la relazione dipende
 da ciò che serve: se si vuole una interpretazione non temporale, corrente
 (cioè all'istante attuale) oppure sequenziale (cioè valida in ogni punto
 del tempo).
 Nel primo caso, la relazione si crea semplicemente considerando le due
 tabelle come non temporali, e quindi applicando il normale costrutto SQL.
 Nel secondo caso, la relazione si ottiene collegando il il record della
 tabella non temporale al record (o ai record) che in questo momento sono
 validi.
 Nel terzo e ultimo caso, bisogna definire il significato di "in ogni momento
 del tempo", nei confronti di una tabella nontemporale, e quindi non dipendente
 dal tempo.
 Le interpretazioni possibili sono due:
\end_layout

\begin_layout Itemize
Se la tabella registra la situazione attuale, "estendendo" in qualche modo
 il suo significato (poichè in realtà rappresenterebbe dati sempre validi)
 allora si utilizza il caso corrente, solo a parti invertite, controllando
 quindi che la tabella di destinazione abbia un record attuale;
\end_layout

\begin_layout Itemize
Se la tabella, come è il suo scopo effettivo, registra dati indipendenti
 dal tempo, allora è sufficiente utilizzare un consueto controllo di integrità
 referenziale, poichè la tabella di destinazione è legata alla tabella per
 criteri che non sono temporali, quindi saranno validi indipendentemente
 dallo stato attuale del record.
\end_layout

\begin_layout Subsubsection
Entrambe le tabelle sono temporali
\end_layout

\begin_layout Standard
Anche in questo caso, come nel caso dei duplicati e della chiave primaria,
 è necessario ricorrere al costrutto ASSERTION e CHECK, in modo da poter
 validare ad ogni momento l'esistenza della chiave primaria.
 Nello specifico, vanno verificate tre condizioni:
\end_layout

\begin_layout Itemize
Esiste un record valido nella tabella destinazione al momento in cui il
 record origine ha iniziato la validità;
\end_layout

\begin_layout Itemize
Esiste un record valido nella tabella destinazione al momento in cui il
 record origine finisce la validità;
\end_layout

\begin_layout Itemize
Non esistono "buchi" (cioè record che finiscono durante il periodo di validità
 della tabella origine e che non sono "estesi" da un altro record con validità
 maggiore e stessi dati) 
\end_layout

\begin_layout Standard
Se tutte queste condizioni sono verificate, allora i record di tabella origine
 e tabella destinazione possono essere uniti in una relazione di chiave
 primaria e chiave esterna.
 In ogni caso, è necessario effettuare un CHECK sulla tabella che controlli,
 dopo ogni operazione, che nessun record sia presente nella tabella e non
 abbia nessun record correlato o non valido nella tabella destinazione.
\end_layout

\begin_layout Subsection
L'importanza di saper posticipare
\end_layout

\begin_layout Standard
Nelle applicazioni più sofisticate di SQL, del quale i database temporali
 sono un esempio, difficilmente a una operazione corrisponde solo una query
 eseguita sul sistema: molto spesso capita che una operazione apparentemente
 semplice come un UPDATE possa causare notevoli modifiche in una tabella.
 Immaginiamo una tabella con tempo di transazione, che per garantire la
 possibilità di ripristino del database in qualsiasi momento del passato
 ha bisogno di almeno due operazioni per ogni singolo UPDATE effettuato:
 se le ASSERTIONS o i vincoli di integrità referenziale agissero subito
 dopo ogni singola query, le operazioni che andrebbero a buon fine sarebbero
 molto poche.
 Se infatti il sistema deve essere perfettamente coerente alla fine della
 transazione (un insieme di query che ha la possibilità di essere annullato
 se una delle operazioni che lo compongono ha qualche problema), non è necessari
amente così nella maggior parte delle query intermedie.
 Per risolvere questo problema, si possono utilizzare le parole chiave 
\family typewriter
DEFERRABLE INITIALLY DEFERRED
\family default
, che non fanno altro che imporre i controlli di integrità referenziale,
 oppure le assertion, alla fine della transazione presa in esame.
 In questo modo, ad esempio, sarà possibile creare tabelle collegate tra
 loro senza la necessità di procedere con ordine dalle tabelle "libere"
 a quelle "legate", poichè i controlli verranno effettuati alla fine, senza
 riscontrare nessun errore critico.
\end_layout

\begin_layout Section
Gestione delle tabelle
\end_layout

\begin_layout Standard
Le tabelle, a seconda del loro tipo, presentano metodi di gestione (intesi
 come query eseguibili e concetti applicabili) molto diversi.
 Per quanto riguarda le tabelle con tempo di validità, che hanno come principale
 funzionalità quella di rappresentare i dati, verranno esaminati i costrutti
 SELECT e alcuni metodi per rendere efficienti le tabelle stesse, nonchè
 alcuni costrutti per modificare le tabelle (INSERT, UPDATE, DELETE) che
 verranno ripresi anche nei paragrafi successivi.
 Nelle tabelle con tempo di transazione, invece, verranno privilegiati i
 metodi utilizzati per mantenere la tabella coerente nel corso del tempo
 e delle modifiche, con alcuni accenni alle tecniche di ricostruzione di
 uno stato passato.
 Infine, nelle tabelle bitemporali, verranno esaminati principalmente gli
 aspetti delle operazioni eseguibili su di esse, che coniugano aspetti tipici
 delle tabelle con tempo di validità a concetti propri delle tabelle con
 tempo di transazione.
\end_layout

\begin_layout Subsection
Interrogazioni di tabelle
\end_layout

\begin_layout Subsubsection
Interrogazioni correnti
\end_layout

\begin_layout Standard
Una delle domande più comuni che ci si pone quando si tratta di ricavare
 dati da una tabella con tempo di validità è "cosa è valido in questo momento?".
 Tutte le query che rispondono a questa domanda sono dette interrogazioni
 correnti, poichè utilizzano come termine di paragone il momento attuale.
 Per avere una maggior chiarezza nell'esposizione degli esempi che seguono,
 riprendiamo qui la tabella 8, che rappresenta la residenza di alcuni cittadini,
 comprensiva di luogo di residenza e, appunto, tempo di validità:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.05.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
06.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 completa di tempo di validità
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Supponiamo di voler sapere quale sia l'attuale residenza di Giorgio Bianchi.
 Per far ciò, la query da eseguire è molto semplice, e si tratta solamente
 di effettuare una normale 
\family typewriter
SELECT
\family default
 ponendo nella clausola 
\family typewriter
WHERE
\family default
 il fatto che, nei record considerati, la data attuale (che riassumiamo
 con la parola chiave 
\family typewriter
NOW
\family default
) sia all'interno del periodo di validità:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT Luogo_Residenza
\end_layout

\begin_layout Plain Layout

FROM RESIDENZA
\end_layout

\begin_layout Plain Layout

WHERE Nome_Persona = 'Giorgio Bianchi'
\end_layout

\begin_layout Plain Layout

  AND Val_Start <= NOW
\end_layout

\begin_layout Plain Layout

  AND NOW < Val_End
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Interrogazioni correnti: "Dove abita ora Giorgio Bianchi?"
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Che restituisce il valore 
\family typewriter
Trento
\family default
.
 Ci sono tre aspetti che vale la pena sottolineare:
\end_layout

\begin_layout Itemize
In questo caso non è possibile utilizzare il costrutto BETWEEN, presente
 in SQL.
 Il motivo è da ricercarsi nella rappresentazione della tabella: essa infatti
 ha una rappresentazione chiuso/aperto, che significa che il tempo vale
 nell'istante di inizio ma non comprende l'istante di fine.
 BETWEEN, invece, copre entrambi gli estremi, quindi l'utilizzo di quel
 costrutto avrebbe inserito nel risultato anche le righe con tempo di fine
 uguale all'istante attuale, causando un errore.
 
\end_layout

\begin_layout Itemize
Un'altra cosa da notare è che con un semplice WHERE è possibile anche gestire
 il caso in cui i dati da ottenere siano presenti in tabelle diverse: infatti
 basta scrivere la terna di condizioni sopra utilizzata per ogni tabella
 aggiuntiva che viene presa in considerazione nella query.
\end_layout

\begin_layout Itemize
Infine, è da notare come sia necessario sostituire (o meglio, modificare)
 il valore Val_End nel caso non venga utilizzata la notazione in cui i record
 validi hanno istante di fine pari al più alto valore di data.
 Nel caso Val_End fosse NULL, oppure pari a una data nel passato, conviene
 modificare la query aggiungendo una condizione OR in cui si considera questa
 eventualità.
\end_layout

\begin_layout Subsubsection
Interrogazioni di stati passati
\end_layout

\begin_layout Standard
Le interrogazioni di stati passati sono molto simili a quelle che coinvolgono
 il valore NOW: l'unica differenza sta nel l'utilizzo di una data fissata,
 che viene appunto utilizzata al posto di NOW.
 In questo caso, per sapere dove Giorgio Bianchi abitava all'inizio del
 2001, avremo:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT Luogo_Residenza
\end_layout

\begin_layout Plain Layout

FROM RESIDENZA
\end_layout

\begin_layout Plain Layout

WHERE Nome_Persona = 'Giorgio Bianchi'
\end_layout

\begin_layout Plain Layout

  AND Val_Start <= DATE 2011-01-01
\end_layout

\begin_layout Plain Layout

  AND DATE 2001-01-01 < Val_End
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Interrogazioni di stati passati: "Dove abitava Giorgio Bianchi al 01 gennaio
 2001?"
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Che, in questo caso, restituisce 
\family typewriter
Lavis
\family default
.
 Anche qui ci sono alcuni aspetti da considerare, che sono gli stessi delle
 interrogazioni correnti spiegate nel paragrafo precedente.
\end_layout

\begin_layout Subsubsection
Interrogazioni sequenziali
\end_layout

\begin_layout Standard
Le interrogazioni sequenziali rispondono alla domanda "cosa è valido, o
 è stato valido, nel corso del tempo?" restituendo tutti i record che, attualmen
te o nel passato, hanno avuto il valore che viene specificato.
 Un esempio può essere dato dalla domanda "chi vive, o ha vissuto, a Trento,
 e quando?", che viene tradotta in SQL nel seguente modo:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT *
\end_layout

\begin_layout Plain Layout

FROM RESIDENZA
\end_layout

\begin_layout Plain Layout

WHERE Luogo_Residenza = 'Trento'
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Interrogazioni sequenziali: "Chi vive, o ha vissuto, a Trento, e quando?"
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
che restituiscono la seguente tabella:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.05.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 con lo storico degli abitanti di Trento
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
In questo caso, va notato come, per avere senso in termini pratici, la tabella
 debba assolutamente essere ordinata, altrimenti verrebbe meno la rappresentazio
ne del corso del tempo.
 Questo, evidentemente, è un esempio molto semplice, ma con lo stesso tipo
 di interrogazioni è possibile gestire anche tabelle molto più complesse.
 In questo caso, a causa dell'estrema semplicità della tabella, non sono
 presenti duplicati, ma va sottolineato come questi possano tranquillamente
 essere presenti, poichè nessun costrutto è stato utilizzato per limitare
 i duplicati.
 Per far ciò, si potrebbe pensare al costrutto DISTINCT, ma anche questo
 sistema ha diversi contesti di applicazione, e quindi deve essere valutato
 caso per caso.
\end_layout

\begin_layout Subsubsection
Interrogazioni non sequenziali
\end_layout

\begin_layout Standard
Le interrogazioni non sequenziali, infine, sono di tipi di interrogazioni
 che possono assomigliare molto a quelle sequenziali, con la differenza
 che il tempo in questo caso non ha significato.
 Un esempio è la richiesta "Elenca i nomi di chi, in qualche momento, è
 stato residente a Trento".
 La query è la seguente:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT Nome_Persona
\end_layout

\begin_layout Plain Layout

FROM RESIDENZA
\end_layout

\begin_layout Plain Layout

WHERE Luogo_Residenza = 'Trento'
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Interrogazioni non sequenziali: "Chi vive, o ha vissuto, a Trento?"
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
ottenendo come risultato la tabella:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="1">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 con i nomi di chi ha abitato a Trento
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Il risultato, considerando la singola colonna, è uguale a quello della interroga
zione sequenziale, ma il significato è profondamente diverso.
 Infatti, se con le interrogazioni sequenziali si può operare sulla base
 del tempo, tracciando un ipotetico grafico della popolazione di Trento,
 con questa query si ottengono dati di più difficile utilizzo, poichè so
 solo che le persone elencate hanno vissuto a Trento, ma non riesco a dire
 quando.
 Per assurdo, potrebbero aver vissuto in città nello stesso periodo, in
 perodi distinti ma vicini, o addirittura a distanza di anni.
\end_layout

\begin_layout Subsubsection
Gestione dei duplicati
\end_layout

\begin_layout Standard
Come accennato poco fa, per rimuovere i duplicati dalle tabelle con tempo
 di validità è possibile usare il costrutto DISTINCT.
 Tuttavia, tale costrutto ha funzioni diverse in base al tipo di duplicati
 da rimuovere.
 DISTINCT, infatti, può essere utile per rimuovere duplicati non sequenziali,
 con valori equivalenti e correnti.
\end_layout

\begin_layout Standard
Per i duplicati non sequenziali, cioè record perfettamente identici anche
 nei campi di validità, si può utilizzare il metodo consueto:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT DISTINCT *
\end_layout

\begin_layout Plain Layout

FROM RESIDENZA
\end_layout

\begin_layout Plain Layout

WHERE Luogo_Residenza = 'Trento'
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Eliminazione di duplicati non sequenziali
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Va detto però che difficilmente ci sarà il bisogno di utilizzare questo
 metodo, perchè i duplicati non sequenziali non apportano nessun beneficio
 alla tabella, per cui si può direttamente prevenire il loro inserimento.
\end_layout

\begin_layout Standard
Per i duplicati con valori equivalenti, invece, non è più possibile basare
 il DISTINCT su tutti i campi, poichè non saranno mai tutti uguali (per
 definizione i duplicati con valori equivalenti sono uguali in tutti i campi
 tranne quelli di validità).
 Per risolvere il problema, bisogna limitare il DISTINCT ai soli campi uguali
 tra loro:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT DISTINCT Id_Persona, Nome_Persona
\end_layout

\begin_layout Plain Layout

FROM RESIDENZA
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Eliminazione di duplicati con valori equivalenti
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
I duplicati correnti, invece, richiedono una minima modifica, poichè si
 tratta solo di limitare la SELECT ai campi attualmente validi, per cui:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

SELECT DISTINCT Id_Persona, Nome_Persona
\end_layout

\begin_layout Plain Layout

FROM RESIDENZA
\end_layout

\begin_layout Plain Layout

WHERE Val_End = '9999-12-31'
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Eliminazione di duplicati correnti
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
In questo modo è possibile gestire la maggior parte dei duplicati, ottenendo
 dei risultati maggiormente leggibili e interpretabili.
 Questo, però, non copre tutti i casi possibili: esistono infatti anche
 i duplicati sequenziali, che non sono altro che record che hanno valori
 equivalenti, ma periodi di validità che si sovrappongono per un certo intervall
o.
 Per risolvere anche questo problema, non basta un DISTINCT: è necessario
 procedere all'unione dei record simili, in modo da renderli più omogenei
 e ridurne al contempo il numero.
 Questo procedimento si chiama, in inglese, 
\family typewriter
coalescing
\family default
, che in italiano si può tradurre come 
\family typewriter
fusione
\family default
.
\end_layout

\begin_layout Subsubsection
Fusione di record simili
\end_layout

\begin_layout Standard
La fusione di record simili è l'ultimo dei principali metodi di rappresentazione
 dei dati in una tabella con tempi di validità, e consiste semplicemente
 nell'unire record con particolari caratteristiche, in modo da diminuire
 il numero di essi all'interno della tabella originaria.
 Per spiegare meglio come funziona questo meccanismo, riprendiamo come esempio
 la tabella 20, che elencava diversi tipi di duplicazione:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="4">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
PROGETTI
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Dip
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Grado
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.07.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2006
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2007
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2012
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2007
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2012
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2012
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2007
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella generica 
\family typewriter
PROGETTI
\family default
 con esempi di duplicazione di record
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Come è già stato evidenziato nei paragrafi precedenti, il secondo e il terzo
 record sono duplicati non sequenziali, mentre il quarto e il quinto record
 sono sia duplicati sequenziali, che duplicati correnti.
 La fusione si può facilmente effettuare, ad esempio, tra il terzo e il
 quarto record, che hanno periodi esattamente coincidenti (come il costrutto
 
\family typewriter
MEET
\family default
 dell'algebra di Allen) e che quindi possono essere facilmente uniti per
 rappresentare, in un solo record, l'intero periodo che va dal primo gennaio
 2007 a un tempo infinito, significando quindi che lo stesso record è tuttora
 valido.
 Tuttavia, non è detto che la fusione elimini i duplicati: infatti, con
 l'operazione appena effettuata, è stato sì eliminato il duplicato non sequenzia
le, ma è stato solo un effetto secondario della fusione, perchè il duplicato
 che prima era non sequenziale, ora è diventato sequenziale.
 La fusione, per questo motivo, può essere considerata indipendente dall'elimina
zione dei duplicati: una tabella con duplicati eliminati non è detto che
 non necessiti di procedure di fusione, allo stesso modo in cui una tabella
 si può fondere senza rimuovere i duplicati, oppure eliminandone alcuni
 e introducendone altri, come in questo caso.
\end_layout

\begin_layout Standard
Esistono due metodi di fusione:
\end_layout

\begin_layout Itemize
Con eliminazione di duplicati
\end_layout

\begin_layout Itemize
Con mantenimento dei duplicati
\end_layout

\begin_layout Standard
Il primo metodo non fa altro che eliminare tutti i duplicati, lasciando
 solo record con valori equivalenti che hanno periodi di validità distinti
 tra loro (cioè che non si sovrappongono e che non sono la continuazione
 uno dell'altro), il secondo invece mantiene la correttezza temporale della
 tabella, limitandosi a unire solo i record che sono la continuazione uno
 dell'altro, poichè anche secondo logica si possono considerare un solo
 elemento.
\end_layout

\begin_layout Standard
Anche in questo caso, la differenza sembra molto labile, ma i risultati
 invece dimostrano l'esatto contrario.
 Infatti, se la tabella di cui sopra viene fusa eliminando tutti i duplicati
 si ha solamente un record di risultato, che ha come periodo di validità
 dal 01 luglio 2015 all'infinito.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="4">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
PROGETTI
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Dip
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Grado
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.07.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2006
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2007
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella generica 
\family typewriter
PROGETTI
\family default
 dopo la fusione con eliminazione di duplicati
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Questo può essere utile ad esempio per capire le fasce di tempo in cui un
 dipendente è stato coinvolto in un progetto, indipendentemente dall'identificat
ivo del progetto stesso.
 Tuttavia, è fin troppo generico nel caso si voglia sapere quando un dipendente
 è stato coinvolto in più di un progetto nello stesso istante.
 Per far ciò, viene in aiuto la seconda variante della fusione di record
 che unisce, come detto, solo i record che sono la continuazione uno dell'altro,
 più formalmente le coppie di record che hanno istante finale del primo
 uguale all'istante iniziale del secondo.
 In questo caso, la tabella risultante è la seguente:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="4">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
PROGETTI
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Dip
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Grado
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.07.2005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2006
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2007
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2012
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2007
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
01.01.2007
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella generica 
\family typewriter
PROGETTI
\family default
 dopo la fusione senza eliminazione di duplicati
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Questa conformazione della tabella ha il pregio di essere equivalente alla
 tabella originale in un modo particolare: se viene ricercato lo stato di
 una tabella ad una certa data, questa tabella restituirà lo stesso numero
 di duplicati presenti nella tabella originale, anche se potenzialmente
 di diverso tipo.
 In via del tutto casuale, questa tabella presenta esattamente gli stessi
 tipi di duplicati presenti nella tabella originaria, anche se gli stessi
 coinvolgono righe diverse.
 
\end_layout

\begin_layout Standard
Le due varianti hanno una ulteriore particolarità, che coinvolge il numero
 di tabelle che possono costituire un potenziale risultato: nel caso della
 fusione con eliminazione di tutti i duplicati, la tabella risultante può
 essere una sola, ma nel caso di presenza di duplicati non sequenziali (che,
 ricordiamo, sono duplicati composti da record uguali in tutto, anche nel
 periodo di validità) è possibile avere due risultati "diversi", poichè
 la fusione può prendere indifferentemente uno dei due record che compongono
 il duplicato non sequenziale, ottenendo quindi due risultati distinti in
 maniera formale, anche se assolutamente equivalenti in termini pratici.
\end_layout

\begin_layout Subsection
Modifica di tabelle
\end_layout

\begin_layout Standard
Essendo i database temporali una estensione, sotto certi aspetti, di quelli
 tradizionali, anche i costrutti di modifica (primariamente INSERT, UPDATE
 e DELETE) sono praticamente gli stessi.
 Tuttavia, sono presenti delle piccole varianti, in base al momento in cui
 queste operazioni vengono eseguite, e ciò ha influenza nei confronti dei
 dati coinvolti.
 Nello specifico, sono possibili tre tipi di modifiche:
\end_layout

\begin_layout Itemize
Modifiche correnti, che partono da 
\family typewriter
NOW
\family default
 e si sviluppano nel futuro;
\end_layout

\begin_layout Itemize
Modifiche sequenziali, che hanno un periodo arbitrario di validità rispetto
 alle modifiche correnti;
\end_layout

\begin_layout Itemize
Modifiche non sequenziali, che trattano il tempo come un qualsiasi altro
 campo, non attribuendogli significato.
\end_layout

\begin_layout Subsubsection
Modifiche correnti
\end_layout

\begin_layout Standard
Le modifiche correnti sono il tipo più utilizzato di modifiche, che si traducono
 in operazioni che hanno un estremo del periodo di validità pari a 
\family typewriter
NOW
\family default
 e i cui effetti valgono solo nel futuro (ovviamente riferendosi al momento
 in cui queste modifiche sono effettuate).
 Anche i database tradizionali ammettono questo tipo di modifiche, poichè
 non essendoci alcun riferimento al tempo ogni alterazione del database
 ha effetto dal momento in cui viene salvata, e vale da quel momento nel
 futuro.
 Nella trattazione attuale verrà ipotizzato, per semplicità, che la tabella
 possa ammettere solo modifiche correnti, poichè la presenza di dati con
 validità che inizia e finisce nel futuro altererebbe i comportamenti delle
 operazioni che sono di seguito elencate.
 Comunque, alla fine di ogni paragrafo verranno presentati brevemente, dove
 applicabili, i passi da seguire per rendere questi meccanismi utilizzabili
 anche con record che hanno validità interamente futura, oppure con istante
 di fine non corrispondente a FOREVER.
\end_layout

\begin_layout Paragraph

\family typewriter
INSERT
\end_layout

\begin_layout Standard
Citando come esempio la tabella 
\family typewriter
RESIDENZA
\family default
, a più riprese utilizzata come dimostrazione, si può effettuare una modifica
 corrente, in questo caso un 
\family typewriter
INSERT
\family default
, supponendo che un nuovo soggetto, chiamato per semplicità Giulia Verdi,
 abbia iniziato a risiedere a Rovereto.
 Supponendo valida la residenza solo al momento dell'inserimento nel database,
 avvenuta il 03 agosto 2014 (concetto non troppo distante dalla realtà),
 è sufficiente lanciare il seguente comando 
\family typewriter
SQL
\family default
:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

INSERT INTO RESIDENZA
\end_layout

\begin_layout Plain Layout

VALUES 
\end_layout

\begin_layout Plain Layout

  (
\end_layout

\begin_layout Plain Layout

   3, 
\end_layout

\begin_layout Plain Layout

   'Giulia Verdi', 
\end_layout

\begin_layout Plain Layout

   'Rovereto', 
\end_layout

\begin_layout Plain Layout

   NOW, 
\end_layout

\begin_layout Plain Layout

   DATE '9999-12-31'
\end_layout

\begin_layout Plain Layout

  );
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Modifiche correnti: 
\family typewriter
INSERT
\family default
 temporale
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Ottenendo in questo modo il seguente risultato:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.05.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
06.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giulia Verdi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Rovereto
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.08.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 dopo l'arrivo di Giulia Verdi
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard

\family typewriter
INSERT
\family default
 è il costrutto che ha meno differenze tra i due tipi di database, poichè
 funziona esattamente allo stesso modo.
 Il metodo di inserimento, siano i record validi nel passato, nel presente
 o nel futuro, non ha nessuna variazione: l'unico problema da risolvere,
 nel caso vengano ammesse modifiche non solo correnti, va ricercato nelle
 chiavi: infatti, può capitare che il record che si vuole inserire sia un
 duplicato con valori equivalenti, oppure che si formino dei "buchi", ovvero
 dei periodi in cui nessun record è valido.
 Nel primo caso, è sufficiente non effettuare l'inserimento poichè significa
 che la riga che si sta per inserire è già presente, anche se con un periodo
 di validità diverso.
 Il secondo caso, per quanto possa essere perfettamente accettabile (pensiamo
 alla tabella 
\family typewriter
RESIDENZA
\family default
, se un soggetto va a risiedere fuori dal Trentino e poi vi ritorna), crea
 dei problemi di integrità referenziale, poichè verrebbero a crearsi i "buchi"
 poco fa menzionati.
 Una soluzione consiste nel "riempire questi buchi con valori non rilevanti
 ai fini della futura ricostruzione della tabella (basti pensare a valori
 
\family typewriter
NULL
\family default
 per Luogo_Residenza, che non cambiano la struttura e i valori validi nella
 tabella), ma che possono essere utilizzati per mantenere l'integrità referenzia
le.
\end_layout

\begin_layout Paragraph

\family typewriter
DELETE
\end_layout

\begin_layout Standard
Mentre l'inserimento non ha alcuna differenza rispetto a quello nelle tabelle
 tradizionali, salvo la necessità di specificare il tempo, per quanto riguarda
 le cancellazioni la situazione è un po' diversa: se nelle tabelle tradizionali
 ci si può affidare al costrutto 
\family typewriter
DELETE
\family default
, con gli effetti ben noti di eliminazione definitiva della riga o del gruppo
 di righe selezionato, nei database temporali un meccanismo del genere non
 esiste.
 Essendo assolutamente necessario mantenere gli stati passati della tabella
 per poter ripristinare la situazione reale in un dato momento, il 
\family typewriter
DELETE
\family default
 viene definito 
\family typewriter
DELETE
\family default
 logico e si configura come un semplice 
\family typewriter
UPDATE
\family default
, poichè per cancellare una riga è sufficiente renderla non più valida,
 e quindi fare esaurire nel passato tale validità.
 Nel caso della tabella 
\family typewriter
RESIDENZA
\family default
, supponiamo che Giorgio Bianchi lasci il Trentino diretto verso un'altra
 regione italiana.
 Ovviamente non è possibile cancellare la riga correntemente valida, nè
 tantomeno cancellare le righe che si riferiscono a questo soggetto, pena
 la perdita di tutto lo storico ad egli collegato.
 Per risolvere questo problema, visto che non è necessario tracciare la
 sua nuova destinazione di residenza, basta modificare la terza riga, quella
 attualmente valida, impostando un tempo di fine alla data di partenza,
 supponiamo il 04 agosto 2014:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

UPDATE RESIDENZA
\end_layout

\begin_layout Plain Layout

SET Val_End = NOW
\end_layout

\begin_layout Plain Layout

WHERE ID_Persona = '2'
\end_layout

\begin_layout Plain Layout

  AND Val_End = DATE '9999-12-31';
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Modifiche correnti: 
\family typewriter
DELETE
\family default
 temporale
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Il che risulta:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.05.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
06.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
04.08.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giulia Verdi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Rovereto
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.08.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 dopo la partenza di Giorgio Bianchi
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Da questo momento, nel caso si volesse sapere la situazione delle residenze
 in date future al 04 agosto, Giorgio Bianchi non sarebbe ovviamente presente.
 Rimarrebbe però correttamente listato nel caso si volesse trovare la situazione
 precedente alla sua data di partenza, cosa che con un database tradizionale
 sarebbe stato impossibile fare.
 
\end_layout

\begin_layout Standard
In questo caso, per rendere il costrutto valido anche nel caso generale,
 è necessario seguire questi passi:
\end_layout

\begin_layout Itemize
Per le righe che hanno validità iniziata nel passato e fine prevista nel
 futuro, modificare la fine della validità impostando 
\family typewriter
NOW
\family default
;
\end_layout

\begin_layout Itemize
Cancellare fisicamente (e non solo logicamente) le righe che iniziano nel
 futuro;
\end_layout

\begin_layout Standard
Questo è l'unico caso in cui le righe possono essere effettivamente cancellate:
 essendo le tabelle con tempo di validità lo specchio della realtà, non
 avrebbe senso avere record che finiscono ancora prima di iniziare, poichè
 non potranno mai divenire validi, per cui la cancellazione è un'operazione
 legittima.
\end_layout

\begin_layout Paragraph

\family typewriter
UPDATE
\end_layout

\begin_layout Standard
Come nel caso delle cancellazioni, anche i costrutti 
\family typewriter
UPDATE
\family default
 differiscono in base al tipo di database preso in esame: in un database
 tradizionale, un 
\family typewriter
UPDATE
\family default
 consiste semplicemente nell'aggiornamento della riga o del gruppo di righe
 preso in esame.
 Nei database temporali, invece, l'aggiornamento avviene con l'unione di
 due costrutti: un 
\family typewriter
DELETE
\family default
 logico, e un 
\family typewriter
INSERT
\family default
, entrambi menzionati nei paragrafi immediatamente precedenti.
 Nella tabella 
\family typewriter
RESIDENZA
\family default
, si può effettuare un 
\family typewriter
UPDATE
\family default
 considerando l'eventualità che Mario Rossi, da Trento, intenda spostarsi
 a Bolzano, in data 05 agosto 2014.
 In questo caso la query si compone prima dell'inserimento del nuovo record,
 che avrà periodo di validità da 
\family typewriter
NOW
\family default
 a 
\family typewriter
FOREVER
\family default
:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

INSERT INTO RESIDENZA
\end_layout

\begin_layout Plain Layout

SELECT DISTINCT 
\end_layout

\begin_layout Plain Layout

  ID_Persona, 
\end_layout

\begin_layout Plain Layout

  Nome_Persona, 
\end_layout

\begin_layout Plain Layout

  'Bolzano', 
\end_layout

\begin_layout Plain Layout

  NOW, 
\end_layout

\begin_layout Plain Layout

  DATE '9999-12-31'
\end_layout

\begin_layout Plain Layout

FROM RESIDENZA
\end_layout

\begin_layout Plain Layout

WHERE ID_Persona = 1
\end_layout

\begin_layout Plain Layout

  AND Val_End = DATE '9999-12-31'
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Modifiche correnti: 
\family typewriter
UPDATE
\family default
 temporale - Parte 1
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
E successivamente si completa la sequenza di operazioni effettuando il 
\family typewriter
DELETE
\family default
 logico:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

UPDATE RESIDENZA
\end_layout

\begin_layout Plain Layout

SET Val_End = NOW
\end_layout

\begin_layout Plain Layout

WHERE ID_Persona = 1
\end_layout

\begin_layout Plain Layout

  AND Val_Start < NOW
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Modifiche correnti: 
\family typewriter
UPDATE
\family default
 temporale - Parte 2
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
In questo modo la modifica del record è completa: viene preservata la situazione
 attuale fino al momento effettivo della modifica, dove vengono applicati
 i nuovi parametri, in sostanza scindendo il periodo di validità in due
 parti, dove la prima si riferisce alla situazione prima della modifica,
 e la seconda alla situazione immediatamente successiva.
 Il risultato, alla fine del procedimento, è il seguente:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
RESIDENZA
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome_Persona
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Luogo_Residenza
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_Start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Val_End
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.05.1984
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
05.08.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Lavis
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
06.03.1992
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giorgio Bianchi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Trento
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
20.07.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
04.08.2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giulia Verdi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Rovereto
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
03.08.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Bolzano
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
05.08.2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
31.12.9999
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
RESIDENZA
\family default
 dopo la partenza di Giorgio Bianchi
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
È bene notare che in questo caso, dove ovviamente ogni soggetto non può
 risiedere in più di un luogo contemporaneamente, i costrutti 
\family typewriter
DEFERRABLE
\family default
 visti in precedenza hanno un'importanza fondamentale: infatti, se l'ordine
 delle modifiche è quello listato, alla fine del primo 
\family typewriter
INSERT
\family default
 si assisterebbe a un errore dovuto ai controlli di coerenza e di unicità
 dei record secondo i criteri fissati per la tabella, che avrebbero evidenziato
 una duplicazione (in questo caso corrente) di un record, cosa non accettabile.
 Posticipando i controlli, invece, questo errore non viene rilevato perchè
 a fine elaborazione la tabella è interamente coerente.
 
\end_layout

\begin_layout Standard
L'ordine delle query non è rilevante: è infatti possibile effettuare l'
\family typewriter
UPDATE
\family default
 prima dell'
\family typewriter
INSERT
\family default
, avendo cura di modificare a dovere le condizioni nella clausola 
\family typewriter
WHERE
\family default
, che invertendo le istruzioni o non sarebbero più valide, o sarebbero troppo
 generiche, includendo più di un record.
 
\end_layout

\begin_layout Standard
Per rendere generale il procedimento di questa modifica, si devono seguire
 tre passi:
\end_layout

\begin_layout Itemize
Si inserisce una nuova riga, con i dati aggiornati, con validità da 
\family typewriter
NOW
\family default
 alla fine del periodo che ha 
\family typewriter
NOW
\family default
 tra gli istanti di validità;
\end_layout

\begin_layout Itemize
Si termina la riga corrente a 
\family typewriter
NOW
\family default
;
\end_layout

\begin_layout Itemize
Si modificano tutti i record che iniziano nel futuro, applicando le stesse
 modifiche del record attuale.
\end_layout

\begin_layout Subsubsection
Modifiche sequenziali
\end_layout

\begin_layout Standard
Mentre le modifiche correnti si riferiscono all istante 
\family typewriter
NOW
\family default
 e si propagano nel futuro, le modifiche sequenziali hanno un tempo di validità
 delimitato da un intervallo più o meno arbitrario, a seconda dei casi presi
 in esame, e tale tempo può svolgersi interamente nel passato, interamente
 nel futuro oppure "a cavallo" tra presente e futuro, comprendendo quindi
 anche l'istante 
\family typewriter
NOW
\family default
.
 
\end_layout

\begin_layout Paragraph

\family typewriter
INSERT
\end_layout

\begin_layout Standard
Un inserimento sequenziale può interpretarsi, nella realtà, come l'assunzione
 a tempo determinato di un dipendente.
 In questo caso, la query necessaria per l'inserimento, è la seguente:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

INSERT INTO PERSONALE
\end_layout

\begin_layout Plain Layout

VALUES 
\end_layout

\begin_layout Plain Layout

  (
\end_layout

\begin_layout Plain Layout

    4,
\end_layout

\begin_layout Plain Layout

    'Giulia Verdi,
\end_layout

\begin_layout Plain Layout

    3,
\end_layout

\begin_layout Plain Layout

    DATE '2014-01-09',
\end_layout

\begin_layout Plain Layout

	DATE '2016-01-01'
\end_layout

\begin_layout Plain Layout

  )
\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Modifiche correnti: 
\family typewriter
INSERT
\family default
 temporale
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
In questo caso si è aggiunto un periodo nel futuro: Giulia Verdi inizierà
 il proprio periodo lavorativo con l'inizio di settembre, e si sa già che
 il suo contratto avrà fine al termine del 2015.
 Per garantire che l'inserimento vada sempre a buon fine, rispettando quindi
 criteri di unicità e integrità referenziale, è necessario modificare la
 query sopra riportata, in modo da verificare i seguenti requisiti
\end_layout

\begin_layout Itemize
Non esistono duplicati nel periodo di validità della riga che si va a inserire;
\end_layout

\begin_layout Itemize
Esiste una riga nella tabella collegata all'inizio della validità;
\end_layout

\begin_layout Itemize
Esiste una riga nella tabella collegata alla fine della validità;
\end_layout

\begin_layout Itemize
Non esistono "buchi" durante il periodo di validità della riga da inserire;
\end_layout

\begin_layout Standard
Se tutte queste condizioni sono soddisfatte (e se la query prevede la verifica,
 tramite una condizione 
\family typewriter
WHERE
\family default
, di ognuna di esse), la riga, se verrà inserita, rispetterà sicuramente
 gli standard di unicità e integrità referenziale.
\end_layout

\begin_layout Paragraph

\family typewriter
DELETE
\end_layout

\begin_layout Standard
Come visto nelle modifiche correnti, l'operazione 
\family typewriter
DELETE
\family default
 non funziona quasi mai come è lecito aspettarsi: come detto, infatti, la
 cancellazione non è fisica, ma si effettua solo una "invalidazione" del
 record, che rimane quindi valido solo nel passato.
 Nel caso sequenziale, il discorso non è molto differente: ci sono ben quattro
 casi, contro l'unico delle modifiche correnti, ma rispettano tutti un procedime
nto generale: 
\end_layout

\begin_layout Itemize
Inserire la riga "vecchia" dalla fine del periodo di cancellazione fino
 alla fine naturale della validità del record;
\end_layout

\begin_layout Itemize
Aggiornare l'istante di fine all'inizio del periodo di cancellazione;
\end_layout

\begin_layout Itemize
Aggiornare l'istante di inizio alla fine del periodo di cancellazione;
\end_layout

\begin_layout Itemize
Cancellare fisicamente le righe completamente coperte dal periodo di applicabili
tà;
\end_layout

\begin_layout Standard
Ovviamente, non in tutti i casi conviene eseguire tutti i passi: in alcuni
 frangenti è sufficiente eseguire una parte di essi, e a volte addirittura
 solamente un passo.
 Basti pensare a una cancellazione di un record interamente coperto dal
 periodo di cancellazione.
 In questo caso, non ha senso eseguire i primi tre passi, ma è sufficiente
 eseguire l'ultimo ed eliminare fisicamente il record oggetto della cancellazion
e.
 Nel caso di una cancellazione con periodo completamente all'interno di
 un record, è necessario eseguire il primo e il secondo passo, e così via.n
 Come le modifiche correnti, questo è l'unico caso in cui i record vengono
 effettivamente cancellati.
 
\end_layout

\begin_layout Paragraph

\family typewriter
UPDATE
\end_layout

\begin_layout Standard
Per quanto riguarda le alterazioni del database, un 
\family typewriter
UPDATE
\family default
 si svolge esattamente come la versione tradizionale, con la differenza
 che la versione temporale prevede, come è ormai consuetudine, un periodo
 di applicabilità.
 In questo caso, è necessario eseguire una serie di operazioni più lunga
 e complessa, nello specifico:
\end_layout

\begin_layout Itemize
Inserire i vecchi record dal loro inizio naturale fino all'inizio del periodo
 di modifica;
\end_layout

\begin_layout Itemize
Inserire i vecchi record dalla fine del periodo di modifica fino alla loro
 fine naturale;
\end_layout

\begin_layout Itemize
Per i record che si sovrappongono al periodo di modifica, effettuare l'update
 dei campi previsti;
\end_layout

\begin_layout Itemize
Modificare la data di inizio dei record che si sovrappongono al periodo
 di modifica all'inizio di detto periodo
\end_layout

\begin_layout Itemize
Modificare la data di fine dei record che si sovrappongono al periodo di
 modifica, alla fine di detto periodo;
\end_layout

\begin_layout Standard
Nel caso di un aggiornamento che coinvolga solo la parte centrale di un
 record, è necessario svolgere il primo passo, che crea la prima parte del
 record che rimane invariata, e il secondo che crea la parte omologa alla
 fine del periodo di validità; successivamente, per creare la parte di record
 che subisce l'aggiornamento, è necessario svolgere il terzo passo sulla
 riga iniziale, che ha ancora validità per l'intero periodo, cambiando i
 dati richiesti.
 Dopo averla modificata, è necessario, con il quarto passo, adattare la
 data di inizio del periodo oggetto di variazione, e con il quinto si adatta
 l'istante finale.
 
\end_layout

\begin_layout Standard
Al contrario, nel caso in cui il tempo di modifica comprenda l'intero periodo
 del record, è sufficiente svolgere il terzo passo, modificando semplicemente
 i dati richiesti.
 I casi intermedi si svolgono effettuando solo i passi del procedimento
 che sono più adatti allo scopo.
\end_layout

\begin_layout Subsubsection
Modifiche non sequenziali
\end_layout

\begin_layout Standard
Le modifiche non sequenziali sono, curiosamente, quelle più facili da eseguire
 in SQL, ma allo stesso tempo quelle più difficili da esprimere in linguaggio
 naturale, e di conseguenza le meno usate.
 Come mai questo apparente paradosso? Perchè le modifiche non sequenziali
 si riferiscono alla rappresentazione della tabella, e non a una interpretazione
 della realtà, e ciò le rende molto facili da tradurre in linguaggio SQL,
 ma molto difficili da associare alla situazione reale.
 Allo stesso tempo, nonostante la facilità di traduzione in SQL, queste
 modifiche possono causare molti danni al database, poichè i campi tempo
 vengono trattati esattamente come gli altri campi dati, e quindi non si
 ha alcuna garanzia che le alterazioni che si stanno per fare non causino
 alcun duplicato.
 Anzi, la situazione è opposta: le modifiche non sequenziali causano molti
 duplicati sequenziali, poichè le alterazioni trattano il tempo come un
 dato, potendo quindi aggiungere o sottrarre tempo come si fa con i normali
 numeri, senza però avere la certezza che l'intera operazione sia esente
 da sovrapposizioni o duplicati, come avviene con le modifiche correnti
 o sequenziali.
 Questo è il principale limite delle modifiche non sequenziali: per poter
 operare tranquillamente è necessario estendere il significato delle modifiche,
 aggiungendo dei controlli che verificano che l'unicità o l'integrità referenzia
le sia rispettata, e ciò rende impossibile la definizione di un algoritmo
 generale, rendendo necessario lavorare con queste query analizzando la
 situazione caso per caso.
\end_layout

\begin_layout Subsection
Tabelle con tempo di transazione
\end_layout

\begin_layout Standard
Come accennato in precedenza, una tabella con tempo di transazione non è
 altro che l'insieme di tante "fotografie" (in inglese, snapshot) che mantengono
 lo stato di una tabella nel corso del tempo.
 Questo avviene, in maniera molto simile alle tabelle con tempo di validità,
 associando un periodo a ogni record.
 Tuttavia, questo periodo non rappresenta il tempo di validità propriamente
 detto, ma viene definito come tempo di permanenza, cioè il periodo in cui
 la riga era presente nella tabella prima di subire una cancellazione o
 una modifica.
 
\end_layout

\begin_layout Standard
In questo tipo di tabelle difficilmente le righe vengono inserite manualmente,
 anche se è perfettamente possibile: in genere, l'inserimento viene fatto
 tramite l'azione di un trigger sulla tabella di cui si vuole mantenere
 lo stato (detta tabella monitorata), e così funziona anche con le modifiche:
 anche se è possibile effettuare una modifica manuale ogni volta che occorre
 nella tabella monitorata, è molto più facile che dette modifiche vengano
 riflesse automaticamente nella tabella con tempo di transazione, ad esempio
 con l'effetto di un trigger, o in altro modo.
 Queste tabelle hanno molto in comune con le tabelle con tempo di validità,
 e quindi questa sezione tratterà principalmente ciò che differenzia le
 tabelle con tempo di transazione da quelle con tempo di validità.
\end_layout

\begin_layout Subsubsection
Manutenzione
\end_layout

\begin_layout Standard
Per manutenzione delle tabelle si intendono tutti i processi atti a mantenere
 la tabella in uno stato di coerenza con la realtà, e per estensione tutti
 i metodi che consentono, in un qualsiasi momento, di recuperare lo stato
 della tabella in un qualsiasi altro momento dalla sua creazione fino al
 momento attuale.
 
\end_layout

\begin_layout Standard
Una tabella con tempi di transazione prevede due principali metodi di manutenzio
ne: la gestione con i trigger e la gestione diretta.
\end_layout

\begin_layout Paragraph
Gestione con i trigger
\end_layout

\begin_layout Standard
In questo caso parlare di "gestione" o "manutenzione" potrebbe sembrare
 fuori luogo, poichè con questi termini sembra che l'effettivo controllo
 sia nelle mani dell'utente, o comunque che chi gestisce abbia un ruolo
 preponderante nell'operazione.
 In realtà, tutta questa gestione è "dietro le quinte", affidata ai trigger
 che sono stati definiti in fase di creazione della tabella stessa.
\end_layout

\begin_layout Paragraph
Gestione diretta
\end_layout

\begin_layout Standard
Questo genere di gestione, invece che due tabelle come nella gestione con
 trigger (tabella monitorata e tabella con tempo di transazione), ne utilizza
 una "reale" (la tabella con tempo di transazione) e una "virtuale", intesa
 come una vista che si basa sulla tabella reale per ottenere i dati validi
 in quel momento.
 
\end_layout

\begin_layout Standard
Finchè una applicazione ha come obiettivo quello di interrogare la tabella
 virtuale per ottenere i dati senza apportare modifiche, allora la vista
 compie egregiamente il proprio lavoro, e permette anche un risparmio di
 spazio: infatti, con le gestione tramite i trigger, c'è il bisogno di mantenere
 due tabelle formalmente distinte ma con dati uguali, avendo così una ridondanza
 che va a scapito delle prestazioni, e nel caso la tabella fosse particolarmente
 grande, anche delle dimensioni su disco.
\end_layout

\begin_layout Standard
Nel caso una applicazione avesse bisogno di scrivere sulla tabella, invece,
 è inevitabilmente necessario operare direttamente su di essa, anzichè "per
 vie traverse" come l'alternativa precedente, alterando quindi i dati in
 essa contenuti.
 Questa operazione, che ricordiamo essere molto difficile nelle tabelle
 con tempo di validità per via della grande quantità di varianti disponibili
 (ben dodici, comprensive di modifiche correnti nel caso ristretto alle
 sole modifiche correnti, modifiche correnti nel caso generale, modifiche
 sequenziali, modifiche non sequenziali), nel caso delle tabelle con tempo
 di transazione è molto più rapida, poichè ci sono solo modifiche correnti:
 non è possibile effettuare modifiche nel passato, poichè è già avvenuto
 e non sarebbe coerente, e similarmente non è possibile modificare il futuro,
 poichè non si sa con certezza come la situazione si evolverà.
 Perciò, rimangono solo tre operazioni (INSERT corrente, DELETE corrente
 e UPDATE corrente) che come esecuzione sono del tutto simili a quelli presenti
 nelle tabelle con tempo di validità, a cui si fa rimando.
\end_layout

\begin_layout Subsubsection
Interrogazioni
\end_layout

\begin_layout Standard
Le tabelle con tempo di transazione hanno dalla loro parte, anche in questo
 caso in maniera molto simile alle tabelle con tempo di validità, la facilità
 di interrogazione.
 Tuttavia, hanno una differenza sostanziale, che è data dalle interrogazioni
 nel futuro: mentre le tabelle con tempo di validità permettono questa operazion
e, che al limite potrà restituire risultati incompleti o imprecisi rispetto
 all'interrogazione corrente effettuata nello stesso momento, le tabelle
 con tempo di transazione non rendono disponibile questo tipo di interrogazione.
 Il motivo è molto semplice: siccome le tabelle con tempo di transazione
 sono state create per rendere possibile la ricostruzione della tabella
 in un istante passato o, al limite, presente, ne deriva che una ricostruzione
 della tabella in un istante futuro, per quanto teoricamente possibile,
 sarebbe del tutto priva di senso.
 Oltre a questa, esistono altre due distinzioni fondamentali sulle tabelle
 con tempo di validità e con tempo di transazione:
\end_layout

\begin_layout Itemize
La prima, in questo caso puramente interpretativa piuttosto che sostanziale,
 è data dal fatto che le modifiche sequenziali di una tabella con tempo
 di validità rispondono alla richiesta di "Mostrare l'evoluzione di" un
 certo evento, mentre le tabelle con tempo di transazione, alla stessa interroga
zione, danno il significato di "Mostrare i cambiamenti del database che
 corrispondono a" un certo evento.
 La differenza è abbastanza semplice da apprezzare: molto spesso, infatti,
 gli eventi sono registrati nel database in istanti precedenti o successivi
 all'effettivo avvio della validità dell'evento stesso, perciò è facile
 immaginare come una tabella con tempo di validità e una tabella con tempo
 di transazione, se interrogate, difficilmente avranno record completamente
 identici sia in termini di numero che di contenuto.
\end_layout

\begin_layout Itemize
La seconda, invece, è data dal fatto che una interrogazione sequenziale
 effettuata su una tabella con tempo di validità ritorna sempre una nuova
 tabella con tempo di validità, mentre una tabella con tempo di transazione,
 al contrario, non ritorna mai una tabella con tempo di transazione.
 La spiegazione di questo concetto va ricercata nelle caratteristiche intrinsech
e della tabella: infatti una tabella con tempo di validità, anche se ristretta,
 è caratterizzata da un periodo che vale solo nei confronti del record in
 cui è salvato, per cui anche una proiezione della tabella non ne altera
 la correttezza.
 Una tabella con tempo di transazione, invece, è considerata tale solo se
 è possibile, ad ogni momento, recuperare uno stato precedente della tabella
 stessa.
 Quindi, se si effettua una query sequenziale, verranno evidenziati solo
 i record che rispettano le condizioni, il che è corretto, ma allo stesso
 tempo fa venir meno la possibilità di ripristino di uno stato precedente,
 poichè il risultato che deriverebbe da un tentativo in questo senso non
 sarebbe sicuramente completo.
\end_layout

\begin_layout Subsection
Tabelle bitemporali
\end_layout

\begin_layout Standard
Unione di tabelle con tempo di validità e tempo di transazione
\end_layout

\begin_layout Standard
9 operazioni
\end_layout

\begin_layout Standard
current
\end_layout

\begin_layout Standard
sequenced
\end_layout

\begin_layout Standard
non sequenced
\end_layout

\begin_layout Part
Confronti
\end_layout

\begin_layout Section
SQL-2011
\end_layout

\begin_layout Standard
SQL-2011 è la più recente release dello standard SQL, ed è considerata la
 release più importante in materia di database temporali.
 Da ormai molto tempo quasi nessun DBMS segue scrupolosamente le direttive
 dello standard SQL, poichè nel corso degli anni sono state sviluppate versioni
 che, se per alcuni aspetti sono praticamente identiche alla versione standard,
 per altri aspetti sono molto diverse dall'originale.
 Questo perchè ogni produttore di software ha la propria filosofia, che
 cerca di infondere nel prodotto che poi verrà destinato alla vendita.
 Comunque, anche se non è più utilizzato nella sua forma base, SQL ha ancora
 la capacità di dettare le regole e di definire le innovazioni in materia,
 e perciò, anche per garantire una trattazione generale e slegata da ogni
 soluzione proprietaria, in questa sezione verranno trattate le principali
 caratteristiche dello standard.
\end_layout

\begin_layout Standard
Le innovazioni principali sono:
\end_layout

\begin_layout Itemize
Il supporto ai periodi, una lacuna che si protraeva da alcuni anni e che
 è stata colmata solo in questa versione;
\end_layout

\begin_layout Itemize
Il supporto, seppur modificato e adattato, all'Algebra di Allen, tramite
 l'introduzione di costrutti utili allo scopo;
\end_layout

\begin_layout Itemize
L'introduzione dei concetti di "Application time" e "System time", che corrispon
dono rispettivamente a tempo di validità e tempo di transazione, con alcune
 modifiche rispetto alla trattazione teorica delle pagine precedenti;
\end_layout

\begin_layout Subsection

\family typewriter
PERIOD
\end_layout

\begin_layout Standard
L'introduzione dei periodi è sicuramente il cambiamento più rilevante per
 quanto riguarda gli aspetti temporali di SQL, ed è anche quello grazie
 al quale sono possibili altre particolari innovazioni, come la gestione
 delle chiavi primarie e la gestione dell'integrità referenziale.
 Un periodo è interpretabile come la combinazione di istanti e intervalli:
 infatti si estende per un periodo di tempo, quindi un intervallo, con la
 differenza che è precisamente delimitato da istanti.
 Con questa innovazione è possibile semplificare notevolmente la creazione
 delle tabelle, la successiva interrogazione delle stesse, l'utilizzo di
 chiavi primarie e, ultimo ma non meno importante, la gestione dell'integrità
 referenziale.
\end_layout

\begin_layout Subsubsection
Utilizzo dei periodi
\end_layout

\begin_layout Paragraph
Creazione di tabelle e interrogazioni
\end_layout

\begin_layout Standard
Per fare un esempio, supponiamo di voler creare una tabella che vuole registrare
 i giocatori di una squadra di calcio: in questo caso è sufficiente salvare
 i dati anagrafici (per semplicità, nome e cognome), il periodo di permanenza
 nella squadra e lo stipendio del giocatore, supponendo per semplicità che
 questa sia l'unica tabella del database (senza perciò necessità di chiavi
 esterne o tabelle aggiuntive).
 Per far ciò, utilizzando i nuovi costrutti di SQL, utilizziamo il seguente
 codice:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

CREATE TABLE Giocatori
\end_layout

\begin_layout Plain Layout

( 
\end_layout

\begin_layout Plain Layout

	ID_Giocatore INTEGER,
\end_layout

\begin_layout Plain Layout

	Nome VARCHAR, 
\end_layout

\begin_layout Plain Layout

	Stipendio INTEGER, 
\end_layout

\begin_layout Plain Layout

	Data_Inizio DATE, 
\end_layout

\begin_layout Plain Layout

	Data_Fine DATE, 
\end_layout

\begin_layout Plain Layout

	PERIOD FOR Periodo (DataInizio, DataFine) 
\end_layout

\begin_layout Plain Layout

);
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Codice di creazione della tabella 
\family typewriter
Giocatori
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
con questo codice verrà creata la tabella Giocatori.
 Una particolarità è che il periodo, seppur presente, non sarà visibile
 come campo.
\end_layout

\begin_layout Standard
L'inserimento avviene nella usuale maniera, senza ovviamente la necessità
 di specificare il periodo, perchè sarà automaticamente desunto dalla differenza
 delle due date inserite:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

INSERT INTO Giocatori VALUES 
\end_layout

\begin_layout Plain Layout

(
\end_layout

\begin_layout Plain Layout

	'Mario Rossi', 
\end_layout

\begin_layout Plain Layout

	 3000,
\end_layout

\begin_layout Plain Layout

	 DATE ‘2013-01-01’, 
\end_layout

\begin_layout Plain Layout

	 DATE '2015-01-01'
\end_layout

\begin_layout Plain Layout

);
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Inserimento nella tabella 
\family typewriter
Giocatori
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
che andrà a costituire la seguente tabella, contenente il giocatore Mario
 Rossi che riceve uno stipendio di 
\family typewriter
3000
\family default
, e che ha un contratto dal 01 gennaio 2013 al 31 dicembre 2015.
 È da notare il fatto che l periodo è nella rappresentazione chiuso/aperto,
 quindi la data finale va aumentata di un giorno rispetto al periodo effettivo.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giocatori
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Giocatore
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Stipendio
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Data_Inizio
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Data_Fine
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
3000
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2013-01-01
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2015-12-31
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
Giocatori
\family default
 dopo l'inserimento
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Ora, per evidenziare al meglio le nuove caratteristiche del costrutto 
\family typewriter
PERIOD
\family default
, supponiamo che, grazie alla vittoria del campionato, Mario Rossi riceva
 uno stipendio di 
\family typewriter
5000
\family default
 dal 01 giugno 2014 fino a fine anno, per poi tornare alla precedente retribuzio
ne.
 Per far ciò, con le versioni di SQL antecedenti al 2011 sarebbe stata necessari
a una query molto lunga, perchè bisogna controllare prima che il giocatore
 ricada nella fascia temporale prevista, poi bisogna inserire un nuovo record
 corrispondente alla nuova situazione contrattuale, e infine bisogna inserire
 la prosecuzione del contratto dalla fine del periodo premio fino alla scadenza
 naturale.
 con SQL-2011 e 
\family typewriter
PERIOD
\family default
, tutto questo viene svolto in maniera automatica dal sistema, utilizzando
 una sola query:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

UPDATE Giocatori 
\end_layout

\begin_layout Plain Layout

	FOR PORTION OF Periodo 
\end_layout

\begin_layout Plain Layout

		FROM DATE '2014-06-01'  
\end_layout

\begin_layout Plain Layout

		TO DATE '2015-01-01' 
\end_layout

\begin_layout Plain Layout

	SET Stipendio = 5000;
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout

\family typewriter
UPDATE
\family default
 della tabella 
\family typewriter
Giocatori
\family default
 
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Il funzionamento di questa query è semplice, ma allo stesso tempo molto
 potente: il codice non fa altro che cercare i record che hanno un periodo
 che si interseca con quello specificato nel codice, cioè dal 01 giugno
 2014 fino alla fine dell'anno (anche qui, la notazione del periodo utilizzata
 è quella chiuso/aperto).
 Se il periodo dei record è interamente contenuto in quello specificato,
 allora il record viene semplicemente aggiornato con i nuovi valori.
 Nel caso in cui il periodo del record ecceda, in uno o entrambi i sensi,
 quello specificato, allora si procede modificando i dati del record esistente
 per adeguarli alla nuova situazione, e poi aggiungendo una o due righe
 aggiuntive con i nuovi dati.
 Nel nostro caso avremo:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Giocatori
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Giocatore
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Stipendio
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Data_Inizio
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Data_Fine
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
3000
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2013-01-01
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2014-06-01
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
5000
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2014-06-01
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2015-01-01
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
3000
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2015-01-01
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2016-01-01
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Tabella 
\family typewriter
Giocatori
\family default
 dopo l'inserimento
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Il funzionamento è evidente nella tabella 3, che mostra le modifiche compiute
 sulla tabella 
\family typewriter
Giocatori
\family default
.
 Siccome Mario Rossi ha un contratto che include per intero il periodo di
 premio, eccedendo sia prima che dopo di esso, è stata modificata la riga
 per adattarla alla nuova situazione, e poi sono stati inseriti due record
 aggiuntivi: uno per l'intero periodo premio, e uno per la prosecuzione
 del contratto fino alla scadenza naturale.
\end_layout

\begin_layout Standard
Nel caso un giocatore avesse avuto un contratto con scadenza durante il
 periodo di premio, allora si sarebbe modificato il record esistente esattamente
 come sopra, e sarebbe stato inserito un record solo, corrispondente al
 periodo dall'inizio del premio fino a scadenza.
 Per i contratti iniziati durante il periodo di premio il concetto è inverso,
 ma analogo.
\end_layout

\begin_layout Standard

\end_layout

\begin_layout Subsection
Algebra di Allen applicata a SQL
\end_layout

\begin_layout Standard
Con la release 2011, SQL introduce delle specifiche parole chiave che supportano
 il confronto tra periodi.
 e parole chiave sono molto simili a quelle introdotte da Allen nell'algebra
 omonima, ma nel caso di SQL sono stati leggermente modificati nel comportamento
, in modo da rendere il loro comportamento leggermente più flessibile di
 quello teorizzato agli inizi.
 Le nuove parole chiave sono 
\family typewriter
CONTAINS, OVERLAPS, EQUALS, PRECEDES, SUCCEEDS, IMMEDIATELY PRECEDES
\family default
 e 
\family typewriter
IMMEDIATELY SUCCEEDS
\family default
, e sono definiti come segue:
\end_layout

\begin_layout Itemize

\family typewriter
X CONTAINS Y
\family default
 è verificato se il periodo X contiene completamente il periodo Y.
 Questa definizione è molto meno restrittiva di quella equivalente in algebra
 di Allen, perchè quest'ultime considera un periodo contenuto in un altro
 solo se non condividono gli istanti di inizio e/o di fine, poichè altrimenti
 ricadrebbero in altri casi.
 Il costrutto comprende:
\end_layout

\begin_deeper
\begin_layout Itemize

\family typewriter
Y starts X
\end_layout

\begin_layout Itemize

\family typewriter
Y finishes X
\end_layout

\begin_layout Itemize

\family typewriter
Y during X
\end_layout

\begin_layout Itemize

\family typewriter
Y equal X
\end_layout

\end_deeper
\begin_layout Itemize

\family typewriter
X OVERLAPS Y
\family default
 ha un significato molto diverso in SQL: mentre l'algebra di Allen definisce
 sovrapposti due periodi che hano più di un istante in comune, per SQL è
 sufficiente che l'istante in comune sia solo uno.
 inoltre, mentre in SQL 
\family typewriter
X OVERLAPS Y
\family default
 è uguale a 
\family typewriter
Y OVERLAPS X
\family default
, nell'algebra dei periodi ciò non è vero.
 Ne deriva che questo costrutto, in SQL, comprende molti casi dell'algebra
 dei periodi, ovvero:
\end_layout

\begin_deeper
\begin_layout Itemize

\family typewriter
X overlaps Y
\end_layout

\begin_layout Itemize

\family typewriter
Y overlaps X
\end_layout

\begin_layout Itemize

\family typewriter
X during Y 
\end_layout

\begin_layout Itemize

\family typewriter
Y during X
\end_layout

\begin_layout Itemize

\family typewriter
X starts Y
\end_layout

\begin_layout Itemize

\family typewriter
Y starts X
\end_layout

\begin_layout Itemize

\family typewriter
X finishes Y
\end_layout

\begin_layout Itemize

\family typewriter
Y finishes X
\end_layout

\begin_layout Itemize

\family typewriter
X equals Y
\end_layout

\end_deeper
\begin_layout Itemize

\family typewriter
X EQUALS Y
\family default
 ha lo stesso significato sia in SQL che in algebra di Allen;
\end_layout

\begin_layout Itemize

\family typewriter
X PRECEDES Y
\family default
 si considera vero se X condivide al massimo l'istante di fine con quello
 di inizio di Y.
 Perciò, nell'algebra dei periodi, corrisponde a:
\end_layout

\begin_deeper
\begin_layout Itemize

\family typewriter
X before Y
\end_layout

\begin_layout Itemize

\family typewriter
X meets Y
\end_layout

\end_deeper
\begin_layout Itemize

\family typewriter
X SUCCEEDS Y
\family default
 è la controparte finale del punto precedente.
 Si considera vero se X condivide al massimo l'istante di inizio con quello
 di fine di Y, perciò equivale a:
\end_layout

\begin_deeper
\begin_layout Itemize

\family typewriter
Y meets X
\end_layout

\begin_layout Itemize

\family typewriter
X after Y
\end_layout

\end_deeper
\begin_layout Itemize

\family typewriter
X IMMEDIATELY PRECEDES Y
\family default
 corrisponde al costrutto 
\family typewriter
X meets Y
\end_layout

\begin_layout Itemize

\family typewriter
X IMMEDIATELY SUCCEEDS Y
\family default
 corrisponde al costrutto 
\family typewriter
Y meets X
\end_layout

\begin_layout Standard
Come è possibile vedere, l'interpretazione che lo standard dà a queste parole
 chiave è, in alcuni casi, molto meno stringente della controparte teorica.
 Questo può sembrare un errore, ma in realtà è stato fatto anche per privilegiar
e la logica: in molti casi (
\family typewriter
during
\family default
 uno su tutti) l'algebra di Allen è fin troppo specifica, a volte anche
 poco naturale (come mai due periodi che iniziano insieme e finiscono in
 istanti diversi non sono considerati uno sovrapposto all'altro?), e una
 implementazione letterale di questi concetti renderebbe molto difficile
 la scrittura e la successiva comprensione del codice, poichè per verificare
 una condizione logicamente valida, è spesso necessario eseguire nel codice
 almeno due test, fino addirittura a sette.
 SQL risolve questo problema accorpando le regole di Allen che sono logicamente
 simili, rendendo così i test effettuati numericamente minori, ma allo stesso
 tempo addirittura più completi.
\end_layout

\begin_layout Subsection
Application time e System time
\end_layout

\begin_layout Standard
Le ultime modifiche rilevanti presenti in SQL-2011, in termini temporali,
 riguardano l'introduzione ufficiale di due concetti, definiti "Application
 Time" e "System time" che corrispondono rispettivamente al tempo di validità
 e al tempo di transazione, che applicati alle tabelle hanno trattazione
 del tutto paragonabile a quella effettuata nelle pagine precedenti.
 L'unica differenza sostanziale riguarda il costrutto PERIOD, che può essere
 applicato dalla creazione delle tabelle, alla loro interrogazione, alla
 modifica, e sarà esaminato nelle prossime righe.
\end_layout

\begin_layout Subsubsection
Application time tables
\end_layout

\begin_layout Standard
Le tabelle provviste di application time, rispetto alle tabelle con tempo
 di validità già conosciute, cambiano solo nel nome
\end_layout

\begin_layout Paragraph
Chiavi Primarie
\end_layout

\begin_layout Standard
La potenza, e al contempo la flessibilità, dei periodi non si ferma alle
 tabelle: è possibile, infatti, anche definire delle chiavi primarie che
 comprendono anche questo nuovo elemento, in modo da applicare automaticamente
 i controlli che valutano se il record che si sta per inserire rispetta
 i criteri fissati.
 Il codice per applicare una chiave primaria è il seguente:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

[...]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

ALTER TABLE GIOCATORI 
\end_layout

\begin_layout Plain Layout

ADD PRIMARY KEY 
\end_layout

\begin_layout Plain Layout

(
\end_layout

\begin_layout Plain Layout

  ID_Giocatore,   
\end_layout

\begin_layout Plain Layout

  Periodo 
\end_layout

\begin_layout Plain Layout

  WITHOUT OVERLAPS
\end_layout

\begin_layout Plain Layout

)
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

[...]
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Applicazione di una chiave primaria temporale alla tabella GIOCATORI
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
E consiste nel verificare automaticamente che, per ogni record inserito,
 il periodo relativo non sia in sovrapposizione con quello di altri record
 contraddistinti dal medesimo codice.
 Per fare un esempio, supponiamo di aver aggiornato con l'algoritmo precedente
 la tabella sopra specificata, e di voler inserire il seguente record, che
 documenta il cambiamento di contratto di Mario Rossi per due mesi con stipendio
 di 5000:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\backslash
makebox[
\backslash
textwidth]{%
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="2" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
ID_Giocatore
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Nome
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Stipendio
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Data_Inizio
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Data_Fine
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
Mario Rossi
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
5000
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2014-08-01
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
2014-10-01
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Record di esempio tabella 
\family typewriter
GIOCATORI
\family default
: sovrapposizione di periodi
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Come è possibile notare dalla tabella 30, questo record, seppur formalmente
 lecito, non potrà essere inserito in virtù dell'operazione di aggiunta
 della chiave primaria, poichè il controllo della chiave primaria riscontrerà
 una sovrapposizione tra questo record e il secondo presente nella tabella,
 negando quindi l'inserimento.
 In un certo senso, è possibile sintetizzare questo comando dicendo che
 la chiave primaria sul periodo, con l'opzione WITHOUT OVERLAPS, consente
 di prevenire i duplicati sequenziali, mentre senza questa opzione vengono
 considerati solo i duplicati con periodi esattamente uguali (che non è
 appropriato definire non sequenziali, poichè i campi diversi da quelli
 specificati potrebbero essere diversi).
\end_layout

\begin_layout Paragraph
Integrità referenziale
\end_layout

\begin_layout Standard
Allo stesso modo delle speciali innovazioni applicate alle chiavi primarie,
 che coinvolgono i periodi, anche l'integrità referenziale può essere garantita
 utilizzando un semplice costrutto che risparmia molto lavoro di controllo.
 Infatti, per assicurarsi che un record soddisfi i requisiti di integrità
 referenziale è necessario verificare se nell'istante di inizio, nell'istante
 di fine e durante il periodo è presente un record valido nella tabella
 collegata.
 Questo, nei modi consueti, crea molti problemi di gestione, soprattutto
 perchè è necessario mettere in pratica una lunga serie di controlli.
 Tutto questo, con i nuovi costrutti, non è più necessario.
 Infatti, è sufficiente inserire una chiave esterna nel modo di seguito
 specificato:
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

[...]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

ALTER TABLE Tabella1 
\end_layout

\begin_layout Plain Layout

ADD FOREIGN KEY  
\end_layout

\begin_layout Plain Layout

(
\end_layout

\begin_layout Plain Layout

  Campo, 
\end_layout

\begin_layout Plain Layout

  PERIOD Periodo1
\end_layout

\begin_layout Plain Layout

)  
\end_layout

\begin_layout Plain Layout

REFERENCES Tabella2  
\end_layout

\begin_layout Plain Layout

(  
\end_layout

\begin_layout Plain Layout

  Campo2, 
\end_layout

\begin_layout Plain Layout

  PERIOD Periodo2
\end_layout

\begin_layout Plain Layout

)
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

[...]
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Applicazionedi una chiave esterna temporale, con il costrutto PERIOD
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
E in questo modo verranno automaticamente verificati tutti i controlli che
 costituiscono la validità di una chiave esterna, e nello specifico:
\end_layout

\begin_layout Itemize
Esiste un record valido nella tabella destinazione al momento in cui il
 record origine ha iniziato la validità;
\end_layout

\begin_layout Itemize
Esiste un record valido nella tabella destinazione al momento in cui il
 record origine finisce la validità;
\end_layout

\begin_layout Itemize
Non esistono "buchi" (cioè record che finiscono durante il periodo di validità
 della tabella origine e che non sono "estesi" da un altro record con validità
 maggiore e stessi dati) 
\end_layout

\begin_layout Standard
Ovviamente questo scenario si applica nel caso in cui le tabelle siano entrambe
 temporali.
 Per i casi intermedi (una sola tabella temporale, oppure nessuna temporale)
 il discorso si restringe molto, a volte non rendendo nemmeno necessario
 l'utilizzo di questi accorgimenti.
\end_layout

\begin_layout Standard
tabelle con tempo di transazione
\end_layout

\begin_layout Standard
Con il termine adottato nello standard SQL di Application time non si intende
 altro che il concetto di tempo di validità menzionato all'inizio.
 Di conseguenza, è possibile creare anche delle application time tables,
 che come dice il nome hanno la stessa funzione delle tabelle con tempo
 di validità.
 Rispetto alla teoria, però, cambiano le operazioni eseguibili su di essa,
 poichè è disponibile anche il costrutto PERIOD, che semplifica molto questi
 passaggi.
\end_layout

\begin_layout Section
Il caso concreto: Fondazione Bruno Kessler
\end_layout

\begin_layout Standard
Nel periodo di stage, da dicembre 2013 fino ad aprile 2014, che ho passato
 in Fondazione Bruno Kessler, area Sistemi Informativi, ho avuto spesso
 a che fare con i database, anche perchè sono stato frequentemente impegnato
 in lavori di manipolazione e analisi dei dati.
 Non tutti i database della Fondazione, però, sono database temporali: gestendo
 una gran mole di informazioni di tutti tipi, impostare ogni tabella o database
 con un approccio temporale diventerebbe, a lungo andare, complicato e inutilmen
te faticoso, anche perchè non sempre i database necessitano di questo tipo
 di organizzazione.
 Per questo motivo, tra tutti le tabelle che ho avuto modo di utilizzare,
 ho notato che le poche ad avere un'impostazione temporale sono soprattutto
 quelle dedicate al personale, come residenza e coordinate bancarie.
\end_layout

\begin_layout Standard
Un dubbio che potrebbe sorgere riguarda l'effettiva utilità dell'approccio
 temporale: a cosa serve mantenere tutti i dati di un dipendente, quando
 ciò che lo riguarda (come cedolini paga o comunicazioni) viene creato solo
 all'istante attuale? Il motivo è presto detto: per garantire la coerenza
 di tutte le operazioni effettuate, non è possibile aggiornare in maniera
 distruttiva, cioè sovrascrivendo, il profilo del singolo dipendente, poichè
 verrebbero inevitabilmente alterati tutti i dati inseriti nel passato;
 è necessario quindi inserire un nuovo record, corredato di tempo di validità,
 ad ogni cambio di residenza o di coordinate bancarie, in modo da poter
 facilmente recuperare tutto ciò che serve in caso di bisogno, come nel
 caso di problemi con i pagamenti, oppure di revisione dei conti (cosa che,
 essendo la Fondazione un ente a partecipazione pubblica, è un evento piuttosto
 frequente).
\end_layout

\begin_layout Standard
Una cosa che mi ha colpito della gestione dei database in Fondazione Bruno
 Kessler è la mancanza di tabelle con tempo di transizione: potrebbero essere
 utili, sopratutto se è necessario valutare la situazione di una tabella
 nel passato grazie alla possibilità di ricostruire lo stato che aveva all'epoca
, ma FBK adotta un sistema alternativo.
 La funzione delle tabelle con tempo di transazione è sostituita, a mio
 parere egregiamente, dall'utilizzo di frequenti backup: Durante la giornata,
 a intervalli regolari, e durante la notte, la situazione del database del
 personale viene sincronizzata con il server fisico dove risiede, che si
 trova a Milano e viene gestito da una società esterna, mentre i database
 locali vengono sincronizzati sui server presenti nella Fondazione stessa.
 Questo, unito ai frequenti backup che vengono eseguiti e conservati per
 un periodo di tempo che va da un mese a qualche anno, rende i database
 molto sicuri e robusti anche senza l'applicazione precisa delle regole
 e dei concetti spiegati in questa tesi.
 
\end_layout

\begin_layout Standard
Il sistema usato in tutti i database è SQL Server, che di base non ha una
 impostazione prettamente temporale: questo potenziale problema viene aggirato
 tramite l'impostazione, in fase di creazione delle tabelle, di una coppia
 di campi che viene automaticamente popolata in caso di inserimento di un
 nuovo dato.
 Non esiste una vera e propria gestione dei tempi effettuata come nello
 standard SQL-2011, con i costrutti 
\family typewriter
PERIOD
\family default
 che permettono l'automatica scissione dei periodi di validità dove richiesto,
 ma vengono utilizzati trigger oppure query successive, che in ogni caso
 non pregiudicano la stabilità del sistema poichè non viene salvata l'ora,
 ma solo il giorno della modifica stessa.
\end_layout

\begin_layout Standard
Nonostante l'approccio non sia certamente aderente a ciò che è stato esposto
 fino a questo momento, trovo che il sistema di tabelle temporali utilizzato
 da Fondazione Bruno Kessler sia molto efficiente e coerente con gli obiettivi
 che la Fondazione stessa si pone.
 Infatti, anche se in maniera molto semplificata rispetto alla teorizzazione
 originaria, questo metodo riesce a ridurre al minimo le aggiunte e le modifiche
 strettamente funzionali, come appunto i campi di data, che è necessario
 fare alle tabelle e agli interi database, in modo da mantenere semplice
 la gestione ma allo stesso tempo rendere la consultazione anche di record
 remoti nel tempo semplice, comprensibile e soprattutto veloce.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Part
Conclusione
\end_layout

\begin_layout Standard
Come è stato esposto in questa tesi, i database temporali dalla loro introduzion
e fino ai giorni nostri hanno avuto una notevole evoluzione: sono passati
 da essere poco più di un sogno formulato a fine del secolo scorso, a essere
 una parte imprescindibile dello standard SQL prima, e di tutti i maggiori
 sistemi che gestiscono grandi quantità di dati poi.
 Certo, questa grande potenza e flessibilità mal si coniuga con la semplicità
 di utilizzo: sono stati introdotti numerosi concetti, e molti altri sono
 stati volutamente tralasciati o solamente accennati in questo documento
 proprio perchè si tratta di caratteristiche dedicate a un utilizzo ancora
 più "estremo" dei database temporali, e molto spesso non pienamente utilizzate
 nemmeno nei grandi DBMS.
 Molti soggetti, e la Fondazione Bruno Kessler ne è un esempio, preferiscono
 utilizzare solo una parte di questa tecnologia, poichè ad esempio le funzionali
tà transazionali sono o di complicata implementazione, o inutili dal loro
 scopo di utilizzo (basti pensare ai backup, che se effettuati a intervalli
 di tempo adeguati, rendono molto meno utili le tabelle citate).
 Comunque, indipendentemente dal livello di implementazione adottato, con
 i naturali miglioramenti che ha avuto nel corso degli anni, questa tecnologia
 si è subito affermata come uno dei modi più validi per rappresentare lo
 scorrere del tempo, e per mettere "al passo con i tempi" un settore dell'inform
atica che viene ancora visto dagli utenti (e spesso anche dagli addetti
 ai lavori) come dedicato alla memorizzazione dei dati, ma che quasi mai
 viene associato anche a un metodo, provvisto di metodologie e particolarità
 caratteristiche, per mantenere una correttezza temporale dei dati salvati
 al suo interno.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Part
Appendici
\end_layout

\begin_layout Standard
\begin_inset FloatList table

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FloatList algorithm

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Acronimi
\end_layout

\begin_layout Itemize
SQL - Structured Query Language
\end_layout

\begin_layout Itemize
DBMS - Data Base Management System, sistema per la gestione di database
\end_layout

\begin_layout Itemize
TSQL - Temporal SQL, versione di SQL sviluppata da Richard T.
 Snodgrass
\end_layout

\begin_layout Itemize
T-SQL - Transact SQL, versione di SQL sviluppata da Microsoft e utilizzata
 nell'applicativo SQL Server
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "1"
key "1"

\end_inset

NIST's Second 'Quantum Logic Clock' Based on Aluminum Ion is Now World's
 Most Precise Clock: http://www.nist.gov/pml/div688/logicclock_020410.cfm
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "2"
key "2"

\end_inset

SQL Key Words: http://www.postgresql.org/docs/9.2/static/sql-keywords-appendix.html
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "4"
key "4"

\end_inset

Temporal databases: state-of-the-art and applications: http://mate.dm.uba.ar/~tera2
005/ConfVaisman.pdf
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "5"
key "5"

\end_inset

The Temporal Query Language TQuel - Richard Snodgrass http://www.cs.arizona.edu/~rt
s/pubs/TODS87.pdf
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "6"
key "6"

\end_inset

TSQL: A Design Approach - Richard Snodgrass http://www.cs.arizona.edu/~rts/initiati
ves/tsql2/tsqldesignapproach.pdf
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "7"
key "7"

\end_inset

Definizione di precisione - http://www.treccani.it/vocabolario/precisione/
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "8"
key "8"

\end_inset

Temporal features in SQL:2011- Krishna Kulkarni, Jan-Eike Michels http://www.sigm
od.org/publications/sigmod-record/1209/pdfs/07.industry.kulkarni.pdf
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "9"
key "9"

\end_inset

Developing Time-Oriented Database Applications in SQL, Richard T.
 Snodgrass - http://www.cs.arizona.edu/people/rts/tdbbook.pdf
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "10"
key "10"

\end_inset

Adding Transaction Time to SQL/Temporal - Richard T.
 Snodgrass, Michael H.
 Böhlen, Christian S.
 Jensen, and Andreas Steiner
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "11"
key "11"

\end_inset

http://www.jtc1sc32.org/doc/N2151-2200/32N2153T-text_for_ballot-FDIS_9075-1.pdf
\end_layout

\end_body
\end_document
